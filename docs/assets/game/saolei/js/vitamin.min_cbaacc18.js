var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function a(t){try{u(n.next(t))}catch(e){o(e)}}function s(t){try{u(n["throw"](t))}catch(e){o(e)}}function u(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(a,s)}u((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,o&&(a=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,o=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){u.label=i[1];break}if(6===i[0]&&u.label<a[1]){u.label=a[1],a=i;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(i);break}a[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(n){i=[6,n],o=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},__decorate=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,a=3>o?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(3>o?r(a):o>3?r(e,i,a):r(e,i))||a);return o>3&&a&&Object.defineProperty(e,i,a),a},vitamin;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.onConstruct=function(){var i=this;e.prototype.onConstruct.call(this),this.__data=this.data,delete this.data,Object.defineProperty(this,"data",{get:function(){return i.__data},set:function(t){var e=i.__data;return e&&i.onDataClean(e),i.__data=t,i.__data&&i.onDataChanged(i.__data,e),t},enumerable:!0,configurable:!0}),t.FguiUtil.mappingRef(this,this),t.BinderUtil.mappingBundle(this),this.create(),this.displayObject.addEventListener(egret.Event.ADDED_TO_STAGE,this.__added,this),this.displayObject.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.__removed,this)},i.prototype.__added=function(){var e=egret.getQualifiedClassName(this),i=t.__ui_map.views[e]?t.__ui_map.views[e].inject:null;if(i){var n=t.ObjectUtil.instance(i);t.Binder.exec(this,n),this.data=n}for(var r=0,o=t.__models.props;r<o.length;r++){var a=o[r];egret.getQualifiedClassName(a.clazz)==e&&(this[a.property]=t.data.getModel(egret.getQualifiedClassName(a.modelclazz)))}for(var s=0,u=t.__insts;s<u.length;s++){var c=u[s];egret.getQualifiedClassName(c.clazz)==e&&(this[c.property]=t.ObjectUtil.instance(c.propclazz))}this.addClickListener(this.selectedHandler,this),this.added()},i.prototype.__removed=function(){var e=egret.getQualifiedClassName(this),i=t.__ui_map.views[e]?t.__ui_map.views[e].inject:null;i&&t.Binder.un(this),this.removeClickListener(this.selectedHandler,this),this.removed()},i.prototype.added=function(){},i.prototype.removed=function(){},i.prototype.create=function(){},i.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},i.prototype.uninitialize=function(){},i.prototype.onResize=function(t,e){},i.prototype.onDataChanged=function(t,e){},i.prototype.onDataClean=function(t){},Object.defineProperty(i.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected!=t&&(this._selected=t,this.onSelectChange(this._selected))},enumerable:!0,configurable:!0}),i.prototype.selectedHandler=function(t){var e=this.parent;if(e instanceof fairygui.GList)for(var n=0,r=e._children;n<r.length;n++){var o=r[n];o instanceof i&&(o.selected=o==this)}},i.prototype.onSelectChange=function(t){},i.prototype.resizeNow=function(){t.stage.resize(this,this.onResize)},i.prototype.event=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var r=egret.Event.create(egret.Event,e);r.data=t.data;var o=this.displayObject.dispatchEvent(r);return egret.Event.release(r),o},i.prototype.on=function(t,i,n){return e.prototype.addEventListener.call(this,t,n,i)},i.prototype.off=function(t,i,n){return e.prototype.removeEventListener.call(this,t,n,i)},i.prototype.once=function(t,e,i){return this.displayObject.once(t,i,e)},i}(fgui.GComponent);t.GRuntimeBase=e,__reflect(e.prototype,"vitamin.GRuntimeBase")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(t){void 0===t&&(t=void 0),this.__$gid=void 0!=t?t:e.$GID++,this.create()}return Object.defineProperty(e.prototype,"gid",{get:function(){return this.__$gid},enumerable:!0,configurable:!0}),e.prototype.prop=function(e){return t.Watcher.get(this,e,{lazy:!0})},e.prototype.clearProps=function(){t.Watcher.clear(this)},e.prototype.create=function(){},e.$GID=0,e}();t.WatcherObject=e,__reflect(e.prototype,"vitamin.WatcherObject")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.__initialize=function(t){this.detail=t?t:{},void 0==this.detail.tapOutSideClose&&(this.detail.tapOutSideClose=!0),this.detail.offset||(this.detail.offset={x:0,y:0}),void 0==this.detail.offset.x&&(this.detail.offset.x=0),void 0==this.detail.offset.y&&(this.detail.offset.y=0)},Object.defineProperty(i.prototype,"type",{get:function(){return this.detail&&void 0!=this.detail.type?this.detail.type:void 0!=this._type?this._type:t.UIType.DIALOG},enumerable:!0,configurable:!0}),i.prototype.create=function(){t.FguiUtil.mappingRef(this,this,"frame"),this._type=t.UIType.FIX,this.touchable=!1},i.prototype.remove=function(){this.parent&&this.parent.removeChild(this)},i.prototype.open=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return t.addChild(this),this.touchable=!0,this.enter.apply(this,e),[4,this.tweenIn()];case 1:return i.sent(),this.enterOver.apply(this,e),[2]}})})},i.prototype.close=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.touchable=!1,this.exit(),t?[3,2]:[4,this.tweenOut()];case 1:e.sent(),e.label=2;case 2:return[2]}})})},i.prototype.tweenIn=function(){return Promise.resolve()},i.prototype.tweenOut=function(){return Promise.resolve()},i.prototype.enter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},i.prototype.enterOver=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},i.prototype.exit=function(){},i}(t.GRuntimeBase);t.ViewItem=e,__reflect(e.prototype,"vitamin.ViewItem")}(vitamin||(vitamin={}));var vitamin;!function(t){function e(e,i){return function(n){t.__ui.classes.comps.push({clazz:n,packname:e,detail:i})}}function i(e,i,n,r){return function(o){t.__ui.classes.views.push({clazz:o,packname:e,detail:i,refences:n,inject:r})}}function n(e,i,n){return function(r){t.__ui.classes.alerts.push({clazz:r,packname:e,detail:i,refences:n})}}function r(e,i,n){return void 0===n&&(n=1),function(r,o){t.__ui.bundles.push({clazz:r,property:o,propprefix:e,orderend:i,orderstart:n})}}function o(e,i,n){return function(r,o){t.__ui.binds.comps.push({clazz:r,property:o,vmproperty:e?e:o,setpath:i,options:n})}}function a(e,i){return function(n,r){i||(i={}),void 0==i.lazy&&(i.lazy=!1),t.__ui.binds.attris.push({clazz:n,property:r,vmproperty:e?e:r,options:i})}}function s(e,i){return function(n,r,o){t.__ui.binds.methods.push({clazz:n,property:r,vmproperty:e,listname:i})}}function u(e,i){return function(n,r,o){t.__ui.binds.cmds.push({clazz:n,method:r,commandName:e,sign:i})}}function c(e,i){return function(n,r,o){t.__ui.binds.msgs.push({clazz:n,method:r,message:e,sign:i})}}function l(){return function(e){t.__models.classes.push(e)}}function h(){return function(e){t.__models.mapes.push(e)}}function p(e){return function(i,n){t.__models.props.push({clazz:i,property:n,modelclazz:e})}}function f(e){return function(i,n){t.__insts.push({clazz:i,property:n,propclazz:e})}}function d(e){return function(i,n){t.__models.serializes.push({clazz:i,property:n,inspect:e})}}t.__ui={classes:{comps:[],views:[],alerts:[]},bundles:[],binds:{comps:[],attris:[],methods:[],cmds:[],msgs:[]}},t.__models={classes:[],mapes:[],props:[],serializes:[]},t.__insts=[],t.UIComponent=e,t.UIView=i,t.UIAlert=n,t.bundlecomp=r,t.bindcomp=o,t.bindattri=a,t.bindmethod=s,t.bindcmd=u,t.netmsg=c,t.Model=l,t.ModelMap=h,t.model=p,t.inst=f,t.serialize=d}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.uninitialize=function(){this.scaleX=this.scaleY=1,this.alpha=1,this.rotation=0,this._pivot=null,this.x=this.y=0,this.anchorOffsetX=0,this.anchorOffsetY=0},e.prototype.addTo=function(t,e){return void 0!=e?t.addChildAt(this,e):t.addChild(this),this},e.prototype.remove=function(){this.parent&&this.parent.removeChild(this)},Object.defineProperty(e.prototype,"x",{get:function(){return egret.superGetter(e,this,"x")},set:function(t){egret.superSetter(e,this,"x",t),egret.callLater(this.onPosition,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return egret.superGetter(e,this,"y")},set:function(t){egret.superSetter(e,this,"y",t),egret.callLater(this.onPosition,this)},enumerable:!0,configurable:!0}),e.prototype.pos=function(t,e){return this.x=t,this.y=void 0!=e?e:t,this},e.prototype.onPosition=function(){},e.prototype.rota=function(t){return this.rotation=t,this},e.prototype.scale=function(t,e){return this.scaleX=t,this.scaleY=void 0!=e?e:t,this},e.prototype.size=function(t,e){this.width=t,this.height=e},e.prototype.anchor=function(t,e){return this.anchorOffsetX=t,this.anchorOffsetY=void 0!=e?e:t,this},e.prototype.pivot=function(t,e){return this._pivot||(this._pivot=new egret.Point),this._pivot.setTo(t,void 0!=e?e:t),this.width&&this.height&&this.anchor(this.width*this._pivot.x,this.height*this._pivot.y),this},e.prototype.tween=function(t,e,i,n){var r=this;return void 0===n&&(n=!1),new Promise(function(o){n&&egret.Tween.removeTweens(r),egret.Tween.get(r).to(t,e,i).call(o)})},e}(egret.DisplayObjectContainer);t.Container=e,__reflect(e.prototype,"vitamin.Container",["vitamin.IPool"])}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){}return Object.defineProperty(e.prototype,"path",{get:function(){return this._path},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.uninitialize=function(){this.destory()},e.prototype.destory=function(){this.stopDelayDestory(),this.offDestory(),this.offAllComplete(),this._data=null,this._name="",this._path=""},e.prototype.onDestory=function(e,i){this.offDestory(),this._destoryHandler=t.Handler.create(e,i,null,!1)},e.prototype.offDestory=function(){this._destoryHandler&&(this._destoryHandler.recover(),this._destoryHandler=null)},e.prototype.startDelayDestory=function(){this.stopDelayDestory(),this._delayId=egret.setTimeout(this.destoyHandler,this,4e4)},e.prototype.stopDelayDestory=function(){this._delayId&&(egret.clearTimeout(this._delayId),this._delayId=0)},e.prototype.destoyHandler=function(){this._destoryHandler&&this._destoryHandler.runWith(this)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resType",{get:function(){return this._resType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return null!=this._data},enumerable:!0,configurable:!0}),e.prototype.holdReference=function(t,e){return this.holdReferenceHandler(t),this._data?void e.call(t,this._data):(e&&this.complete(t,e),void this.load())},e.prototype.offReference=function(t,e){this.offReferenceHandler(t),e&&this.offComplete(t,e)},e.prototype.holdReferenceHandler=function(t){this._references||(this._references=[]),this._references.indexOf(t)<0&&this._references.push(t),this.stopDelayDestory()},e.prototype.offReferenceHandler=function(t){if(this._references){var e=this._references.indexOf(t);e>=0&&this._references.splice(e,1),this._references.length||this.startDelayDestory()}},e.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.complete=function(e,i){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return this._completeHandlers||(this._completeHandlers=[]),this._completeHandlers.push(t.ResHandler.create(e,i,n,!0)),this},e.prototype.offComplete=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];if(this._completeHandlers){var r=this.getCompleteHandlerIndex(t,e);if(r>=0){var o=this._completeHandlers[r];o.recover(),this._completeHandlers.splice(r,1)}return this}},e.prototype.offAllComplete=function(){if(this._completeHandlers){for(var t=0,e=this._completeHandlers;t<e.length;t++){var i=e[t];i.recover()}return this._completeHandlers.length=0,this}},e.prototype.getCompleteHandlerIndex=function(t,e){var i=this._completeHandlers;if(i&&i.length)for(var n=0;n<i.length;n++){var r=i[n];if(r.caller==t&&r.method==e)return n}return-1},e.prototype.callComplete=function(){if(this._completeHandlers){for(var t=0,e=this._completeHandlers;t<e.length;t++){var i=e[t];i.runWith(this._data)}this._completeHandlers.length=0}},e}();t.ResData=e,__reflect(e.prototype,"vitamin.ResData",["vitamin.IPool"])}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(t,e,i,n){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=!1),this.once=!1,this._id=0,this.setTo(t,e,i,n)}return t.prototype.setTo=function(e,i,n,r){return this._id=t._gid++,this.caller=e,this.method=i,this.args=n,this.once=r,this},t.prototype.run=function(){if(null==this.method)return null;var t=this._id,e=this.method.apply(this.caller,this.args);return this._id===t&&this.once&&this.recover(),e},t.prototype.runWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(null==this.method)return null;var i,n=this._id;return i=t&&t.length?this.args&&this.args?this.method.apply(this.caller,this.args.concat(t)):this.method.apply(this.caller,t):this.method.apply(this.caller,this.args),this._id===n&&this.once&&this.recover(),i},t.prototype.clear=function(){return this.caller=null,this.method=null,this.args=null,this},t.prototype.recover=function(){this._id>0&&(this._id=0,t._pool.push(this.clear()))},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),t.create=function(e,i,n,r){return void 0===n&&(n=null),void 0===r&&(r=!0),t._pool.length?t._pool.pop().setTo(e,i,n,r):new t(e,i,n,r)},t._pool=[],t._gid=1,t}();t.Handler=e,__reflect(e.prototype,"vitamin.Handler")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.create(),e}return __extends(e,t),e.prototype.create=function(){},e}(t.Container);t.Transition=e,__reflect(e.prototype,"vitamin.Transition")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.create=function(){e.prototype.create.call(this),this._type=t.UIType.DIALOG,this._size={width:this.width,height:this.height}},i.prototype.tweenIn=function(t,e){var i=this;return new Promise(function(n){var r=i.scaleX,o=i.detail.offset.x?i.detail.offset.x:0,a=i.detail.offset.y?i.detail.offset.y:0,s=fairygui.GRoot.inst.width/2+o,u=fairygui.GRoot.inst.height/2+a,c=s-i.width/2+o,l=u-i.height/2+a,h=i.width*r,p=i.height*r;i.scaleX=i.scaleY=.5*r,i.x=s-h*i.scaleX/2+o,i.y=u-p*i.scaleY/2+a,egret.Tween.removeTweens(i),egret.Tween.get(i).to({scaleX:r,scaleY:r,x:c,y:l},e?e:200,t?t:egret.Ease.circOut).call(n,i)})},i.prototype.tweenOut=function(t,e){var i=this;return new Promise(function(n){var r=fairygui.GRoot.inst.width/2,o=fairygui.GRoot.inst.height/2,a=i.width,s=i.height;egret.Tween.removeTweens(i),egret.Tween.get(i).to({scaleX:.5,scaleY:.5,alpha:0,x:r-.5*a/2,y:o-.5*s/2},e?e:200,t?t:egret.Ease.cubicIn).call(function(){i.remove(),n()})})},i.prototype.open=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return[4,e.prototype.open.apply(this,[t].concat(i))];case 1:return n.sent(),this.btnClose&&this.btnClose.addClickListener(this.closeHandler,this),this.resizeNow(),[2]}})})},i.prototype.close=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return[4,e.prototype.close.call(this,t)];case 1:return i.sent(),this.btnClose&&this.btnClose.removeClickListener(this.closeHandler,this),[2]}})})},i.prototype.closeHandler=function(){t.ui.closeByItem(this)},i}(t.ViewItem);t.WindowItem=e,__reflect(e.prototype,"vitamin.WindowItem")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return t&&(i.source=t),i}return __extends(i,e),i.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},i.prototype.uninitialize=function(){this.scaleX=this.scaleY=1,this.alpha=1,this.rotation=0,this.texture=null,this._pivot=null,this.x=this.y=0,this.anchorOffsetX=0,this.anchorOffsetY=0,this.filters&&(this.filters=null)},Object.defineProperty(i.prototype,"source",{set:function(e){if(e instanceof egret.Texture)return void(this.texture=e);var i=RES.getRes(e);return i?void(this.texture=i):void t.res.loadRes(e,t.TypeRes.IMAGE).then(this.onload.bind(this))},enumerable:!0,configurable:!0}),i.prototype.waitload=function(){var e=this;return new Promise(function(i){return e.texture?void i(e.texture):void(e._onloadHandler=t.Handler.create(null,i))})},i.prototype.onload=function(t){this.texture=t,this._onloadHandler&&this._onloadHandler.runWith(this.texture)},Object.defineProperty(i.prototype,"texture",{get:function(){return egret.superGetter(i,this,"texture")},set:function(t){egret.superSetter(i,this,"texture",t),this.onTextureUpdate()},enumerable:!0,configurable:!0}),i.prototype.onTextureUpdate=function(){if(this.texture){if(this.anchorOffsetX||this.anchorOffsetY)return;this._pivot&&this.anchor(this.texture.textureWidth*this._pivot.x,this.texture.textureHeight*this._pivot.y)}},i.prototype.anchor=function(t,e){this.anchorOffsetX=t,this.anchorOffsetY=void 0!=e?e:t},i.prototype.pivot=function(t,e){this._pivot||(this._pivot=new egret.Point),this._pivot.setTo(t,void 0!=e?e:t),this.texture&&this.anchor(this.texture.textureWidth*this._pivot.x,this.texture.textureHeight*this._pivot.y)},i.prototype.pos=function(t,e){this.x=t,this.y=void 0!=e?e:t},i.prototype.onPosition=function(){},i.prototype.scale=function(t,e){this.scaleX=t,this.scaleY=void 0!=e?e:t},i.prototype.size=function(t,e){this.width=t,this.height=e},i.prototype.tween=function(t,e,i,n){var r=this;return void 0===n&&(n=!1),new Promise(function(o){n&&egret.Tween.removeTweens(r),egret.Tween.get(r).to(t,e,i).call(o)})},i.prototype.addTo=function(t,e){return void 0!=e?t.addChildAt(this,e):t.addChild(this),this},i.prototype.remove=function(){this.parent&&this.parent.removeChild(this)},Object.defineProperty(i.prototype,"x",{get:function(){return egret.superGetter(t.Container,this,"x")},set:function(e){egret.superSetter(t.Container,this,"x",e),egret.callLater(this.onPosition,this)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return egret.superGetter(t.Container,this,"y")},set:function(e){egret.superSetter(t.Container,this,"y",e),egret.callLater(this.onPosition,this)},enumerable:!0,configurable:!0}),i}(egret.Bitmap);t.Bitmap=e,__reflect(e.prototype,"vitamin.Bitmap",["vitamin.IPool"])}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){}return e.prototype.initialize=function(t,e){return this._target=t,this._options=e,this},e.prototype.uninitialize=function(){this._target=null,this.offComplete()},e.prototype.end=function(){this._complete&&this._complete.runWith(this)},e.prototype.onComplete=function(e,i){this.offComplete(),this._complete=t.Handler.create(e,i,null,!1)},e.prototype.offComplete=function(){this._complete&&(this._complete.recover(),this._complete=null)},Object.defineProperty(e.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),e}();t.TweenItem=e,__reflect(e.prototype,"vitamin.TweenItem",["vitamin.IPool"])}(vitamin||(vitamin={}));var vitamin;!function(t){function e(t){var e=typeof t;return"string"==e?!0:"number"==e?!0:"boolean"==e?!0:"undefined"==e?!0:!1}function i(n){if(!n)return n;if(e(n))return n;if(n instanceof t.ArrayCollection)return{type:"ArrayCollection",value:n.map(function(t){return i(t)})};if(Array.isArray(n))return{type:"array",value:n.map(function(t){return i(t)})};var r=egret.getQualifiedClassName(n).split(".").last();return{type:r,value:n.serialize?n.serialize():n}}function n(i,o){if(!i)return i;if(e(i))return i;switch(i.type){case"ArrayCollection":var a=new t.ArrayCollection;return a.replace(i.value.map(function(t){return n(t,o)})),a;case"array":case"Array":return i.value.map(function(t){return n(t,o)});case"object":case"Object":return i.value;default:var s=egret.getDefinitionByName(o?o+"."+i.type:i.type);if(i.value._uid){var u=i.value._uid;if(r[u])return r[u]}var c=t.ObjectPool.from(s);if(c.deserialize?c.deserialize(i.value,o):Object.assign(c,i.value),c._uid){var l=c._uid;r[l]=c}return c}}var r={},o=function(e){function r(){var i=e.call(this)||this;return i._uid=t.uid(16),i}return __extends(r,e),Object.defineProperty(r,"list",{get:function(){return this.prototype.__list||(this.prototype.__list=[]),this.prototype.__list},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),r.prototype.find=function(t){var e=Object.getPrototypeOf(this).__list;return e?e.find(function(e){return e._uid==t}):null},r.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},r.prototype.uninitialize=function(){this.clearProps()},r.prototype.serialize=function(){var t=this,e=this.getProperties();if(e){var n={};return e.forEach(function(e){n[e.property]=i(t[e.property])}),n}},r.prototype.deserialize=function(t,e){var i=this,r=this.getProperties();return r?(r.forEach(function(r){var o=t[r.property];void 0!=o&&(i[r.property]=n(o,e))}),this):void 0},r.prototype.getProperties=function(){var e=egret.getQualifiedClassName(this),i=t.__propserializes[e];return i?i:[]},r.prototype.read=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return[4,t.storage.get(egret.getQualifiedClassName(this).split(".").last())];case 1:return e=i.sent(),e&&this.deserialize(e),[2]}})})},r.prototype.save=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,t.storage.set(egret.getQualifiedClassName(this).split(".").last(),this.serialize())];case 1:return e.sent(),[2]}})})},r.prototype.dispatch=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];t.DataModelBase.dispatcher.event(e,i)},r.prototype.on=function(e,i,n){t.DataModelBase.dispatcher.on(e,i,n)},r.prototype.off=function(e,i,n){t.DataModelBase.dispatcher.off(e,i,n)},__decorate([t.serialize()],r.prototype,"_uid",void 0),r}(t.WatcherObject);t.DataBase=o,__reflect(o.prototype,"vitamin.DataBase",["vitamin.ISerialize","vitamin.IPool"]);var a;!function(t){t[t.TEXT=0]="TEXT",t[t.INT=1]="INT",t[t.FLOAT=2]="FLOAT",t[t.BOOL=3]="BOOL",t[t.POINT=4]="POINT",t[t.VEC2=5]="VEC2",t[t.COLLECT_TEXT=6]="COLLECT_TEXT",t[t.SELECTOR=7]="SELECTOR"}(a=t.TypeProp||(t.TypeProp={}))}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(t,e,i){return this.target=t,this.data=e,this.info=i,this}return t}();t.BinderBase=e,__reflect(e.prototype,"vitamin.BinderBase")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.start()},i.prototype.uninitialize=function(){this.stop(),this.offEnd()},i.prototype.start=function(){},i.prototype.stop=function(){},i.prototype.end=function(){this._endHandler&&this._endHandler.runWith(this)},i.prototype.onUpdate=function(){},i.prototype.onEnd=function(e,i){this.offEnd(),this._endHandler=t.Handler.create(e,i,null,!1)},i.prototype.offEnd=function(){this._endHandler&&(this._endHandler.recover(),this._endHandler=null)},i}(egret.Bitmap);t.Particel=e,__reflect(e.prototype,"vitamin.Particel",["vitamin.IParticel","egret.DisplayObject","vitamin.IPool"])}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){}return Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e.prototype.initializeDefaultParticels=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.ParticelesDefault=t,this},e.prototype.initializeParticels=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.Particeles=t,this},e.prototype.clearParticels=function(){this.Particeles=null},e.prototype.updateOptions=function(t){Object.assign(this._options,t)},e.prototype.initialize=function(t){return this._options=t,this},e.prototype.uninitialize=function(){this.stop(),this.offLaunch(),this.offEnd()},e.prototype.start=function(){this._enable=!0,this._count=0},e.prototype.stop=function(){this._enable=!1},e.prototype.end=function(){this.stop(),this._endHandler&&this._endHandler.run()},e.prototype.onEnd=function(e,i){this.offEnd(),this._endHandler=t.Handler.create(e,i,null,!1)},e.prototype.offEnd=function(){this._endHandler&&(this._endHandler.recover(),this._endHandler=null)},e.prototype.onLaunch=function(e,i){this.offLaunch(),this._launchHandler=t.Handler.create(e,i,null,!1)},e.prototype.offLaunch=function(){this._launchHandler&&(this._launchHandler.recover(),this._launchHandler=null)},e.prototype.launch=function(){this._enable&&this._launchHandler&&(this._launchHandler.runWith(this.Particeles?this.Particeles.random():this.ParticelesDefault.random(),this),this._count++)},Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),e}();t.ParticelLauncher=e,__reflect(e.prototype,"vitamin.ParticelLauncher",["vitamin.IPool"])}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.uninitialize=function(){this.scaleX=this.scaleY=1,this.alpha=1,this.rotation=0,this._pivot=null,this.x=this.y=0,this.anchorOffsetX=0,this.anchorOffsetY=0},e.prototype.addTo=function(t,e){return void 0!=e?t.addChildAt(this,e):t.addChild(this),this},e.prototype.remove=function(){this.parent&&this.parent.removeChild(this)},e.prototype.angle=function(t){return this.rotation=t,this},e.prototype.pos=function(t,e){return this.x=t,this.y=void 0!=e?e:t,this},e.prototype.scale=function(t,e){return this.scaleX=t,this.scaleY=void 0!=e?e:t,this},e.prototype.size=function(t,e){this.width=t,this.height=e},e.prototype.anchor=function(t,e){return this.anchorOffsetX=t,this.anchorOffsetY=void 0!=e?e:t,this},e.prototype.pivot=function(t,e){return this._pivot||(this._pivot=new egret.Point),this._pivot.setTo(t,void 0!=e?e:t),this.width&&this.height&&this.anchor(this.width*this._pivot.x,this.height*this._pivot.y),this},e.prototype.tween=function(t,e,i,n){var r=this;return void 0===n&&(n=!1),new Promise(function(o){n&&egret.Tween.removeTweens(r),egret.Tween.get(r).to(t,e,i).call(o)})},e}(egret.Sprite);t.Sprite=e,__reflect(e.prototype,"vitamin.Sprite",["vitamin.IPool"])}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){}return e.getObjectFromRoot=function(t){return this.getObjectByPath(window,t)},e.getObjectByPath=function(t,e){for(var i=Array.isArray(e)?e:e.split(".").filter(function(t){return!!t});i.length;){if(void 0==t)return void console.error("路径取值失败:"+egret.getQualifiedClassName(t)+"."+i.join("."));var n=i.shift();t=t[n]}return t},e.flat=function(t){for(var e=this.values(t),i=0;i<e.length;i++)if("object"==typeof e[i]){var n=this.flat(e[i]);e.splice(i,1),e.splice.apply(e,[i,0].concat(n)),i+=n.length-1}return e},e.values=function(t){for(var e=Object.keys(t),i=0;i<e.length;i++)e[i]=t[e[i]];return e},e.createHashCode=function(t){if(void 0==t.$hashCode){this.__hashCodeMap||(this.__hashCodeMap={});var e=egret.getQualifiedClassName(t);this.__hashCodeMap[e]||(this.__hashCodeMap[e]=1),this.__hashCodeMap[e]+=1;var i=this.__hashCodeMap[e];Object.defineProperty(t,"$hashCode",{value:e+"_"+i,enumerable:!1,configurable:!0,writable:!0})}},e.assign=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];for(var r in e)i.indexOf(r)>=0||(t[r]=e[r]);return t},e.guid=function(e){return e.$_GID||(e.$_GID=t.getGID())},e.getSetter=function(t,e){return Object.getPrototypeOf(t).__lookupSetter__(e)},e.getGetter=function(t,e){return Object.getPrototypeOf(t).__lookupGetter__(e)},e.hasSetter=function(t,e){return!!this.getSetter(t,e)},e.hasGetter=function(t,e){return!!this.getGetter(t,e)},e.hasGetterSetter=function(t,e){return this.hasSetter(t,e)&&this.hasGetter(t,e)},e.instance=function(t,e){return t.__instance__||(t.__instance__=e?e(t):new t)},e.regClassName=function(t,e){return egret.registerClass(t,e)},e.regClasses=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.forEach(function(t){return egret.registerClass(t,egret.getQualifiedClassName(t))})},e.checkSuperclass=function(t,e){if(!t||"object"!=typeof t&&!t.prototype)return!1;for(var i=egret.getQualifiedClassName(e),n=t.prototype?t.prototype:Object.getPrototypeOf(t),r=n;;){if(r=Object.getPrototypeOf(r),!r)break;var o=egret.getQualifiedClassName(r.constructor);if(!o||"Object"==o)break;if(o==i)return!0}return!1},e}();t.ObjectUtil=e,__reflect(e.prototype,"vitamin.ObjectUtil")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.on=function(t,e,i){this.addEventListener(t,i,e)},e.prototype.off=function(t,e,i){this.removeEventListener(t,i,e)},e.prototype.offAll=function(t){var e=this.$getEventMap();if(t)for(var i=e[t];i&&i.length;){var n=i.pop();this.removeEventListener(n.type,n.listener,n.caller,n.useCapture)}else for(var r in e)for(var i=e[r];i&&i.length;){var n=i.pop();this.removeEventListener(n.type,n.listener,n.caller,n.useCapture)}},e.prototype.hasListener=function(t){return this.hasEventListener(t)},e.prototype.event=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.dispatchEventWith(t,!1,e)},e.prototype.emit=function(t,i,n){void 0===n&&(n=!1);var r=this.$EventDispatcher,o=n?r[2]:r[1],a=o[t];if(!a)return!0;var s=a.length;if(0==s)return!0;var u=e.ONCE_EVENT_LIST;r[3]++;for(var c=0;s>c;c++){var l=a[c];l.listener.apply(l.thisObject,i),l.dispatchOnce&&u.push(l)
}for(r[3]--;u.length;){var l=u.pop();l.target.removeEventListener(l.type,l.listener,l.thisObject,l.useCapture)}},e.ONCE_EVENT_LIST=[],e}(egret.EventDispatcher);t.EventDispatcher=e,__reflect(e.prototype,"vitamin.EventDispatcher")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(){this.retryCount=1,this._progress=null}return t.createResGroup=function(t,e,i){for(var n=[],r=0;r<e.length;r++){var o=e[r],a=i[r],s=o.replace(/\/\//g,"_").replace(/\//g,"_").replace(/\./g,"");RES.$addResourceData({name:s,type:a,url:o}),n.push(s)}return RES.createGroup(t,n),t},t.hasResGroup=function(t){var e=RES.getGroupByName(t);return e&&e.length},t.getResGroupList=function(t){var e=RES.getGroupByName(t);return e},t.prototype.initialize=function(t){return this._name=t,this},t.prototype.uninitialize=function(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this._name=null,this._caller=null,this._complete=null,this._progress=null},t.prototype.start=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),this._caller=t,this._complete=e,this._progress=i,this._isLoading=!0,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup(this._name)},t.prototype.callComplete=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._complete&&(i=this._complete).call.apply(i,[this._caller].concat(t)),this.uninitialize();var i},t.prototype.onResourceLoadComplete=function(t){this._isLoading=!1,t.groupName==this._name&&this.callComplete(t.groupName)},t.prototype.onItemLoadError=function(t){this._isLoading=!1,egret.warn("Url:"+t.resItem.url+" has failed to load")},t.prototype.onResourceLoadError=function(t){return egret.warn("Group:"+t.groupName+" has failed to load"),this.retryCount>0?(this.retryCount--,void RES.loadGroup(this._name)):(this._isLoading=!1,void(t.groupName==this._name&&this.callComplete()))},t.prototype.onResourceProgress=function(t){t.groupName==this._name&&this._progress&&this._progress&&this._progress.call(this._caller,t.itemsLoaded/t.itemsTotal)},Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._isLoading},enumerable:!0,configurable:!0}),t}();t.GroupLoader=e,__reflect(e.prototype,"vitamin.GroupLoader")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(){}return t.prototype.initialize=function(t,e,i){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(o){switch(o.label){case 0:return n=this,[4,this.loadConfig("manifest"+(t?"_"+t:"")+".json")];case 1:return n._manifest=o.sent(),r=this,[4,this.loadConfig("resource"+(t?"_"+t:"")+".json")];case 2:return r._resource=o.sent(),e&&e.call(i),[2,Promise.resolve()]}})})},t.prototype.loadConfig=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(e,i){var n=new XMLHttpRequest;n.open("GET","./"+t,!0),n.addEventListener("load",function(){n.removeEventListener("load",arguments.callee,!1),e(JSON.parse(n.response.toString()))}),n.send(null)})]})})},Object.defineProperty(t.prototype,"manifest",{get:function(){return this._manifest},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resource",{get:function(){return this._resource},enumerable:!0,configurable:!0}),t}();t.ConfigResource=e,__reflect(e.prototype,"vitamin.ConfigResource"),t.resourceConfig=new e}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){}return e.prototype.set=function(e,i){return egret.localStorage.setItem(t.Config.appName+"_"+e,JSON.stringify(i)),Promise.resolve()},e.prototype.get=function(e){var i=egret.localStorage.getItem(t.Config.appName+"_"+e),n=i?JSON.parse(i):null;return Promise.resolve(n)},e}();t.LocalStorage=e,__reflect(e.prototype,"vitamin.LocalStorage",["vitamin.IStorage"])}(vitamin||(vitamin={}));var vitamin;!function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.Config.log&&egret.log.apply(egret,["[LOG]"].concat(e))}function i(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.Config.log&&s.apply(void 0,[{color:6736896},"[INFO]"].concat(e))}function n(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.Config.log&&egret.warn.apply(egret,["[WARN]"].concat(e))}function r(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.Config.log&&s.apply(void 0,[{color:26316},"[DEBUG]"].concat(e))}function o(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.Config.log&&egret.error.apply(egret,["[ERROR]"].concat(e))}function a(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.Config.log&&(console.log("%c"+e.join(","),"background: rgba(252,234,187,1);background: -moz-linear-gradient(left, rgba(252,234,187,1) 0%, rgba(175,250,77,1) 12%, rgba(0,247,49,1) 28%, rgba(0,210,247,1) 39%,rgba(0,189,247,1) 51%, rgba(133,108,217,1) 64%, rgba(177,0,247,1) 78%, rgba(247,0,189,1) 87%, rgba(245,22,52,1) 100%);background: -webkit-gradient(left top, right top, color-stop(0%, rgba(252,234,187,1)), color-stop(12%, rgba(175,250,77,1)), color-stop(28%, rgba(0,247,49,1)), color-stop(39%, rgba(0,210,247,1)), color-stop(51%, rgba(0,189,247,1)), color-stop(64%, rgba(133,108,217,1)), color-stop(78%, rgba(177,0,247,1)), color-stop(87%, rgba(247,0,189,1)), color-stop(100%, rgba(245,22,52,1)));background: -webkit-linear-gradient(left, rgba(252,234,187,1) 0%, rgba(175,250,77,1) 12%, rgba(0,247,49,1) 28%, rgba(0,210,247,1) 39%, rgba(0,189,247,1) 51%, rgba(133,108,217,1) 64%, rgba(177,0,247,1) 78%, rgba(247,0,189,1) 87%, rgba(245,22,52,1) 100%);background: -o-linear-gradient(left, rgba(252,234,187,1) 0%, rgba(175,250,77,1) 12%, rgba(0,247,49,1) 28%, rgba(0,210,247,1) 39%, rgba(0,189,247,1) 51%, rgba(133,108,217,1) 64%, rgba(177,0,247,1) 78%, rgba(247,0,189,1) 87%, rgba(245,22,52,1) 100%);background: -ms-linear-gradient(left, rgba(252,234,187,1) 0%, rgba(175,250,77,1) 12%, rgba(0,247,49,1) 28%, rgba(0,210,247,1) 39%, rgba(0,189,247,1) 51%, rgba(133,108,217,1) 64%, rgba(177,0,247,1) 78%, rgba(247,0,189,1) 87%, rgba(245,22,52,1) 100%);background: linear-gradient(to right, rgba(252,234,187,1) 0%, rgba(175,250,77,1) 12%, rgba(0,247,49,1) 28%, rgba(0,210,247,1) 39%, rgba(0,189,247,1) 51%, rgba(133,108,217,1) 64%, rgba(177,0,247,1) 78%, rgba(247,0,189,1) 87%, rgba(245,22,52,1) 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fceabb', endColorstr='#f51634', GradientType=1 );font-size:12px"),console.log("%c"+e.join(","),"background-image:-webkit-gradient( linear, left top, right top, color-stop(0, #f22), color-stop(0.15, #f2f), color-stop(0.3, #22f), color-stop(0.45, #2ff), color-stop(0.6, #2f2),color-stop(0.75, #2f2), color-stop(0.9, #ff2), color-stop(1, #f22) );color:transparent;-webkit-background-clip: text;font-size:12px;"))}function s(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];if(t.Config.log){var r="display:block;";void 0!=e.background&&(r+="background:#"+(0==e.background?"000000":e.background.toString(16))+";"),void 0!=e.color&&(r+="color:#"+e.color.toString(16)+";"),void 0!=e.size&&(r+="font-size:"+e.size+"px"),console.log("%c"+i.join(""),r)}}function u(e,i){t.Config.log&&(i&&c("["+(i?i:"")+"] 表数据: "),console.table&&console.table(e),i&&l())}function c(e){t.Config.log&&console.group((e?e:"group")+":")}function l(){t.Config.log&&console.groupEnd()}function h(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.Config.log&&console.log("%c"+e.join(","),"background:#FFFACD;border: 1px solid #EECFA1;border-radius:3px;color:#8B795E")}function p(e,i){void 0===i&&(i=!1),t.Config.log&&(i&&console.count("call ["+e+"] times"),console.trace&&console.trace("trace ["+e+"]  ━━┑"))}function f(e){t.Config.log&&console.time(e)}function d(e){t.Config.log&&console.timeEnd(e)}function _(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.Config.log&&console.assert(!1,e.join(","))}t.log=e,t.info=i,t.warn=n,t.debug=r,t.error=o,t.rainbow=a,t.custom=s,t.table=u,t.group=c,t.groupEnd=l,t.code=h,t.trace=p,t.timeStart=f,t.timeEnd=d,t.assert=_}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(){}return Object.defineProperty(t,"isMobile",{get:function(){return egret.Capabilities.isMobile},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isPC",{get:function(){return!egret.Capabilities.isMobile},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isWindowPC",{get:function(){return"Windows PC"==egret.Capabilities.os},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isIOS",{get:function(){return"iOS"==egret.Capabilities.os},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isAndroid",{get:function(){return"Android"==egret.Capabilities.os},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isWindowsPhone",{get:function(){return"Windows Phone"==egret.Capabilities.os},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isMacOs",{get:function(){return"Mac OS"==egret.Capabilities.os},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isUnknown",{get:function(){return"Unknown"==egret.Capabilities.os},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isMiniGame",{get:function(){return!!egret.wxgame||!!egret.ttgame},enumerable:!0,configurable:!0}),Object.defineProperty(t,"minigame",{get:function(){return window.wx?window.wx:window.tt?window.t:null},enumerable:!0,configurable:!0}),Object.defineProperty(t,"egretAdapterLib",{get:function(){return egret.wxgame?egret.wxgame:egret.ttgame?egret.ttgame:egret.web},enumerable:!0,configurable:!0}),t}();t.Sys=e,__reflect(e.prototype,"vitamin.Sys")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){this._onces=[]}return e.prototype.initialize=function(){this._frames=[],this._ticks=[],this.frameRate=egret.lifecycle.stage.frameRate,egret.startTick(this.onTick,this),this._timeStamp=egret.getTimer(),this._curFrame=0},Object.defineProperty(e.prototype,"frameRate",{get:function(){return this._frameRate},set:function(t){this._frameRate=t,this._frameInterval=1e3/this._frameRate>>0,egret.lifecycle.stage.frameRate=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frameInterval",{get:function(){return this._frameInterval},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeStamp",{get:function(){return this._timeStamp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curFrame",{get:function(){return this._curFrame},enumerable:!0,configurable:!0}),e.prototype.onTick=function(t){var e=t,i=this;i._timeStamp=e,i._curFrame++;for(var n=i._frames,r=i._ticks,o=0;o<r.length;o++){var a=r[o];-1!=i._ticks.indexOf(a)&&a.call(e)}for(var o=0;o<n.length;o++){var s=n[o];-1!=i._frames.indexOf(s)&&s.update(e)}var u=i._onces;if(u.length)for(;u.length;){var c=u.pop(),l=u.pop(),h=u.pop();l.call.apply(l,[h].concat(c))}return!0},e.prototype.add=function(e,i,n){void 0===n&&(n=!1);var r=this.getIndex(e,i,this._ticks);if(-1==r){this._ticks=this._ticks.concat();var o=this._ticks,a=t.ObjectPool.from(t.TickHandler,!0,e,i,this._frameRate);return n?o.unshift(a):o.push(a),a.gid}return this._ticks[r].gid},e.prototype.clear=function(t,e){return e||"number"!=typeof t?(this._ticks=this._ticks.concat(),this.remove(t,e,this._ticks)||(this._frames=this._frames.concat(),this.remove(t,e,this._frames)||this.onceClear(t,e))?!0:!1):(this._ticks=this._ticks.concat(),this.removeById(t,this._ticks)||(this._frames=this._frames.concat(),this.removeById(t,this._frames))?!0:!1)},e.prototype.remove=function(e,i,n){void 0==n&&(n=this._ticks);var r=this.getIndex(e,i,n);if(r>=0){var o=n[r];return n.splice(r,1),t.ObjectPool.to(o,!0),!0}return!1},e.prototype.removeFrame=function(t,e){return this.remove(t,e,this._frames)},e.prototype.removeById=function(e,i){var n=this.getIndexById(e,i);if(n>=0){var r=i[n];return i.splice(n,1),t.ObjectPool.to(r,!0),!0}return!1},e.prototype.has=function(t,e){var i=this.getIndex(t,e,this._ticks);return i>=0?!0:(i=this.getIndex(t,e,this._frames),i>=0?!0:!1)},e.prototype.getIndex=function(t,e,i){var n=0,r=i.length;for(n=0;r>n;n++){var o=i[n];if(o.caller==t&&o.method==e)return n}return-1},e.prototype.getIndexById=function(t,e){var i=0,n=e.length;for(i=0;n>i;i++){var r=e[i];if(r.gid==t)return i}return-1},e.prototype.frame=function(e,i,n,r){void 0===n&&(n=60),void 0===r&&(r=!1);var o=this.getIndex(e,i,this._frames);if(-1==o){this._frames=this._frames.concat();var a=this._frames,s=t.ObjectPool.from(t.TickHandler,!0,e,i,n);return r?a.unshift(s):a.push(s),s.gid}return this._frames[o].gid},e.prototype.once=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];this._onces||(this._onces=[]);for(var r=this._onces.length/3,o=0;r>o;o++){var a=this._onces[3*o],s=this._onces[3*o+1];if(t==a&&e==s)return}this._onces.push(t,e,i)},e.prototype.onceClear=function(t,e){if(this._onces)for(var i=this._onces.length/3,n=0;i>n;n++){var r=this._onces[3*n],o=this._onces[3*n+1];if(t==r&&e==o)return this._onces.splice(3*n,3),!0}return!1},e.prototype.callLater=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];this.once.apply(this,[t,e].concat(i))},e}();t.Ticker=e,__reflect(e.prototype,"vitamin.Ticker")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){this._handlers=[],this._elapsedTime=0}return e.prototype.initialize=function(t){this._ticker=t,this._lastTime=t.timeStamp,t.frame(this,this.update,30)},e.prototype.update=function(t){var e=this;if(!e._paused){e._elapsedTime+=t-e._lastTime,e._lastTime=t;for(var i=0,n=e._handlers;i<n.length;i++){var r=n[i];r.update(e._elapsedTime)}e._elapsedTime=0}},e.prototype.pause=function(){var t=this;t._paused||(t._elapsedTime=t._ticker.timeStamp-t._lastTime,t._paused=!0)},e.prototype.resume=function(){var e=this;e._paused&&(e._paused=!1,e._lastTime=t.ticker.timeStamp)},e.prototype.once=function(e,i,n,r){void 0===r&&(r=!0);for(var o=[],a=4;a<arguments.length;a++)o[a-4]=arguments[a];if(0>=e)return void n.apply(i,o);var s;if(r){var u=this.getIndex(i,n);if(u>=0)return s=this._handlers[u],s.args=o,void s.once(e).__complete(this,this.removeHandler,i,n,o)}return s=t.TimerHandler.fromPool.apply(t.TimerHandler,[i,n].concat(o)),s.once(e).__complete(this,this.removeHandler),this._handlers.push(s),s},e.prototype.removeHandler=function(e){var i=this._handlers.indexOf(e);t.TimerHandler.toPool(this._handlers.splice(i,1)[0])},e.prototype.loop=function(e,i,n,r){void 0===r&&(r=!0);for(var o=[],a=4;a<arguments.length;a++)o[a-4]=arguments[a];var s;if(r){var u=this.getIndex(i,n);if(u>=0)return s=this._handlers[u],void s.loop(e)}return s=t.TimerHandler.fromPool.apply(t.TimerHandler,[i,n].concat(o)),s.loop(e),this._handlers.push(s),s},e.prototype.times=function(e,i,n,r,o){void 0===o&&(o=!0);for(var a=[],s=5;s<arguments.length;s++)a[s-5]=arguments[s];var u;if(o){var c=this.getIndex(n,r);if(c>=0)return u=this._handlers[c],void u.loop(e)}return u=t.TimerHandler.fromPool.apply(t.TimerHandler,[n,r].concat(a)),u.loop(e,i),this._handlers.push(u),u.__complete(this,this.removeHandler),u},e.prototype.loops=function(e,i){var n=t.ObjectPool.from(t.IntervalLoop);return n.initialize(e,i),n},e.prototype.countdown=function(e,i,n,r,o){void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=!0);for(var a=[],s=5;s<arguments.length;s++)a[s-5]=arguments[s];var u;if(o){var c=this.getIndex(i,n);c>=0&&(u=this._handlers[c],u.loop(1e3,e))}return u||(u=t.TimerHandler.fromPool.apply(t.TimerHandler,[i,n].concat(a)),u.loop(1e3,e),this._handlers.push(u)),u.__complete(this,function(t,e){var i=t.caller;this.clear(t),e&&e.call(i)},r),u},e.prototype.clear=function(e,i){if(void 0===i&&(i=null),e instanceof t.TimerHandler)return this.clearHandler(e)?1:0;if(!i)return this.clearAll(e);for(var n=0;;){var r=this.getIndex(e,i);{if(!(r>=0))break;var o=this._handlers[r];t.TimerHandler.toPool(o),this._handlers.splice(r,1),n++}}return n},e.prototype.clearHandler=function(e){var i=this._handlers.indexOf(e);return i>=0?(this._handlers.splice(i,1),t.TimerHandler.toPool(e),!0):!1},e.prototype.clearAll=function(e){for(var i=0,n=0;n<this._handlers.length;n++)if(this._handlers[n].caller==e){var r=this._handlers[n];this._handlers.splice(n,1),t.TimerHandler.toPool(r),i++,n--}return i},e.prototype.getIndex=function(t,e){for(var i=this._handlers.length,n=0;i>n;n++){var r=this._handlers[n];if(r.caller==t&&r.method==e)return n}return-1},Object.defineProperty(e.prototype,"timeStamp",{get:function(){return this._ticker.timeStamp},enumerable:!0,configurable:!0}),e}();t.Timer=e,__reflect(e.prototype,"vitamin.Timer")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){}return e.prototype.initialize=function(e,i){if(this.options=e,this.index=0,i){var n=void 0;n=Array.isArray(i)?t.MathUtil.randRangeFloat(i[0],i[1]):i,t.ObjectUtil.instance(t.Timer).once(n,this,this.loop,!0)}else this.loop()},e.prototype.uninitialize=function(){t.ObjectUtil.instance(t.Timer).clear(this,this.loop),this.options=null},e.prototype.loop=function(){this.index>=this.options.length&&(this.index=0);var e,i=this.options[this.index];e=Array.isArray(i.delayto)?t.MathUtil.randRangeFloat(i.delayto[0],i.delayto[1]):i.delayto,i.method.call(i.caller),t.ObjectUtil.instance(t.Timer).once(e,this,this.loop,!0)},e.prototype.recorver=function(){t.ObjectPool.to(this,!0)},e}();t.IntervalLoop=e,__reflect(e.prototype,"vitamin.IntervalLoop",["vitamin.IPool"])}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){}return Object.defineProperty(e.prototype,"gid",{get:function(){return this._gid},enumerable:!0,configurable:!0}),e.prototype.initialize=function(e,i,n){this._gid=t.getGID(),this.caller=e,this.method=i,this.exec=i.bind(e),this.interval=1e3/n>>0,this.nextTime=egret.getTimer()+this.interval},e.prototype.uninitialize=function(){this.caller=null,this.method=null},e.prototype.update=function(t){var e=this;t>=e.nextTime&&(e.exec(t),e.nextTime=t+e.interval)},e.prototype.call=function(t){this.exec(t)},e}();t.TickHandler=e,__reflect(e.prototype,"vitamin.TickHandler",["vitamin.IPool"])}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(){this._totalElapsed=0,this._totalCost=0,this._uid=++t.___order___,this.__$complete={caller:null,method:null,args:null}}return t.toPool=function(e){e.reset(),t.__pool.push(e)},t.fromPool=function(e,i){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o;return o=t.__pool.length?t.__pool.pop():new t,n.unshift(e,i),o.initialize.apply(o,n)},Object.defineProperty(t.prototype,"uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),t.prototype.initialize=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var r=this;return r._caller=t,r._method=e,r._args=i,r._totalCost=0,r._totalElapsed=0,r._times=0,r},t.prototype.reset=function(){var t=this;t._caller=null,t._method=null,t._args=null,t.__$complete.caller=null,t.__$complete.method=null,t.__$complete.args=null,t._totalCost=0,t._totalElapsed=0,t._times=0},Object.defineProperty(t.prototype,"caller",{get:function(){return this._caller},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"method",{get:function(){return this._method},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"args",{get:function(){return this._args},set:function(t){this._args=t},enumerable:!0,configurable:!0}),t.prototype.update=function(t){var e=this;e._paused||(e._totalElapsed+=t,e._totalElapsed>=e._totalCost&&(e._times++,e._loop?e.loopOver():e.onceOver(),e._totalElapsed=0))},t.prototype.pause=function(){this._paused||(this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._paused=!1)},t.prototype.once=function(t){return this._loop=!1,this._totalCost=t,this},t.prototype.onceOver=function(){var t=this,e=t._method,i=t._caller,n=t._args,r=t.__$complete;r.method&&r.method.call(r.caller,t),e.apply(i,n)},t.prototype.loop=function(t,e){void 0===e&&(e=0);var i=this;return i._loop=!0,i._interval=t,i._totalCost=this._interval,i._totaltimes=e,i},t.prototype.loopOver=function(){var t=this;if(t._totaltimes&&t._times>=t._totaltimes){var e=t.__$complete;return e.args&&e.args.unshift(t),void(e.method&&e.method.apply(e.caller,e.args))}t._method&&t._method.apply(t._caller,t._args),t._totalCost=t._interval},t.prototype.__complete=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var r=this;r.__$complete.caller=t,r.__$complete.method=e,r.__$complete.args=i},t.___order___=0,t.__pool=[],t}();t.TimerHandler=e,__reflect(e.prototype,"vitamin.TimerHandler")}(vitamin||(vitamin={}));var vitamin;!function(t){var e;!function(t){t.UPDATE="update",t.ITEM_UPDATE="item_update",t.ADD="add",t.REMOVE="remove"}(e=t.CollectionEvent||(t.CollectionEvent={}));var i=function(){function i(){this.lazy=!0,this.enabled=!0,Object.defineProperty(this,"array",{value:[],enumerable:!1,configurable:!0,writable:!0}),Object.defineProperty(this,"dispatcher",{value:new t.EventDispatcher,enumerable:!1,configurable:!0,writable:!0}),Object.defineProperty(this,"lazy",{value:this.lazy,enumerable:!1,configurable:!0,writable:!0}),Object.defineProperty(this,"enabled",{value:this.enabled,enumerable:!1,configurable:!0,writable:!0})}return i.create=function(t,e,n){void 0===n&&(n=!0);var r=new i;if(r.lazy=n,"function"==typeof e){for(var o=0;t>o;o++)r.push(e(o));return r}for(var o=0;t>o;o++)r.push(e);return r},i.prototype.concat=function(){return this.array.concat()},i.prototype.random=function(){return this.array.random()},i.prototype.forEach=function(t,e){this.array.forEach(t,e)},i.prototype.map=function(t,e){return this.array.map(t,e)},i.prototype.find=function(t,e){return this.array.find(t,e)},i.prototype.findIndex=function(t,e){return this.array.findIndex(t,e)},i.prototype.indexOf=function(t,e){return this.array.indexOf(t,e)},i.prototype.remove=function(t){var e=this.indexOf(t);return e>=0?(this.splice(e,1),!0):!1},i.prototype.replace=function(t){this.callItemRemove(this.array),this.array.length=0,(e=this.array).push.apply(e,t),this.callItemAdd(t),this.callListChange();var e},i.prototype.clear=function(){var t=this.array.concat();return this.callItemRemove(this.array),this.array.length=0,this.callListChange(),t},i.prototype.splice=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];if(0!=e){var r=t+e;this.callItemRemoveByIndex(t,r)}var o=(a=this.array).splice.apply(a,[t,e].concat(i));return i.length&&this.callItemAdd(i),this.callListChange(),o;var a},i.prototype.shift=function(){var t=this.array.shift();return this.callItemRemoveByItem(t),this.callListChange(),t},i.prototype.pop=function(){var t=this.array.pop();return this.callItemRemoveByItem(t),this.callListChange(),t},i.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=(n=this.array).push.apply(n,t);return this.callItemAdd(t),this.callListChange(),i;var n},i.prototype.unshift=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=(n=this.array).unshift.apply(n,t);return this.callItemAdd(t),this.callListChange(),i;var n},i.prototype.sort=function(t){return this.array.sort(t),this.callListChange(),this},i.prototype.move=function(e,i){t.ArrayUtil.move(this.array,e,i)},i.prototype.swap=function(e,i){t.ArrayUtil.swap(this.array,e,i)},Object.defineProperty(i.prototype,"length",{get:function(){return this.array.length},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"first",{get:function(){return this.array.first},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"last",{get:function(){return this.array.last},enumerable:!0,configurable:!0}),i.prototype.set=function(e,i){var n=this.array[e];n!=i&&(this.callItemRemoveByItem(n),this.array[e]=i,this.callItemAddByItem(i),this.lazy?t.callLater(this,this.callItemChange,e):this.callItemChange(e))},i.prototype.get=function(t){return this.array[t]},i.prototype.getByProperty=function(t,e){for(var i=0;i<this.array.length;i++)if(this.array[i][t]==e)return this.array[i];return null},i.prototype.clearWatch=function(){this.offAll(e.UPDATE),this.offAll(e.ITEM_UPDATE),this.offAll(e.ADD),this.offAll(e.REMOVE)},i.prototype.watch=function(t,i,n){this.on(e.UPDATE,t,i),n&&this.__callListChange()},i.prototype.watchOnce=function(t,i,n){this.once(e.UPDATE,t,i),n&&this.__callListChange()},i.prototype.offWatch=function(t,i){this.off(e.UPDATE,t,i)},i.prototype.offAllWatch=function(){this.offAll(e.UPDATE)},i.prototype.watchAdd=function(t,i,n){this.on(e.ADD,t,i),n&&this.__callListChange()},i.prototype.watchAddOnce=function(t,i,n){this.once(e.ADD,t,i),n&&this.__callListChange()},i.prototype.offAddWatch=function(t,i){this.off(e.ADD,t,i)},i.prototype.offAllAddWatch=function(){this.offAll(e.ADD)},i.prototype.watchRemove=function(t,i,n){this.on(e.REMOVE,t,i),n&&this.__callListChange()},i.prototype.watchRemoveOnce=function(t,i,n){this.once(e.REMOVE,t,i),n&&this.__callListChange()},i.prototype.offRemoveWatch=function(t,i){this.off(e.REMOVE,t,i)},i.prototype.offAllRemoveWatch=function(){this.offAll(e.REMOVE)},i.prototype.watchItem=function(t,i){this.on(e.ITEM_UPDATE,t,i)},i.prototype.watchOnceItem=function(t,i){this.once(e.ITEM_UPDATE,t,i)},i.prototype.offWatchItem=function(t,i){this.off(e.ITEM_UPDATE,t,i)},i.prototype.offAllWatchItem=function(){this.offAll(e.ITEM_UPDATE)},i.prototype.watchItemProperty=function(t,i,n){this._itemWatchs||(this._itemWatchs=[]);var r=this.getWatchItemProperty(t,i,n);if(-1==r){var o={property:t,caller:i,listener:n};this._itemWatchs.push(o);for(var a=0;a<this.array.length;a++)this.__addPropertyListener(o,this[a]);this.on(e.ADD,this,this.__updateAddPropertyListener),this.on(e.REMOVE,this,this.__updateRemovePropertyListener)}},i.prototype.offWatchItemProperty=function(t,i,n){if(this._itemWatchs){var r=this.getWatchItemProperty(t,i,n);if(r>=0){for(var o=this._itemWatchs.splice(r,1)[0],a=0;a<this.array.length;a++)this.__removePropertyListener(o,this[a]);this._itemWatchs.length||(this.off(e.ADD,this,this.__updateAddPropertyListener),this.off(e.REMOVE,this,this.__updateRemovePropertyListener))}}},i.prototype.clearAllWatch=function(){this.offAll()},i.prototype.trigger=function(t){this.dispatcher.emit(t,[this,-1,null])},i.prototype.once=function(t,e,i){this.dispatcher.once(t,e,i)},i.prototype.on=function(t,e,i){this.dispatcher.on(t,e,i)},i.prototype.off=function(t,e,i){this.dispatcher.off(t,e,i)},i.prototype.offAll=function(t){this.dispatcher.offAll(t)},i.prototype.getWatchItemProperty=function(t,e,i){if(this._itemWatchs)for(var n=0;n<this._itemWatchs.length;n++){var r=this._itemWatchs[n];if(r.property==t&&r.caller==e&&r.listener==i)return n}return-1},i.prototype.__updateAddPropertyListener=function(){for(var t=0;t<this.array.length;t++)this.__addPropertiesListener(this[t])},i.prototype.__updateRemovePropertyListener=function(){for(var t=0;t<this.array.length;t++)this.__removePropertiesListener(this[t])},i.prototype.__addPropertiesListener=function(t){if(this._itemWatchs)for(var e=0;e<this._itemWatchs.length;e++){var i=this._itemWatchs[e];this.__addPropertyListener(i,t)}},i.prototype.__removePropertiesListener=function(t){if(this._itemWatchs)for(var e=0;e<this._itemWatchs.length;e++){var i=this._itemWatchs[e];this.__removePropertyListener(i,t)}},i.prototype.__addPropertyListener=function(e,i){t.Watcher.get(i,e.property).watch(e.caller,e.listener)},i.prototype.__removePropertyListener=function(e,i){t.Watcher.get(i,e.property).unwatch(e.caller,e.listener)},i.prototype.emit=function(t,e){this.enabled&&this.dispatcher.emit(t,e)},i.prototype.hasListener=function(t){return this.dispatcher.hasListener(t)},i.prototype.callListChange=function(){this.lazy?t.callLater(this,this.__callListChange):this.__callListChange()},i.prototype.__callListChange=function(){this.emit(e.UPDATE,[this,-1,null])},i.prototype.callItemChange=function(t){this.emit(e.ITEM_UPDATE,[this,t,this[t]])},i.prototype.callItemAdd=function(t){if(this.hasListener(e.ADD))for(var i=0;i<t.length;i++)this.emit(e.ADD,[t[i]])},i.prototype.callItemAddByItem=function(t){this.hasListener(e.ADD)&&this.emit(e.ADD,[t])},i.prototype.callItemRemove=function(t){if(this.hasListener(e.REMOVE))for(var i=0;i<t.length;i++)this.emit(e.REMOVE,[t[i]])},i.prototype.callItemRemoveByItem=function(t){this.hasListener(e.REMOVE)&&this.emit(e.REMOVE,[t])},i.prototype.callItemRemoveByIndex=function(t,i){if(this.hasListener(e.REMOVE))for(var n=t;i>n;n++)this.emit(e.REMOVE,[this.array[n]])},i}();t.ArrayCollection=i,__reflect(i.prototype,"vitamin.ArrayCollection")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(){this.__map={},this.__list=[]}return t.prototype.set=function(t,e){return this.__map[t]={value:e,index:this.__list.length},this.__list.push(e),e},t.prototype.has=function(t){return!!this.__map[t]},t.prototype.get=function(t){return this.__map[t]?this.__map[t].value:null},t.prototype.index=function(t){return this.__list[t]},t.prototype.remove=function(t){if(this.__map.hasOwnProperty(t)){var e=this.__map[t],i=e.index,n=e.value;return this.__map[t]=null,delete this.__map[t],this.__list.splice(i,1),n}return null},t.prototype.clear=function(){this.__map={},this.__list.length=0},t.prototype.forEach=function(t,e){var i=this.__list,n=i.length;e&&(t=t.bind(e));for(var r=0;n>r;r++)t(i[r],r)},t.prototype.find=function(t,e){var i=this.__list,n=i.length;e&&(t=t.bind(e));for(var r=0;n>r;r++)if(t(i[r],r))return i[r];return null},Object.defineProperty(t.prototype,"$list",{get:function(){return this.__list},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.__list.length},enumerable:!0,configurable:!0}),t}();t.Hashtable=e,__reflect(e.prototype,"vitamin.Hashtable")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._x=0,this._y=0,this._x=t,this._y=e}return e.from=function(i,n){return t.ObjectPool.from(e).set(i,n)},e.prototype.recorver=function(){t.ObjectPool.to(this,!0)},Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!0,configurable:!0}),e.prototype.initialize=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),this._x=t,this._y=e,this},e.prototype.uninitialize=function(){return this.set(0,0)},e.prototype.toString=function(){var t=Math.round(1e3*this._x)/1e3,e=Math.round(1e3*this._y)/1e3;return"["+t+", "+e+"]"},e.prototype.set=function(t,e){return this._x=t,this._y=e,this},e.prototype.copy=function(t){return this._x=t.x,this._y=t.y,this},e.prototype.clone=function(){return t.ObjectPool.from(e).set(this._x,this.y)},e.prototype.equals=function(t){return this._x==t._x&&this._y==t._y},e.prototype.negate=function(){return this._x=-this._x,this._y=-this._y,this},e.prototype.negateNew=function(t){return t=t?t:new e,t.set(-this._x,-this._y),t},e.prototype.scale=function(t,e){return this._x*=t,this._y*=void 0!=e?e:t,this},e.prototype.scaleNew=function(t,i,n){return n=n?n:new e,n.set(this._x*t,this._y*(void 0!=i?i:t)),n},e.prototype.setLength2=function(t){var e=this.length();e?this.scale(t/e):this._x=t},e.prototype.setLength=function(t){var e=this.radian();this._x=Math.cos(e)*t,this._y=Math.sin(e)*t},e.prototype.angle=function(){return e.atan2D(this._y,this._x)},e.prototype.radian=function(){return Math.atan2(this._y,this._x)},e.prototype.setAngle=function(t){var i=this.length();
this._x=i*e.cosD(t),this._y=i*e.sinD(t)},e.prototype.setRadian=function(t){var e=this.length();this._x=Math.cos(t)*e,this._y=Math.sin(t)*e},e.prototype.lengthSQ=function(){return this.dot(this)},e.prototype.length=function(){return Math.sqrt(this.lengthSQ())},e.prototype.distSQ=function(t){var e=t._x-this._x,i=t._y-this._y;return e*e+i*i},e.prototype.dist=function(t){return Math.sqrt(this.distSQ(t))},e.prototype.rotate=function(t){var i=e.cosD(t),n=e.sinD(t),r=this._x*i-this._y*n,o=this._x*n+this._y*i;this._x=r,this._y=o},e.prototype.rotateNew=function(t,i){return i=i?i:new e,i.set(this._x,this._y),i.rotate(t),i},e.prototype.dot=function(t){return this._x*t._x+this._y*t._y},e.prototype.crossProd=function(t){return this._x*t._y-this._y*t._x},e.prototype.isPerp=function(t){return 0==this.dot(t)},e.prototype.angleBetween=function(t){var i=this.dot(t),n=i/(this.length()*t.length());return e.acosD(n)},e.prototype.zero=function(){return this._x=0,this._y=0,this},e.prototype.isZero=function(){return 0==this._x&&0==this._y},e.prototype.truncate=function(t){return this.setLength(Math.min(t,this.length())),this},e.prototype.reverse=function(){return this._x=-this._x,this._y=-this._y,this},e.prototype.plus=function(t){return this._x+=t._x,this._y+=t._y,this},e.prototype.plusNew=function(t,i){return i=i?i:new e,i.set(this._x+t._x,this._y+t._y),i},e.prototype.subtract=function(t){return this._x-=t._x,this._y-=t._y,this},e.prototype.subtractNew=function(t,i){return i=i?i:new e,i.set(this._x-t._x,this._y-t._y),i},e.prototype.multiply=function(t){this._x*=t,this._y*=t},e.prototype.multiplyNew=function(t,i){return i=i?i:new e,i.set(this._x*t,this._y*t),i},e.prototype.divide=function(t){this._x/=t,this._y/=t},e.prototype.divideNew=function(t,i){return i=i?i:new e,i.set(this._x/t,this._y/t),i},e.prototype.normalize=function(){var t=this.length();return t>0&&(this._x=this.x/t,this._y=this.y/t),this},e.prototype.isNormalized=function(){return 1==this.length()},e.prototype.sign=function(t){return this.perp().dot(t)<0?-1:1},e.prototype.perp=function(){var t=this.x;return this._x=this.y,this._y=-t,this},e.prototype.perpNew=function(){return new e(this._y,-this._x)},e.prototype.perpInverse=function(){var t=this.x;return this._x=-this.y,this._y=t,this},e.prototype.perpInverseNew=function(){return new e(-this._y,this._x)},e.prototype.normal=function(){return this.perpInverse()},e.prototype.normalNew=function(){return this.perpInverseNew()},e.prototype.project=function(t){var e=this.dot(t)/t.lengthSQ();return this._x=e*t.x,this._y=e*t.y,this},e.prototype.projectN=function(t){var e=this.dot(t);return this._x=e*t.x,this._y=e*t.y,this},e.prototype.reflect=function(t){var e=this.x,i=this.y;return this.project(t).scale(2),this._x-=e,this._y-=i,this},e.prototype.reflectN=function(t){var e=this.x,i=this.y;return this.projectN(t).scale(2),this._x-=e,this._y-=i,this},e.angleBetween=function(t,e){return t.isNormalized()||(t=t.clone().normalize()),e.isNormalized()||(e=e.clone().normalize()),Math.acos(t.dot(e))},e.sinD=function(e){return Math.sin(t.MathUtil.toRadian(e))},e.cosD=function(e){return Math.cos(t.MathUtil.toRadian(e))},e.acosD=function(e){return t.MathUtil.toAngle(Math.acos(e))},e.atan2D=function(e,i){var n=t.MathUtil.toAngle(Math.atan2(-e,i));return n*=-1,this.validAngle(n)},e.validAngle=function(t){return t%=360,0>t?t+360:t},e.Temp1=new e,e.Temp2=new e,e}();t.Vector2D=e,__reflect(e.prototype,"vitamin.Vector2D",["vitamin.IPool"])}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(){}return Object.defineProperty(t,"egretVersion",{get:function(){return egret.Capabilities.engineVersion},enumerable:!0,configurable:!0}),Object.defineProperty(t,"sdk",{get:function(){return this.config.sdk},enumerable:!0,configurable:!0}),Object.defineProperty(t,"platform",{get:function(){return this.config.platform},enumerable:!0,configurable:!0}),Object.defineProperty(t,"socket",{get:function(){return this.config.socket},enumerable:!0,configurable:!0}),Object.defineProperty(t,"release",{get:function(){return this.config.release},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cmd",{get:function(){return this.config.cmd},enumerable:!0,configurable:!0}),Object.defineProperty(t,"logo",{get:function(){return this.config.logo},enumerable:!0,configurable:!0}),Object.defineProperty(t,"log",{get:function(){return void 0==this.config.log||1==this.config.log},enumerable:!0,configurable:!0}),Object.defineProperty(t,"lang",{get:function(){return this.config.lang},enumerable:!0,configurable:!0}),Object.defineProperty(t,"resroot",{get:function(){return this.config.resroot},enumerable:!0,configurable:!0}),Object.defineProperty(t,"version",{get:function(){return this.config.version},enumerable:!0,configurable:!0}),Object.defineProperty(t,"config",{get:function(){return window.config||(window.config={}),window.config},enumerable:!0,configurable:!0}),t}();t.Config=e,__reflect(e.prototype,"vitamin.Config")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i.watchXHandlers=[],i.watchYHandlers=[],i}return __extends(i,e),i.prototype.initializeTrianles=function(t){this.triangles=t;var e=[];t.forEach(function(t){return e.push.apply(e,t.vertices)}),this.initializeVertices(e)},i.prototype.initializeVertices=function(e){if(!this.texture)return void t.error("Mesh 未设置贴图...");this.vertices=e;for(var i=this.texture.textureWidth,n=this.texture.textureHeight,r=this.$renderNode,o=0,a=0,s=0;s<e.length;s++){var u=e[s];this.watchXHandlers[s]=this.onWatchVerticeChange.bind(this,o++),this.watchYHandlers[s]=this.onWatchVerticeChange.bind(this,o++),t.Watcher.get(u,"x").watch(this,this.watchXHandlers[s],{execOnce:!0}),t.Watcher.get(u,"y").watch(this,this.watchYHandlers[s],{execOnce:!0}),r.uvs[a++]=Math.max(0,Math.min(1,u.x/i)),r.uvs[a++]=Math.max(0,Math.min(1,u.y/n)),r.indices[s]=s}this.$updateVertices()},i.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},i.prototype.uninitialize=function(){if(this.vertices){for(var e=0;e<this.vertices.length;e++){var i=this.vertices[e];t.Watcher.get(i,"x").unwatch(this,this.watchXHandlers[e]),t.Watcher.get(i,"y").unwatch(this,this.watchYHandlers[e])}this.watchXHandlers.length=0,this.watchYHandlers.length=0}},i.prototype.onWatchVerticeChange=function(t,e){this.$renderNode.vertices[t]=e},i.prototype.setVertice=function(t,e,i){this.$renderNode.vertices[2*t]=e,this.$renderNode.vertices[2*t+1]=i},i.prototype.setVerticeX=function(t,e){this.$renderNode.vertices[2*t]=e},i.prototype.setVerticeY=function(t,e){this.$renderNode.vertices[2*t+1]=e},i.prototype.getVerticeX=function(t){return this.$renderNode.vertices[2*t]},i.prototype.getVerticeY=function(t){return this.$renderNode.vertices[2*t+1]},Object.defineProperty(i.prototype,"texture",{get:function(){return egret.superGetter(t.Bitmap,this,"texture")},set:function(e){egret.superSetter(t.Bitmap,this,"texture",e),this.onTextureUpdate()},enumerable:!0,configurable:!0}),i.prototype.onTextureUpdate=function(){this.texture&&this._pivot&&this.anchor(this.texture.textureWidth*this._pivot.x,this.texture.textureHeight*this._pivot.y)},i.prototype.anchor=function(t,e){this.anchorOffsetX=t,this.anchorOffsetY=void 0!=e?e:t},i.prototype.pivot=function(t,e){this._pivot||(this._pivot=new egret.Point),this._pivot.setTo(t,void 0!=e?e:t),this.texture&&this.anchor(this.texture.textureWidth*this._pivot.x,this.texture.textureHeight*this._pivot.y)},i.prototype.pos=function(t,e){this.x=t,this.y=void 0!=e?e:t},i.prototype.scale=function(t,e){this.scaleX=t,this.scaleY=void 0!=e?e:t},i.prototype.size=function(t,e){this.width=t,this.height=e},i}(egret.Mesh);t.Mesh=e,__reflect(e.prototype,"vitamin.Mesh",["vitamin.IPool"])}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(t,i,n){var r=e.call(this)||this;return r._renderTexture=n?n:new egret.RenderTexture,r._rect=new egret.Rectangle,void 0!=t&&void 0!=i&&(r._rectSet=new egret.Rectangle(0,0,t,i)),r.texture=r._renderTexture,r}return __extends(i,e),i.prototype.size=function(t,e){this._rectSet=new egret.Rectangle(0,0,t,e)},i.prototype.bind=function(e){this._bindTarget=e,this._bindTarget&&t.ticker.add(this,this.updateRender)},i.prototype.unbind=function(){t.ticker.clear(this,this.updateRender)},i.prototype.draw=function(e,i,n,r,o){return void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=1),r||(this._rectSet&&(r=this._rectSet),r=this._rect),this._renderTexture instanceof t.RenderTexture?void this._renderTexture.draw(e,i,n,r,o):void t.TextureUtil.draw(this._renderTexture,e,i,n,r,o)},i.prototype.updateRender=function(){this._rectSet?(this._rect.width=this._rectSet.width,this._rect.height=this._rectSet.height):(this._rect.width=this._bindTarget.width,this._rect.height=this._bindTarget.height),t.TextureUtil.draw(this._renderTexture,this._bindTarget,0,0,this._rect,1)},i}(t.Bitmap);t.RenderBitmap=e,__reflect(e.prototype,"vitamin.RenderBitmap")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(i,n){var r=e.call(this)||this;return r.quality=1,r.render=new egret.RenderTexture,r.container=new egret.DisplayObjectContainer,r.texture=r.render,n&&(r.renders=[new egret.RenderTexture,new egret.RenderTexture],r.shadow=new t.Bitmap,r.container.addChild(r.shadow),r.shadow.alpha=n&&n.threshold?n.threshold:.5,r.quality=n&&n.quality?n.quality:.3,r.shadow.scale(1/r.quality),r.renders.push(new egret.RenderTexture)),r.scale(1/r.quality),r.drawRect=i?i:new egret.Rectangle(0,0,t.stage.width,t.stage.height),r.container.addEventListener(egret.Event.ADDED,r.updateFrameRenderState,r),r.container.addEventListener(egret.Event.REMOVED,r.updateFrameRenderState,r),r}return __extends(i,e),i.prototype.addChild=function(t){return this.container.addChild(t)},i.prototype.addChildAt=function(t,e){return this.container.addChildAt(t,e)},i.prototype.removeChild=function(t){return this.container.removeChild(t)},i.prototype.removeChildAt=function(t){return this.container.removeChildAt(t)},i.prototype.removeChildren=function(){this.container.removeChildren()},i.prototype.swapChildrenAt=function(t,e){this.container.swapChildrenAt(t,e)},i.prototype.swapChildren=function(t,e){this.container.swapChildren(t,t)},i.prototype.updateFrameRenderState=function(){if(this.container.numChildren&&this.stage){if(this.frameState)return;this.frameState=!0,t.ticker.frame(this,this.updateRender)}else{if(!this.frameState)return;this.frameState=!1,t.ticker.remove(this,this.updateRender)}},i.prototype.updateRender=function(){if(!this.shadow)return this.render.drawToTexture(this.container,this.drawRect,this.quality),void(this.texture=this.render);var e=this.renders[t.ticker.curFrame%2],i=this.renders[1-t.ticker.curFrame%2];this.shadow.texture=i,e.drawToTexture(this.container,this.drawRect,this.quality),this.texture=e,this.quality>.3&&(this.shadow.texture=e,i.drawToTexture(this.container,this.drawRect,this.quality),this.texture=i)},i}(t.Bitmap);t.RenderContainer=e,__reflect(e.prototype,"vitamin.RenderContainer")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(i,n){var r=e.call(this)||this;return void 0!=i&&void 0!=n&&(r._rect=new egret.Rectangle(0,0,i,n)),r._temp=new egret.RenderTexture,r._temps=[new egret.RenderTexture,new egret.RenderTexture],r._back=new t.Bitmap,r._bitmap=new t.Bitmap,r._container=new t.Container,r._container.addChild(r._back),r._container.addChild(r._bitmap),r._times=0,r}return __extends(i,e),i.prototype.size=function(t,e){this._rect||(this._rect=new egret.Rectangle),this._rect.setTo(0,0,t,e)},i.prototype.draw=function(t,i,n,r,o,a){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=1),void 0===a&&(a=1),t instanceof egret.DisplayObject?(this._temp.drawToTexture(t),this.drawToContainerGround(this._temp,i,n,r?r:this._rect,o,a)):this.drawToContainerGround(t,i,n,r?r:this._rect,o,a),e.prototype.drawToTexture.call(this,this._container,r?r:this._rect)},i.prototype.drawToContainerGround=function(t,e,i,n,r,o){var a=this._temps[this._times%2],s=this._temps[(this._times+1)%2];this._bitmap.texture=t,this._bitmap.pos(e,i),this._back.texture=a,this._back.alpha=o,s.drawToTexture(this._container,n,r),this._times++},i}(egret.RenderTexture);t.RenderTexture=e,__reflect(e.prototype,"vitamin.RenderTexture")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.uninitialize=function(){this.scaleX=this.scaleY=1,this.alpha=1,this.rotation=0,this._pivot=null,this.x=this.y=0,this.anchorOffsetX=0,this.anchorOffsetY=0},e.prototype.addTo=function(t,e){return void 0!=e?t.addChildAt(this,e):t.addChild(this),this},e.prototype.remove=function(){this.parent&&this.parent.removeChild(this)},e.prototype.anchor=function(t,e){this.anchorOffsetX=t,this.anchorOffsetY=void 0!=e?e:t},e.prototype.pivot=function(t,e){this._pivot||(this._pivot=new egret.Point),this._pivot.setTo(t,void 0!=e?e:t),this.width&&this.height&&this.anchor(this.width*this._pivot.x,this.height*this._pivot.y)},e.prototype.pos=function(t,e){this.x=t,this.y=void 0!=e?e:t},e.prototype.scale=function(t,e){this.scaleX=t,this.scaleY=void 0!=e?e:t},e.prototype.size=function(t,e){this.width=t,this.height=e},e.prototype.tween=function(t,e,i,n){var r=this;return void 0===n&&(n=!1),new Promise(function(o){n&&egret.Tween.removeTweens(r),egret.Tween.get(r).to(t,e,i).call(o)})},e}(egret.Shape);t.Shape=e,__reflect(e.prototype,"vitamin.Shape",["vitamin.IPool"])}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.exec=function(){var e=this.info,i=t.BinderUtil.getRealWatcher(this.data,e.vmproperty),n=i[0],r=i[1],o=n[r];if(o instanceof t.ArrayCollection){if(e.listname){var a=this.target[e.listname];this.glist=a;var s=n[r];return a.itemRenderer=this.itemRendererHandler.bind(this,n[r]),s.watch(this,this.collectionUpdateHandler,!0),void s.watchItem(this,this.collectionItemUpdateHandler)}o.watch(this,this.arrayUpdateHandler,!0),o.watchItem(this,this.arrayItemUpdateHandler)}else{if(e.listname)return void console.error("需要绑定的vm属性不是ArrayCollection类型:"+egret.getQualifiedClassName(n)+"."+r);n.prop(r).watch(this,this.dataChangeHandler,{execOnce:!0})}},i.prototype.unexec=function(){var e=this.info,i=t.BinderUtil.getRealWatcher(this.data,e.vmproperty),n=i[0],r=i[1],o=n[r];if(o instanceof t.ArrayCollection){if(e.listname){var a=this.target[e.listname];this.glist=a;var s=n[r];return a.itemRenderer&&(a.itemRenderer=null),s.offWatch(this,this.collectionUpdateHandler),void s.offWatchItem(this,this.collectionItemUpdateHandler)}o.offWatch(this,this.arrayUpdateHandler),o.offWatchItem(this,this.arrayItemUpdateHandler)}else{if(e.listname)return void console.error("需要绑定的vm属性不是ArrayCollection类型:"+egret.getQualifiedClassName(n)+"."+r);n.prop(r).unwatch(this,this.dataChangeHandler)}},i.prototype.itemRendererHandler=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];(i=this.target[this.info.property]).call.apply(i,[this.target].concat(t));var i},i.prototype.collectionUpdateHandler=function(t,e,i){this.glist.numItems=0,this.glist.numItems=t.length},i.prototype.collectionItemUpdateHandler=function(t,e,i){if(-1!=e){var n=this.glist.itemIndexToChildIndex(e);if(n>-1&&n<=this.glist.numChildren-1){var r=this.glist.getChildAt(n);this.target[this.info.property].call(this.target,t,e,r,i)}}},i.prototype.arrayUpdateHandler=function(t,e,i){this.target[this.info.property].call(this.target,t,e,i)},i.prototype.arrayItemUpdateHandler=function(t,e,i){this.target[this.info.property].call(this.target,t,e,i)},i.prototype.dataChangeHandler=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];(i=this.target[this.info.property]).call.apply(i,[this.target].concat(t));var i},i}(t.BinderBase);t.MethodBinder=e,__reflect(e.prototype,"vitamin.MethodBinder")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i._independs={},i}return __extends(i,e),i.prototype.createIndependTexture=function(t,e,i,n,r,o,a,s,u){if(this._independs[t])return this._independs[t];var c=this.createTexture(t,e,i,n,r,o,a,s,u),l=new egret.Bitmap(c),h=new egret.RenderTexture;return h.drawToTexture(l,new egret.Rectangle(0,0,c.textureWidth,c.textureHeight)),this._independs[t]=h,h},i.prototype.getInependTexture=function(t){return this._independs[t]},i.prototype.parseToMap=function(t){var e={};for(var i in t){var n=t[i];e[i]=this.createTexture(i,n.x,n.y,n.w,n.h,n.offX,n.offY,n.sourceW,n.sourceH)}return e},i.prototype.parseToList=function(e){var i=this,n=[];for(var r in e)n.push(Object.assign({name:r},e[r]));t.ArrayUtil.sortByName(n);var o=n.map(function(t){return i.createTexture(t.name,t.x,t.y,t.w,t.h,t.offX,t.offY,t.sourceW,t.sourceH)});return o},i.prototype.createTextureUseFrame=function(e,i){return this.createTexture(i?i:t.uuid(),e.x,e.y,e.w,e.h,e.offX,e.offY,e.sourceW,e.sourceH)},i.prototype.dispose=function(){for(var t in this._independs)this._independs[t].dispose();this._independs=null;for(var e in this._textureMap)this._textureMap[e].dispose();this._textureMap=null,this.$texture&&this.$texture.dispose()},i}(egret.SpriteSheet);t.SpriteSheet=e,__reflect(e.prototype,"vitamin.SpriteSheet")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(){}return t.add=function(t,e){return this._items.find(function(e){return e.name==t})?void console.error("重复的名称:",t):void this._items.push({name:t,texture:e})},t.pack=function(t){void 0===t&&(t=0);for(var e=this._items.first(),n=!0,r=0,o=this._items;r<o.length;r++){var a=o[r];if(a.texture.textureWidth!=e.texture.textureWidth||a.texture.textureHeight!=e.texture.textureHeight){n=!1;break}}if(n){for(var s=Math.ceil(Math.sqrt(this._items.length)),u=this._items.first().texture.textureWidth,c=this._items.first().texture.textureHeight,l=u+t,h=c+t,p=new i,f=0;f<this._items.length;f++){var d=Math.floor(f/s),_=f%s,a=this._items[f];p.draw(a.texture,_*l,d*h)}p.exec();for(var g=new egret.SpriteSheet(p),f=0;f<this._items.length;f++){var d=Math.floor(f/s),_=f%s,a=this._items[f];g.createTexture(a.name,_*l,p.textureHeight-(d+1)*h,u,c)}return this._items.length=0,g}return null},t._items=[],t}();t.TextureMerger=e,__reflect(e.prototype,"vitamin.TextureMerger");var i=function(e){function i(){var i=e.call(this)||this;return i._container=new t.Container,i}return __extends(i,e),i.prototype.draw=function(e,i,n,r,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===o&&(o=1);var a=t.ObjectPool.from(t.Bitmap);a.texture=e,this._container.addChild(a),a.scale(r),a.alpha=o,a.pos(i,n),t.callLater(this,this.exec)},i.prototype.exec=function(){for(t.unCallLater(this,this.exec),e.prototype.drawToTexture.call(this,this._container,this._container.getBounds());this._container.numChildren;){var i=this._container.removeChildAt(0);i.uninitialize(),t.ObjectPool.to(i)}},i}(egret.RenderTexture);t.MergeTexture=i,__reflect(i.prototype,"vitamin.MergeTexture")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;return i._launchers=[],i._particels=[],t&&i.createLauncher(t),i.create(),i}return __extends(i,e),i.prototype.create=function(){},i.prototype.destory=function(){this.uninitialize(),this.clearLauncher()},i.prototype.createLauncher=function(e){for(var i=0,n=e.launchers;i<n.length;i++){var r=n[i],o=t.ObjectPool.from(r.type).initialize(r.option);r.particels&&r.particels.length?o.initializeDefaultParticels.apply(o,r.particels):o.initializeDefaultParticels(t.Particel),this._launchers.push(o)}},i.prototype.clearLauncher=function(){for(var e=0,i=this._launchers;e<i.length;e++){var n=i[e];n.uninitialize(),t.ObjectPool.to(n)}this._launchers.length=0},i.prototype.updateLauncherOptions=function(t,e){void 0===e&&(e=0),this._launchers[e].updateOptions(t)},i.prototype.setParticels=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,n=this._launchers;i<n.length;i++){var r=n[i];r.initializeParticels.apply(r,t)}},i.prototype.initialize=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.ticker.add(this,this.onUpdate),this},i.prototype.uninitialize=function(){this.blendMode=egret.BlendMode.NORMAL,t.ticker.clear(this,this.onUpdate),this._endHandler&&(this._endHandler.recover(),this._endHandler=null),this.stop();for(var e=0,i=this._launchers;e<i.length;e++){var n=i[e];n.clearParticels()}for(var r=0,o=this._particels;r<o.length;r++){var a=o[r];a.uninitialize(),t.ObjectPool.to(a)}this._particels.length=0},i.prototype.start=function(){if(this._launchers)for(var t=0,e=this._launchers;t<e.length;t++){var i=e[t];i.onLaunch(this,this.onLaunch),i.start()}return this},i.prototype.stop=function(){if(this._launchers)for(var t=0,e=this._launchers;t<e.length;t++){var i=e[t];i.offLaunch(),i.stop()}return this},i.prototype.onLaunch=function(e,i){var n=t.ObjectPool.from(e);this.addChild(n),this.onParticelCreate(n,i),n.onEnd(this,this.onRemove),this._particels.push(n)},i.prototype.onRemove=function(e){e.parent&&e.parent.removeChild(e),e.uninitialize(),t.ObjectPool.to(e);var i=this._particels.indexOf(e);i>=0&&this._particels.splice(i,1),this.checkEnd()&&this.end()},i.prototype.checkEnd=function(){if(this._launchers)for(var t=0,e=this._launchers;t<e.length;t++){var i=e[t];if(i.enabled)return!1}return this._particels.length?!1:!0},i.prototype.onUpdate=function(){for(var t=0;t<this._particels.length;t++)this._particels[t].onUpdate(),this.onParticelUpdate(this._particels[t],t)},i.prototype.onParticelCreate=function(t,e){},i.prototype.onParticelUpdate=function(t,e){},i.prototype.onEnd=function(e,i){this.offEnd(),this._endHandler=t.Handler.create(e,i,null,!1)},i.prototype.offEnd=function(){this._endHandler&&(this._endHandler.recover(),this._endHandler=null)},i.prototype.end=function(){this._endHandler&&this._endHandler.runWith(this)},i.prototype.blend=function(){this.blendMode=egret.BlendMode.ADD},i.prototype.recorver=function(){t.Config.release||t.log("Effect recorvered:",egret.getQualifiedClassName(this)),t.ObjectPool.to(this,!0)},i.prototype.autoRecorver=function(){var t=this;this.onEnd(this,function(){return t.recorver()})},i}(t.Sprite);t.Effect=e,__reflect(e.prototype,"vitamin.Effect")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){}return e.prototype.play=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var r=t.ObjectPool.from(e);return r.initialize.apply(r,i).addTo(t.layer.tip),r.start(),r.autoRecorver(),r},e.prototype.playByParticel=function(e,i){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=t.ObjectPool.from(e);return Array.isArray(i)?o.setParticels.apply(o,i):o.setParticels(i),o.initialize.apply(o,n).addTo(t.layer.tip),o.start(),o.autoRecorver(),o},e.prototype.playWithOptions=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var r=t.ObjectPool.from(t.Effect);return r.createLauncher(e),r.initialize.apply(r,i).addTo(t.layer.tip),r.start(),r.autoRecorver(),r},e}();t.EffectManager=e,__reflect(e.prototype,"vitamin.EffectManager")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.exec=function(){var e=this.info,i=this.target,n=t.BinderUtil.getRealWatcher(this.data,e.vmproperty),r=n[0],o=n[1],a=i[e.property];if(this._comp=a,!a)return void console.error("can't find component["+e.property+"] in "+egret.getQualifiedClassName(i)+".");if(Array.isArray(a)&&Array.isArray(r[o])){var s=r[o];return this.__compSourceSetMethod=t.BinderUtil.setCompSources.bind(this,a,s,e.setpath),this.__compSourceSetMethod(),void(s instanceof t.ArrayCollection&&(s.watch(this,this.__compSourceSetMethod,!1),s.watchItem(this,this.__compSourceSetMethod)))}if("object"==typeof o){if(o.maxtip){var u=o.maxtip;delete o.maxtip,a instanceof fgui.GProgressBar&&r.prop(u).watch(this,this.onProgressChange,{execOnce:!0})}return void Object.keys(o).forEach(function(t){r.prop(o[t]).bind(a,"."+t,Object.assign({execOnce:!0},e.options))})}if(!(a instanceof fgui.GList)){if(a instanceof fgui.Controller)return void r.prop(o).watch(a,a.setSelectedIndex,Object.assign({execOnce:!0},e.options));if(void 0==e.setpath){if(a instanceof fgui.GTextField||a instanceof fgui.GLabel)return e.options||(e.options={}),void r.prop(o).bind(a,".text",Object.assign({execOnce:!0},e.options,{propType:"string"}));if(a instanceof fgui.GButton||a instanceof fgui.GImage)return void r.prop(o).bind(a,".visible",Object.assign({execOnce:!0},e.options,{propType:"boolean"}));if(a instanceof fgui.GLoader)return void r.prop(o).bind(a,".url",Object.assign({execOnce:!0},e.options,{propType:"string"}));if(a.hasOwnProperty("data"))return void r.prop(o).bind(a,".data",Object.assign({execOnce:!0},e.options,{propType:"object"}))}return void 0==e.setpath?void console.error("auto bind property fail,You need to specify the bind property:"+egret.getQualifiedClassName(i)+" -> "+e.property):void r.prop(o).bind(i,e.property+"."+t.BinderUtil.getSetterPath(e.setpath),Object.assign({execOnce:!0},e.options))}var c=r[o];if(c instanceof t.ArrayCollection){if(this.__collection=c,e.options&&e.options.handler)return void c.watch(this,this.onListChangeValueHandler,!0);c.watch(this,this.onListChangeHandler,!0)}else Array.isArray(c)&&t.FguiUtil.refreshGlistOnce(a,c)},i.prototype.unexec=function(){var e=this.info,i=this.target,n=t.BinderUtil.getRealWatcher(this.data,e.vmproperty),r=n[0],o=n[1],a=i[e.property];if(this._comp=a,!a)return void console.error("can't find component["+e.property+"] in "+egret.getQualifiedClassName(i)+".");if(Array.isArray(a)&&Array.isArray(r[o])){var s=r[o];return void(s instanceof t.ArrayCollection&&(s.offWatch(this,this.__compSourceSetMethod),s.offWatchItem(this,this.__compSourceSetMethod)))}if("object"==typeof o){if(o.maxtip){var u=o.maxtip;delete o.maxtip,a instanceof fgui.GProgressBar&&r.prop(u).unwatch(this,this.onProgressChange)}return void Object.keys(o).forEach(function(t){r.prop(o[t]).unbind(a,"."+t)})}if(!(a instanceof fgui.GList)){if(a instanceof fgui.Controller)return void r.prop(o).unwatch(a,a.setSelectedIndex);if(void 0==e.setpath){if(a instanceof fgui.GTextField||a instanceof fgui.GLabel)return void r.prop(o).unbind(a,".text");if(a instanceof fgui.GButton||a instanceof fgui.GImage)return void r.prop(o).unbind(a,".visible");if(a instanceof fgui.GLoader)return void r.prop(o).unbind(a,".url");if(a.hasOwnProperty("data"))return void r.prop(o).unbind(a,".data")}return void 0==e.setpath?void console.error("auto bind property fail,You need to specify the bind property:"+egret.getQualifiedClassName(i)+" -> "+e.property):void r.prop(o).unbind(i,e.property+"."+t.BinderUtil.getSetterPath(e.setpath))}var c=r[o];if(c instanceof t.ArrayCollection){if(this.__collection=c,e.options&&e.options.handler)return void c.offWatch(this,this.onListChangeValueHandler);c.offWatch(this,this.onListChangeHandler)}},i.prototype.onProgressChange=function(t){t&&(this._comp.getChild("title").asLabel.text=t)},i.prototype.onListChangeValueHandler=function(){t.FguiUtil.refreshGlistOnce(this._comp.asList,this.__collection,this.info.options.valueHandler)},i.prototype.onListChangeHandler=function(){var e=t.BinderUtil.getSetterPath(this.info.setpath,"data");t.FguiUtil.refreshGlistOnce(this._comp.asList,this.__collection,e)},i}(t.BinderBase);t.FguiComponentBinder=e,__reflect(e.prototype,"vitamin.FguiComponentBinder")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.initialize=function(t){return void 0==t.duration&&(t.duration=0),void 0==t.oncecount&&(t.oncecount=0),void 0==t.maxcount&&(t.maxcount=0),e.prototype.initialize.call(this,t)},i.prototype.start=function(){t.timer.loop(this._options.interval,this,this.launch),this._options.duration&&t.timer.once(this._options.duration,this,this.end),this._count=0,e.prototype.start.call(this)},i.prototype.stop=function(){t.timer.clear(this,this.launch),t.timer.clear(this,this.end),e.prototype.stop.call(this)},i.prototype.launch=function(){var i=this._options.oncecount;if(Array.isArray(i))for(var n=t.MathUtil.randRange(i[0],i[1]),r=0;n>r;r++)e.prototype.launch.call(this);else{if(0==i)return void e.prototype.launch.call(this);for(var r=0;i>r;r++)e.prototype.launch.call(this)}this._options.maxcount>0&&this._count>=this._options.maxcount&&this.end()},i}(t.ParticelLauncher);t.IntervalLauncher=e,__reflect(e.prototype,"vitamin.IntervalLauncher")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.start=function(){for(t.prototype.start.call(this);this._options.count--;)this.launch();this.end()},e}(t.ParticelLauncher);t.OnceLauncher=e,__reflect(e.prototype,"vitamin.OnceLauncher")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.initialize=function(t){return void 0==t.duration&&(t.duration=0),void 0==t.oncecount&&(t.oncecount=0),void 0==t.maxcount&&(t.maxcount=0),e.prototype.initialize.call(this,t)},i.prototype.start=function(){t.ticker.add(this,this.launch),this._options.duration&&t.timer.once(this._options.duration,this,this.end),this._count=0,e.prototype.start.call(this)},i.prototype.stop=function(){t.ticker.clear(this,this.launch),t.timer.clear(this,this.end),e.prototype.stop.call(this)},i.prototype.launch=function(){if(0==this._options.oncecount)return void e.prototype.launch.call(this);for(var t=0;t<this._options.oncecount;t++)e.prototype.launch.call(this);this._options.maxcount>0&&this._count>=this._options.maxcount&&this.end()},i}(t.ParticelLauncher);t.TickerLauncher=e,__reflect(e.prototype,"vitamin.TickerLauncher")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.exec=function(){var e=this.info,i=t.BinderUtil.getRealWatcher(this.data,e.vmproperty),n=i[0],r=i[1],o="function"==typeof n[r];return o?void this.createGetMethod(e.property,n,r):void n.prop(r).bind(this.target,e.property,{execOnce:!0,lazy:e.options?e.options.lazy:void 0})},i.prototype.unexec=function(){var e=this.info,i=t.BinderUtil.getRealWatcher(this.data,e.vmproperty),n=i[0],r=i[1],o="function"==typeof n[r];o||n.prop(r).unbind(this.target,e.property)},i.prototype.createGetMethod=function(t,e,i){this.__createdGetMethod||(delete this.target[t],Object.defineProperty(this.target,t,{get:function(){return e[i]()}}),this.__createdGetMethod=!0)},i}(t.BinderBase);t.AttributeBinder=e,__reflect(e.prototype,"vitamin.AttributeBinder")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.initialize=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.play(t),e.prototype.initialize.call(this)},i.prototype.uninitialize=function(){t.ticker.clear(this,this.updateRender),e.prototype.uninitialize.call(this)},i.prototype.play=function(e,i){void 0===i&&(i=12),this.stop(),this.frames=e,this.frame=0,this.updateRender(),t.ticker.frame(this,this.updateRender,i)},i.prototype.stop=function(){t.ticker.clear(this,this.updateRender)},i.prototype.updateRender=function(){if(this.frame>=this.frames.length){if(!this.loop)return;this.frame=0}this.texture=this.frames[this.frame],this.frame++},i.prototype.end=function(){t.ticker.clear(this,this.updateRender),e.prototype.end.call(this)},i}(t.Particel);t.AnimationParticel=e,__reflect(e.prototype,"vitamin.AnimationParticel")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this
}return __extends(i,e),i.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.start()},i.prototype.uninitialize=function(){this.stop(),this.offEnd()},i.prototype.start=function(){},i.prototype.stop=function(){},i.prototype.end=function(){this._endHandler&&this._endHandler.runWith(this)},i.prototype.onUpdate=function(){},i.prototype.onEnd=function(e,i){this.offEnd(),this._endHandler=t.Handler.create(e,i,null,!1)},i.prototype.offEnd=function(){this._endHandler&&(this._endHandler.recover(),this._endHandler=null)},i}(egret.Shape);t.ShapeParticel=e,__reflect(e.prototype,"vitamin.ShapeParticel",["vitamin.IParticel","egret.DisplayObject","vitamin.IPool"])}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){}return e.refeshList=function(e){var i=e.parent.parent;if(i){var n=egret.getQualifiedClassName(i),r=t.__ui_map.views[n]?t.__ui_map.views[n].inject:null;if(r){var o=t.ObjectUtil.instance(r),a=i[t.BinderPropname.comp],s=a.find(function(t){return t.property==e.name});if(s){var u=t.BinderUtil.getRealWatcher(o,s.vmproperty),c=u[0],l=u[1],h=c[l];if(s.options&&s.options.handler)return void t.FguiUtil.refreshGlistOnce(e,h,s.options.handler);var p=t.BinderUtil.getSetterPath(s.setpath,"data");t.FguiUtil.refreshGlistOnce(e,h,p)}}}},e.refeshComp=function(e){var i=e.parent.parent;if(i){var n=egret.getQualifiedClassName(i),r=t.__ui_map.views[n]?t.__ui_map.views[n].inject:null;if(r){var o=t.ObjectUtil.instance(r),a=i[t.BinderPropname.comp],s=a.find(function(t){return t.property==e.name});if(s){var u=t.BinderUtil.getRealWatcher(o,s.vmproperty),c=u[0],l=u[1];e.data=c[l]}}}},e.triggerPropByComp=function(e){var i=e[t.BinderPropname.attribute],n=e[t.BinderPropname.comp],r=e[t.BinderPropname.method],o=egret.getQualifiedClassName(e),a=t.__ui_map.views[o]?t.__ui_map.views[o].inject:null;if(a){var s=t.ObjectUtil.instance(a);i&&i.forEach(function(t){return s.prop(t.vmproperty).exec()}),n&&n.forEach(function(t){return s.prop(t.vmproperty).exec()}),r&&r.forEach(function(t){return s.prop(t.vmproperty).exec()})}},e.enablePropByComp=function(e){var i=e[t.BinderPropname.attribute],n=e[t.BinderPropname.comp],r=e[t.BinderPropname.method],o=egret.getQualifiedClassName(e),a=t.__ui_map.views[o]?t.__ui_map.views[o].inject:null;if(a){var s=t.ObjectUtil.instance(a);i&&i.forEach(function(t){return s.prop(t.vmproperty).enable=!1}),n&&n.forEach(function(t){return s.prop(t.vmproperty).enable=!1}),r&&r.forEach(function(t){return s.prop(t.vmproperty).enable=!1})}},e.disablePropByComp=function(e){var i=e[t.BinderPropname.attribute],n=e[t.BinderPropname.comp],r=e[t.BinderPropname.method],o=egret.getQualifiedClassName(e),a=t.__ui_map.views[o]?t.__ui_map.views[o].inject:null;if(a){var s=t.ObjectUtil.instance(a);i&&i.forEach(function(t){return s.prop(t.vmproperty).enable=!0}),n&&n.forEach(function(t){return s.prop(t.vmproperty).enable=!0}),r&&r.forEach(function(t){return s.prop(t.vmproperty).enable=!0})}},e}();t.FguiBinderUtil=e,__reflect(e.prototype,"vitamin.FguiBinderUtil")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){}return e.mappingBundle=function(e){var i=egret.getQualifiedClassName(e);if(t.__ui_map.bundles[i]){var n=t.__ui_map.bundles[i],r=Object.keys(n);r.forEach(function(i){var r=n[i],o=r.propprefix,a=e;if(o.indexOf(".")>0){var s=r.propprefix.split(".");o=s.pop(),a=t.ObjectUtil.getObjectByPath(e,s)}e[i]=t.FguiUtil.bundleGComponents(a,o,r.orderend,r.orderstart)})}},e.getSetterPath=function(t,e){return t||(t=e),t&&"."==t.charAt(0)?t.substring(1):t},e.getRealWatcher=function(e,i){if("string"!=typeof i||-1==i.indexOf("."))return[e,i];var n=i.split("."),r=n.pop();return[t.ObjectUtil.getObjectByPath(e,n),r]},e.setCompSources=function(i,n,r){void 0===r&&(r=null);for(var o=e.getSetterPath(r),a=t.ObjectUtil.hasSetter(i[0],"data"),s=0;s<i.length;s++){var u=i[s];if(u instanceof fgui.GComponent){if(o){u[o]=n[s];continue}if(a){u.data=null,u.data=n[s];continue}u.data=n[s]}}},e}();t.BinderUtil=e,__reflect(e.prototype,"vitamin.BinderUtil")}(vitamin||(vitamin={}));var vitamin;!function(t){t.__BindMap="__bind_map__";var e;!function(t){t.comp="__comp__",t.attribute="__attri__",t.method="__method__"}(e=t.BinderPropname||(t.BinderPropname={}))}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.create=function(){e.prototype.create.call(this),this._original={title:this.labTitle?this.labTitle.text:"warn",okX:this.btnOk?this.btnOk.x:0,cancelX:this.btnCancel?this.btnCancel.x:0,centerX:this.width/2},this._type=t.UIType.ALERT},i.prototype.enter=function(t){t||(t={}),void 0==t.okshow&&(t.okshow=!0),void 0==t.cancelshow&&(t.cancelshow=!0),this.options=t,this.btnOk&&(this.btnOk.visible=!!t.okshow,this.btnOk.addClickListener(this.okHandler,this)),this.btnCancel&&(this.btnCancel.visible=!!t.cancelshow,this.btnCancel.addClickListener(this.cancelHandler,this)),this.labTitle&&(this.labTitle.text=t.title?t.title:this._original.title),this.btnOk&&this.btnCancel&&(this.btnOk.visible&&this.btnCancel.visible?(this.btnOk.x=this._original.okX,this.btnCancel.x=this._original.cancelX):this.btnOk.visible&&!this.btnCancel.visible?this.btnOk.x=this._original.centerX:this.btnCancel.visible&&!this.btnOk.visible&&(this.btnCancel.x=this._original.centerX))},i.prototype.exit=function(){this.btnOk&&this.btnOk.removeClickListener(this.okHandler,this),this.btnCancel&&this.btnCancel.removeClickListener(this.cancelHandler,this)},i.prototype.okHandler=function(){t.ui.closeByItem(this),this.options.ok&&(this.options.params?Array.isArray(this.options.params)?(e=this.options.ok).call.apply(e,[this.options.caller].concat(this.options.params)):this.options.ok.call(this.options.caller,this.options.params):this.options.ok.call(this.options.caller));var e},i.prototype.cancelHandler=function(){t.ui.closeByItem(this),this.options.cancel&&this.options.cancel.call(this.options.caller)},i}(t.WindowItem);t.AlertItem=e,__reflect(e.prototype,"vitamin.AlertItem")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.create=function(){if(e.prototype.create.call(this),this.openctx){this.openctxCanvas=this.createOpenCtxCanvas(this.openctx.width,this.openctx.height),this.openctxName=egret.getQualifiedClassName(this);var i=t.__ui_map.views[this.openctxName];i&&i.detail&&i.detail.resName&&(this.openctxName=i.detail.resName)}},i.prototype.added=function(){if(this.openctxCanvas&&"webgl"==egret.Capabilities.renderMode){var t=egret.wxgame.WebGLRenderContext.getInstance(),e=t.context;e.wxBindCanvasTexture||egret.startTick(this.delBitmapDataHandler,this)}},i.prototype.removed=function(){this.openctxCanvas&&egret.stopTick(this.delBitmapDataHandler,this)},i.prototype.enter=function(){if(this.openctxName){var t=this.openctxCanvas.localToGlobal();this.postMessage("OPEN",{uiName:this.openctxName,x:t?t.x:0,y:t?t.y:0})}},i.prototype.exit=function(){this.openctxName&&this.postMessage("CLOSE",{uiName:this.openctxName})},i.prototype.postMessage=function(t,e){e||(e={}),e.event=t,window.wx.getOpenDataContext().postMessage(e)},i.prototype.createOpenCtxCanvas=function(t,e){window.sharedCanvas.width=t,window.sharedCanvas.height=e;var i=new egret.BitmapData(window.sharedCanvas);i.$deleteSource=!1;var n=new egret.Texture;n._setBitmapData(i);var r=new egret.Bitmap(n);return r.width=t,r.height=e,r},i.prototype.delBitmapDataHandler=function(){return egret.WebGLUtils.deleteWebGLTexture(this.openctxCanvas.texture._bitmapData.webGLTexture),this.openctxCanvas.texture._bitmapData.webGLTexture=null,!1},i}(t.WindowItem);t.OpenCtxItem=e,__reflect(e.prototype,"vitamin.OpenCtxItem")}(vitamin||(vitamin={}));var vitamin;!function(t){function e(){return function(t,e){var i=t.constructor.name;n[i]||(n[i]=[]),n[i].push(e)}}var i=function(e){function i(){var t=e.call(this)||this;return t.onCreate(),t}return __extends(i,e),i.prototype.initialize=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return t.ticker.add(this,this.onUpdate),t.stage.onResize(this,this.onResize,!0),[2]})})},i.prototype.uninitialize=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.offEnd(),[4,this.subexit()];case 1:return e.sent(),t.ticker.clear(this,this.onUpdate),t.stage.offResize(this,this.onResize),[2]}})})},i.prototype.destory=function(){this.uninitialize(),this.onDestory()},i.prototype.start=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.onStart.apply(this,t)];case 1:return e.sent(),[2]}})})},i.prototype.stop=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this.onStop()];case 1:return t.sent(),[2]}})})},i.prototype.onStart=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},i.prototype.onStop=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},i.prototype.onDestory=function(){},i.prototype.onUpdate=function(){this._subgame&&this._subgame.onUpdate()},i.prototype.onResize=function(t,e){},i.prototype.subenter=function(e){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];return __awaiter(this,void 0,void 0,function(){var r,o,a,s=this;return __generator(this,function(u){switch(u.label){case 0:return[4,this.subexit()];case 1:return u.sent(),r=egret.getQualifiedClassName(this),r=r.split(".").pop(),o=n[r],this._subgame=t.ObjectPool.from(e),o&&o.forEach(function(t){return s._subgame[t]=s[t]}),[4,(a=this._subgame).initialize.apply(a,i)];case 2:return u.sent(),this._subgame.once(egret.Event.ENDED,this.__onSubEnd,this),this.onSubChange(this._subgame),[2,this._subgame]}})})},i.prototype.subexit=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return __awaiter(this,void 0,void 0,function(){var i,r,o,a=this;return __generator(this,function(s){switch(s.label){case 0:return this._subgame?(i=egret.getQualifiedClassName(this),i=i.split(".").pop(),this._subgame.offAll(),[4,(o=this._subgame).uninitialize.apply(o,e)]):[3,2];case 1:s.sent(),r=n[i],r&&r.forEach(function(t){return a._subgame[t]=null}),t.ObjectPool.to(this._subgame),this._subgame=null,s.label=2;case 2:return[2]}})})},i.prototype.__onSubEnd=function(t){this.onSubEnd(t.data)},i.prototype.onSubEnd=function(t){},i.prototype.onSubChange=function(t){},i.prototype.onEnd=function(e,i){this.offEnd(),this._endHandler=t.Handler.create(e,i,null,!0)},i.prototype.offEnd=function(){this._endHandler&&(this._endHandler.recover(),this._endHandler=null)},i.prototype.end=function(t){if(this.dispatchEventWith(egret.Event.ENDED,!1,this),this._endHandler){var e=this._endHandler;this._endHandler=null,e.runWith(t)}},Object.defineProperty(i.prototype,"subgame",{get:function(){return this._subgame},enumerable:!0,configurable:!0}),i}(t.EventDispatcher);t.GameBase=i,__reflect(i.prototype,"vitamin.GameBase",["vitamin.IPool"]);var n={};t.gameprop=e}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){this._changeHandlers=new t.Handlers}return e.prototype.enter=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(r){switch(r.label){case 0:return[4,this.exit()];case 1:return r.sent(),this._current=t.ObjectPool.from(e),[4,(n=this._current).initialize.apply(n,i)];case 2:return r.sent(),this._changeHandlers.run(),[2,this._current]}})})},e.prototype.exit=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this._current?[4,this._current.uninitialize()]:[3,2];case 1:e.sent(),t.ObjectPool.to(this._current),this._current=null,e.label=2;case 2:return[2]}})})},e.prototype.onChange=function(t,e){this._changeHandlers.add(t,e,null,!1)},e.prototype.offChange=function(t,e){this._changeHandlers.remove(t,e)},Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),e}();t.GameManager=e,__reflect(e.prototype,"vitamin.GameManager")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){this._muted=!1,this._mutedMusic=!1,this._mutedSound=!1,this._list=[],this._volume=1,this._volumeMusic=1,this._volumeSound=1,this._enabledMusic=!0,this._enabledSound=!0}return e.prototype.initialize=function(){void 0==Audio&&(window.alert("错误!当前环境不支持此程序!"),this._enabledMusic=!1,this._enabledSound=!1),fairygui.GButton.prototype.__click=function(e){this._sound?t.audio.playSound(this._sound,{volume:this._soundVolumeScale}):fairygui.UIConfig.buttonSound&&t.audio.playSound(fairygui.UIConfig.buttonSound,{volume:this._soundVolumeScale}),this._mode==fgui.ButtonMode.Check?this._changeStateOnClick&&(this.selected=!this._selected,this.dispatchEvent(new fgui.StateChangeEvent(fgui.StateChangeEvent.CHANGED))):this._mode==fgui.ButtonMode.Radio?this._changeStateOnClick&&!this._selected&&(this.selected=!0,this.dispatchEvent(new fgui.StateChangeEvent(fgui.StateChangeEvent.CHANGED))):this._relatedController&&(this._relatedController.selectedPageId=this._relatedPageId)}},e.prototype.setFairyGuiButtonSound=function(t){fairygui.UIConfig.buttonSound=t},e.prototype.load=function(e,i,n,r){return void 0===n&&(n=egret.Sound.EFFECT),__awaiter(this,void 0,void 0,function(){var o,a,s,u,c,l,h,p,f,c;return __generator(this,function(d){switch(d.label){case 0:return"string"!=typeof e?[3,2]:(r&&r(0,1),o=this.createSound(t.Path.resolve(i,e),n),[4,o.load()]);case 1:return d.sent(),r&&r(1,1),[2];case 2:if(!Array.isArray(e))return[3,7];a=0,r&&r(a,e.length),s=0,u=e,d.label=3;case 3:return s<u.length?(c=u[s],o=this.createSound(t.Path.resolve(i,c),n),[4,o.load()]):[3,6];case 4:d.sent(),r&&r(++a,e.length),d.label=5;case 5:return s++,[3,3];case 6:return[2];case 7:l=t.ObjectUtil.flat(e),h=0,r&&r(h,l.length),p=0,f=l,d.label=8;case 8:return p<f.length?(c=f[p],o=this.createSound(t.Path.resolve(i,c),n),[4,o.load()]):[3,11];case 9:d.sent(),r&&r(++h,l.length),d.label=10;case 10:return p++,[3,8];case 11:return[2]}})})},e.prototype.getSoundByName=function(t){for(var e=0,i=this._list;e<i.length;e++){var n=i[e];if(n.name==t)return n}return null},e.prototype.getSoundByUrl=function(t){for(var e=0,i=this._list;e<i.length;e++){var n=i[e];if(n.url==t)return n}return null},e.prototype.createSound=function(e,i){var n;return(n=this.getSoundByUrl(e))?n:(n=t.ObjectPool.from(t.Sound),n.initialize(e,i),this.getSoundByName(n.name)&&console.log("声音名称重复:",e),this._list.push(n),n)},e.prototype.destorySound=function(e){var i=this.getSoundByUrl(e);i&&(i.uninitialize(),t.ObjectPool.to(i),this._list.splice(this._list.indexOf(i),1))},Object.defineProperty(e.prototype,"enabledMusic",{get:function(){return this._enabledMusic},set:function(t){this._enabledMusic!=t&&(this._enabledMusic=t,this._enabledMusic?this.resumeMusic():this.pauseMusic())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabledSound",{get:function(){return this._enabledSound},set:function(t){this._enabledSound!=t&&(this._enabledSound=t,this._enabledSound||this.stopAllSound())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabledMusic&&this._enabledSound},set:function(t){this.enabledMusic=t,this.enabledSound=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume!=t&&(this._volume=t,this.volumeMusic=this._volume,this.volumeSound=this._volume)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volumeMusic",{get:function(){return this._volumeMusic},set:function(t){this._volumeMusic!=t&&(this._volumeMusic=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volumeSound",{get:function(){return this._volumeSound},set:function(t){this._volumeSound!=t&&(this._volumeSound=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted!=t&&(this._muted=t,this.mutedSound=this._muted,this.mutedMusic=this._muted)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mutedMusic",{get:function(){return this._mutedMusic},set:function(t){this._mutedMusic!=t&&(this._mutedMusic=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mutedSound",{get:function(){return this._mutedSound},set:function(t){this._mutedSound!=t&&(this._mutedSound=t)},enumerable:!0,configurable:!0}),e.prototype.__fadeOut=function(t){var e=this;return new Promise(function(i){egret.Tween.removeTweens(t),egret.Tween.get(t).to({volume:0},800).call(i,e)})},e.prototype.__fadeIn=function(t,e){var i=this;return void 0===e&&(e=1),new Promise(function(n){t.volume=0,egret.Tween.removeTweens(t),egret.Tween.get(t).to({volume:e},800).call(n,i)})},e.prototype.playMusic=function(t,e){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){switch(n.label){case 0:return i=this.getSoundByName(t),i?[4,this.__playMusic(i,Object.assign({loop:!0},e))]:[2];case 1:return[2,n.sent()]}})})},e.prototype.playMusicByUrl=function(t,e){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){switch(n.label){case 0:return i=this.getSoundByUrl(t),i?[4,this.__playMusic(i,Object.assign({loop:!0},e))]:[2];case 1:return[2,n.sent()]}})})},e.prototype.__playMusic=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return this._currentMusic==t?[2]:(e||(e={}),this._currentMusic?[4,this.stopMusic(e.fadeOut)]:[3,2]);case 1:i.sent(),i.label=2;case 2:return this._currentMusic=t,this._currentMusic.play(e),this._enabledMusic?e.fadeIn?[4,this.__fadeIn(this._currentMusic,void 0!=e.volume?e.volume:this._volume)]:[3,4]:(this._currentMusic.stop(),[2]);case 3:i.sent(),i.label=4;case 4:return[2]}})})},e.prototype.stopMusic=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return this._currentMusic?(e=this._currentMusic,t||this._currentMusic.stop(),this._currentMusic=null,[4,this.__fadeOut(e)]):[3,2];case 1:i.sent(),e.stop(),i.label=2;case 2:return[2]}})})},e.prototype.pauseMusic=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this._currentMusic?t?[4,this.__fadeOut(this._currentMusic)]:(this._currentMusic.pause(),[2]):[3,2];case 1:e.sent(),this._currentMusic.pause(),e.label=2;case 2:return[2]}})})},e.prototype.resumeMusic=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this._currentMusic?(this._currentMusic.resume(),t?[4,this.__fadeIn(this._currentMusic)]:[3,2]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.isMusicPlaying=function(){return!!this._currentMusic&&!this._currentMusic.isStopped},e.prototype.isMusicUrl=function(){return this._currentMusic?this._currentMusic.url:null},e.prototype.isMusicPause=function(){return!!this._currentMusic&&this._currentMusic.isStopped},e.prototype.playSound=function(t,e){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){switch(n.label){case 0:return i=this.getSoundByName(t),i?[4,this.__playSound(i,e)]:[2];case 1:return[2,n.sent()]}})})},e.prototype.playSoundByUrl=function(t,i){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(r){switch(r.label){case 0:return n=this.getSoundByUrl(t),!n||egret.getTimer()-n.lastPlayTime<e.MIN_PLAY_INTERVAL?[2]:[4,this.__playSound(n,i)];case 1:return[2,r.sent()]}})})},e.prototype.__playSound=function(t,e){return this._enabledSound?(e||(e={}),e.ifPrevStop&&!t.isStopped?Promise.resolve():(e.stopPrev&&this.stopAllSound(),t.play(e),e.fadeIn?this.__fadeIn(t,void 0!=e.volume?e.volume:this._volume):Promise.resolve())):void 0},e.prototype.stopSound=function(t){var e=this.getSoundByName(t);e&&e.stop()},e.prototype.playSoundQueue=function(t,e){return __awaiter(this,void 0,void 0,function(){var i,n,r;return __generator(this,function(o){switch(o.label){case 0:e||(e={}),e.stopPrev&&this.stopAllSound(),i=0,n=t,o.label=1;case 1:return i<n.length?(r=n[i],[4,this.playSound(r,{fadeOut:e.fadeOut})]):[3,4];case 2:o.sent(),o.label=3;case 3:return i++,[3,1];case 4:return e.complete&&e.complete.run(),[2]}})})},e.prototype.stopAllSound=function(){this._list.forEach(function(t){t.type==egret.Sound.EFFECT&&t.stop()})},e.prototype.stopAll=function(){this.stopMusic(),this.stopAllSound()},e.MIN_PLAY_INTERVAL=1e3,e}();t.AudioManager=e,__reflect(e.prototype,"vitamin.AudioManager")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){this._lastTime=egret.getTimer()}return e.prototype.initialize=function(e){this._displaylist=[],this._factory=e?e:dragonBones.EgretFactory.factory,this._factory.clock.timeScale=.5,egret.ticker.$startTick(this.rendder,this),this._res=new t.DragonRes,this._res.initialize(this._factory)},Object.defineProperty(e.prototype,"factory",{get:function(){return this._factory},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._res.clear(),this._factory.clear(!1)},e.prototype.clearEvents=function(){},e.prototype.getRes=function(t){return this._res.getRes(t)},e.prototype.createAnimation=function(t,e){return void 0===e&&(e="Armature"),this._factory.buildArmatureDisplay(e,t)},e.prototype.addArmature=function(t){this._displaylist&&(this._displaylist.indexOf(t)>=0||(this._displaylist.push(t),this._factory.clock.add(t.armature),this.updateRenderState()))},e.prototype.removeAnimation=function(t){if(this._displaylist){var e=this._displaylist.indexOf(t);e>=0&&(this._factory.clock.remove(t.armature),this._displaylist.splice(e,1)),this.updateRenderState()}},e.prototype.replaceDisplay=function(t,e,i){this._factory.replaceDisplay(t,e,i)},e.prototype.updateRenderState=function(){var t=0;for(var e in this._displaylist)this._displaylist[e]&&t++;t?this.start():this.stop()},e.prototype.start=function(){this._isrender||(this._isrender=!0)},e.prototype.stop=function(){this._isrender&&(this._isrender=!1,this._factory.clock.clear())},e.prototype.rendder=function(t){var e=t-this._lastTime;return this._lastTime=t,this._factory.clock.advanceTime(e/1e3),!0},Object.defineProperty(e.prototype,"timescale",{get:function(){return 2*this._factory.clock.timeScale},set:function(t){this._factory.clock.timeScale=t/2},enumerable:!0,configurable:!0}),e}();t.DragonbonesManager=e,__reflect(e.prototype,"vitamin.DragonbonesManager")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){var i=e.call(this)||this;i.touchable=!0,i._screenTransitions={};var n=egret.getQualifiedClassName(t.BlackTransition);return i._screenTransitions[n]=new t.BlackTransition,i}return __extends(i,e),i.prototype.initialize=function(t){return this._stage=t,fgui.GRoot.inst.addChild(this),this._layers=[],this._bg=this.createLayer(),this._low=this.createLayer(!0),this._scene=this.createLayer(!0),this._mainui=this.createLayer(!0),this._topui=this.createLayer(!0),this._control=this.createLayer(!0),this._dialog=this.createLayer(!0),this._alert=this.createLayer(!0),this._tip=this.createLayer(),this._top=this.createLayer(),this},i.prototype.initializeTransition=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=egret.getQualifiedClassName(t),r=new t;return r.initialize.apply(r,e),this._screenTransitions[n]=r,this._screenTransition=r,r},i.prototype.initializeBlackTransition=function(e){var i=egret.getQualifiedClassName(t.BlackTransition),n=this._screenTransitions[i];return n.initialize(e),n},i.prototype.blackEaseIn=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];if(e){var r=egret.getQualifiedClassName(e),o=this._screenTransitions[r];if(!o)return void console.error("Transition 没有初始化:",r);this._screenTransition=o}return this._screenTransition?(this._top.displayListContainer.addChild(this._screenTransition),(a=this._screenTransition).easeIn.apply(a,[t].concat(i))):void console.error("没有有效的Transition");var a},i.prototype.blackEaseOut=function(t){for(var e=this,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];return new Promise(function(n){(r=e._screenTransition).easeOut.apply(r,[t].concat(i)).then(function(){e._screenTransition.remove(),n(null)});var r})},i.prototype.createLayer=function(t){void 0===t&&(t=!1);var e=this.addLayer(new fairygui.GComponent);return e.touchable=t,e},i.prototype.addLayer=function(t){return this.addChild(t),this._layers.push(t),t},i.prototype.raiseLevel=function(t,e){return e?void this.addChildAt(t,this.getChildIndex(e)):void this.addChild(t)},Object.defineProperty(i.prototype,"bgComp",{get:function(){return this._bg},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lowComp",{get:function(){return this._low},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"sceneComp",{get:function(){return this._scene},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mainuiComp",{get:function(){return this._mainui},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"topuiComp",{get:function(){return this._topui},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"controlComp",{get:function(){return this._control},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dialogComp",{get:function(){return this._dialog},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"alertComp",{get:function(){return this._alert},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tipComp",{get:function(){return this._tip},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"topComp",{get:function(){return this._top},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bg",{get:function(){return this._bg.displayListContainer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"low",{get:function(){return this._low.displayListContainer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scene",{get:function(){return this._scene.displayListContainer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mainui",{get:function(){return this._mainui.displayListContainer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"topui",{get:function(){return this._topui.displayListContainer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"control",{get:function(){return this._control.displayListContainer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dialog",{get:function(){return this._dialog.displayListContainer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"alert",{get:function(){return this._alert.displayListContainer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tip",{get:function(){return this._tip.displayListContainer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"top",{get:function(){return this._top.displayListContainer},enumerable:!0,configurable:!0}),i}(fairygui.GComponent);t.LayerManager=e,__reflect(e.prototype,"vitamin.LayerManager")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.initialize=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadResConfig(t)];case 1:return i.sent(),e?[4,this.loadEuiConfig(e)]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}})})},e.prototype.loadPreRes=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadGroupSync("preload",t,e)];case 1:return i.sent(),[2]}})})},e.prototype.loadResConfig=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(e,i){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,function(){e()},this),RES.loadConfig(t,"resources/")})]})})},e.prototype.loadEuiConfig=function(e,i,n){return void 0===i&&(i=null),void 0===n&&(n=null),__awaiter(this,void 0,void 0,function(){var r,o,a;return __generator(this,function(s){return egret.registerImplementation("eui.IAssetAdapter",new t.AssetAdapter),egret.registerImplementation("eui.IThemeAdapter",new window.eui.IThemeAdapter),r=0,o=setInterval(function(){r+=2,n&&n.call(i,r/100),100==r&&clearInterval(o)},1e3/30),a=this,[2,new Promise(function(t,i){var n=new eui.Theme("resources/"+e,egret.lifecycle.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){clearInterval(o),t()},a)})]})})},e.prototype.loadTemplates=function(t,e){return void 0===e&&(e=null),__awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,new Promise(function(t,e){})]})})},e.prototype.loadGroup=function(e,i,n,r){void 0===i&&(i=null),void 0===n&&(n=null),void 0===r&&(r=null),(new t.GroupLoader).initialize(e).start(i,n,r)},e.prototype.loadGroupSync=function(e,i,n){return void 0===i&&(i=null),void 0===n&&(n=null),__awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return[2,new Promise(function(r,o){(new t.GroupLoader).initialize(e).start(i,r,n)})]})})},e.prototype.getRes=function(t){return RES.getRes(t)},e.prototype.loadRes=function(t,e){var i=this;return new Promise(function(n){RES.getResByUrl(t,function(t){n(t)},i,e)})},e}();t.ResManager=e,__reflect(e.prototype,"vitamin.ResManager");var i;!function(t){t.XML="xml",t.IMAGE="image",t.BIN="bin",t.TEXT="text",t.JSON="json",t.SHEET="sheet",t.FONT="font",t.SOUND="sound",t.TTF="ttf"}(i=t.TypeRes||(t.TypeRes={}))}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){this._isActive=!0}return e.prototype.initialize=function(e){this._stage=e,e.addEventListener(egret.Event.RESIZE,this.resizeHandler,this),this._isActive=!0,e.addEventListener(egret.Event.ACTIVATE,this.activateHandler,this),e.addEventListener(egret.Event.DEACTIVATE,this.activateHandler,this),egret.lifecycle.onPause=function(){egret.ticker.pause(),t.timer.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume(),t.timer.resume()}},Object.defineProperty(e.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._stage.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._stage.stageHeight},enumerable:!0,configurable:!0}),e.prototype.resizeHandler=function(t){this._resizeHandlers&&this._resizeHandlers.runWith(this.width,this.height)},e.prototype.addChild=function(t){return this.stage.addChild(t)},e.prototype.addChildAt=function(t,e){return this.stage.addChildAt(t,e)},e.prototype.removeChild=function(t){return this.stage.removeChild(t)},e.prototype.on=function(t,e,i,n,r){this.stage.addEventListener(t,e,i,n,r)},e.prototype.once=function(t,e,i,n,r){this.stage.once(t,e,i,n,r)},e.prototype.off=function(t,e,i,n){this.stage.removeEventListener(t,e,i,n)},e.prototype.onTapOut=function(e,i,n){void 0===n&&(n=null),this._tapOutHandlerts||(this._tapOutHandlerts=new t.Handlers(!1)),this._tapOutHandlerts.add(e,i,n?[n]:null,!1),this._stage.hasEventListener(egret.TouchEvent.TOUCH_END)||this._stage.addEventListener(egret.TouchEvent.TOUCH_END,this.stageTapHandler,this)
},e.prototype.offTapOut=function(t,e){void 0===e&&(e=null),this._tapOutHandlerts&&(e?this._tapOutHandlerts.remove(t,e):this._tapOutHandlerts.removeAll(t),this._tapOutHandlerts.length||this._stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.stageTapHandler,this))},e.prototype.stageTapHandler=function(t){for(var e=this._tapOutHandlerts.length,i=[],n=0;e>n;n++){var r=this._tapOutHandlerts.getHandlerAt(n);if(r.args&&r.args.length){var o=r.args[0];o.contains(t.stageX,t.stageY)||i.push(r)}else r.caller.hitTestPoint(t.stageX,t.stageY)||i.push(r)}for(var a=0,s=i;a<s.length;a++){var r=s[a];r.run()}i.length=0},e.prototype.activateHandler=function(t){var e=t.type==egret.Event.ACTIVATE;this._isActive=e,this._isActive?this._activeHandlers&&this._activeHandlers.run():this._deactiveHandlers&&this._deactiveHandlers.run()},e.prototype.onActivate=function(e,i,n){void 0===n&&(n=!1),this._activeHandlers||(this._activeHandlers=new t.Handlers(!1));var r=this._activeHandlers.add(e,i,null,!1);n&&r.run()},e.prototype.offActivate=function(t,e){this._activeHandlers&&this._activeHandlers.remove(t,e)},e.prototype.onDeactivate=function(e,i,n){void 0===n&&(n=!1),this._deactiveHandlers||(this._deactiveHandlers=new t.Handlers(!1));var r=this._deactiveHandlers.add(e,i,null,!1);n&&r.run()},e.prototype.offDeactivate=function(t,e){this._deactiveHandlers&&this._deactiveHandlers.remove(t,e)},e.prototype.onResize=function(e,i,n){void 0===n&&(n=!1),this._resizeHandlers||(this._resizeHandlers=new t.Handlers(!1));var r=this._resizeHandlers.add(e,i,null,!1);n&&r.runWith(this.width,this.height)},e.prototype.offResize=function(t,e){this._resizeHandlers&&this._resizeHandlers.remove(t,e)},e.prototype.offResizeAll=function(t){this._resizeHandlers&&this._resizeHandlers.removeAll(t)},e.prototype.resize=function(t,e){e.call(t,this.width,this.height)},e}();t.StageManager=e,__reflect(e.prototype,"vitamin.StageManager")}(vitamin||(vitamin={}));var vitamin;!function(t){var e;!function(t){t[t.FIX=0]="FIX",t[t.TOP=1]="TOP",t[t.DIALOG=2]="DIALOG",t[t.ALERT=3]="ALERT"}(e=t.UIType||(t.UIType={})),t.__ui_map={views:{},bundles:{},cmds:{}};var i=function(i){function n(){var e=i.call(this)||this;e.tapOutsideClose=!0,e._lib={},e._openList=[];for(var n=0,r=t.__ui.classes.comps;n<r.length;n++){var o=r[n],a=o.detail&&o.detail.resName?o.detail.resName:egret.getQualifiedClassName(o.clazz);t.__ui_map.views[a]=o,t.FguiUtil.registerRuntimeClass(o.clazz,o.packname,a)}for(var s=0,u=t.__ui.classes.views;s<u.length;s++){var c=u[s],a=c.detail&&c.detail.resName?c.detail.resName:egret.getQualifiedClassName(c.clazz);t.__ui_map.views[a]=c,t.FguiUtil.registerRuntimeClass(c.clazz,c.packname,c.detail?c.detail.resName:null)}for(var l=0,h=t.__ui.classes.alerts;l<h.length;l++){var p=h[l],a=p.detail&&p.detail.resName?p.detail.resName:egret.getQualifiedClassName(p.clazz);t.__ui_map.views[a]=p,t.FguiUtil.registerRuntimeClass(p.clazz,p.packname,p.detail?p.detail.resName:null)}for(var f=0,d=t.__ui.bundles;f<d.length;f++){var _=d[f],g=_.clazz.__class__?_.clazz.__class__:egret.getQualifiedClassName(_.clazz);t.__ui_map.bundles[g]||(t.__ui_map.bundles[g]={}),t.__ui_map.bundles[g][_.property]=_}for(var m=0,v=t.__ui.binds.comps;m<v.length;m++){var y=v[m];y.clazz[t.BinderPropname.comp]||Object.defineProperty(y.clazz,t.BinderPropname.comp,{enumerable:!1,writable:!1,configurable:!1,value:[]}),y.clazz[t.BinderPropname.comp].push(y)}for(var b=0,T=t.__ui.binds.attris;b<T.length;b++){var C=T[b];C.clazz[t.BinderPropname.attribute]||Object.defineProperty(C.clazz,t.BinderPropname.attribute,{enumerable:!1,writable:!1,configurable:!1,value:[]}),C.clazz[t.BinderPropname.attribute].push(C)}for(var O=0,x=t.__ui.binds.methods;O<x.length;O++){var w=x[O];w.clazz[t.BinderPropname.method]||Object.defineProperty(w.clazz,t.BinderPropname.method,{enumerable:!1,writable:!1,configurable:!1,value:[]}),w.clazz[t.BinderPropname.method].push(w)}for(var P=0,E=t.__ui.binds.cmds;P<E.length;P++){var R=E[P],g=(R.clazz.__class__?R.clazz.__class__:egret.getQualifiedClassName(R.clazz))+(R.sign?R.sign:"");t.__ui_map.cmds[g]||(t.__ui_map.cmds[g]={}),t.__ui_map.cmds[g][R.commandName]=R.method}return e}return __extends(n,i),n.prototype.initialize=function(t,e){void 0===e&&(e="game"),this._stage=t,fairygui.UIPackage.addPackage(e),this._stage.addEventListener(egret.Event.RESIZE,this.resizeHandler,this);var i=this._back=new fairygui.GGraph;return i.setSize(100,100),i.drawRect(0,0,0,0,.6),this},n.prototype.initializeMessageBox=function(e,i,n){var r=this;return void 0===n&&(n="normal"),"normal"==n?(this._msgbox=new t.MessageBox,t.layer.tip.addChild(this._msgbox),this._msgbox.initialize(i?i:t.SimpleMessage,e),void t.stage.onResize(this,function(t,e){r._msgbox.x=t/2,r._msgbox.y=e-200},!0)):i?(this._msgbox=new t.FguiMessageBox,t.layer.tipComp.addChild(this._msgbox),this._msgbox.initialize(i,e),void t.stage.onResize(this,function(t,e){r._msgbox.x=t/2,r._msgbox.y=e-200},!0)):void console.error("当初始化MessageBox的type为fgui时,messageItemClazz不能为空!")},n.prototype.tip=function(t,e){void 0===e&&(e=16777215),this._msgbox.add(t,e,!0),console.log(t)},n.prototype.alert=function(t,e){this.open(t,e)},n.prototype.registerRuntimes=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];t.FguiUtil.registerRuntimes.apply(t.FguiUtil,[e].concat(i))},n.prototype.createRunTime=function(e){return t.FguiUtil.createRunTime(e)},n.prototype.register=function(e,i,n){var r=egret.getQualifiedClassName(e);t.FguiUtil.registerRuntimeClass(e,i),t.__ui_map.views[r]={clazz:e,detail:n,packname:i}},n.prototype.getView=function(e){var i=egret.getQualifiedClassName(e);if(this._lib[i])return this._lib[i];var n=t.FguiUtil.createRunTime(e),r=t.__ui_map.views[i];return n.__initialize(r.detail),this._lib[i]=n,this._lib[i]},n.prototype.open=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];return __awaiter(this,void 0,void 0,function(){var n,r,o;return __generator(this,function(a){switch(a.label){case 0:return(n=this.getView(e))?-1!=this._openList.indexOf(n)?[2]:(this._openList.push(n),this.updateBlack(),n.alpha=1,n.scaleX=n.scaleY=1,r=n.detail.offset.x,o=n.detail.offset.y,n.x=r,n.y=o,[4,n.open.apply(n,[this.getLayer(n)].concat(i))]):[3,2];case 1:return a.sent(),n.onResize(this._stage.stageWidth,this._stage.stageHeight),this._popSound&&t.audio.playSound(this._popSound),this.callChange(e),[2,n];case 2:return[2,null]}})})},n.prototype.closeByItem=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.close(egret.getQualifiedClassName(t))];case 1:return e.sent(),[2]}})})},n.prototype.close=function(t,e){return void 0===e&&(e=!1),__awaiter(this,void 0,void 0,function(){var i,n,r;return __generator(this,function(o){switch(o.label){case 0:return i="string"==typeof t?t:egret.getQualifiedClassName(t),(n=this._lib[i])?(r=this._openList.indexOf(n),r>=0?(this._openList.splice(r,1),this.updateBlack(),[4,n.close(e)]):[3,2]):[3,2];case 1:o.sent(),n.remove(),this.callClose(i),o.label=2;case 2:return this.callChange(t),[2]}})})},n.prototype.closeNow=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.close(t,!0)];case 1:return e.sent(),[2]}})})},n.prototype.updateBlack=function(){if(!this._openList.length)return void this._back.removeFromParent();var t=this._openList.last(),i=!0;if(t.type==e.FIX)return void this._back.removeFromParent();if(t.detail&&void 0!=t.detail.black&&(i=t.detail.black),i){var r=this.getLayer(t),o=this._back;t.parent?t.parent.addChildAt(o,t.parent.getChildIndex(t)):r.addChild(o),o.width=this._stage.stageWidth,o.height=this._stage.stageHeight,o.touchable=!0,n.BLACK_TOUCH_CLOSE&&t.detail.tapOutSideClose?o.addClickListener(this.blackTapHandler,this):o.removeClickListener(this.blackTapHandler,this)}},n.prototype.closeAll=function(t){for(var e=0;e<this._openList.length;e++)(this._openList[e].type==t||void 0==t)&&(this.closeByItem(this._openList[e]),e--)},n.prototype.hasView=function(t){for(var e=0,i=this._openList;e<i.length;e++){var n=i[e];if(n.type==t)return!0}return!1},n.prototype.onChange=function(t,e,i){void 0===i&&(i=!1),this._changeHandlers||(this._changeHandlers=[]),this._changeHandlers.push({caller:t,method:e,once:i})},n.prototype.offChange=function(t,e){if(this._changeHandlers)for(var i=this._changeHandlers,n=0;n<i.length;n++)i[n].caller==t&&i[n].method==e&&(i.splice(n,1),n--)},n.prototype.callChange=function(t){if(this._changeHandlers){for(var e=this._changeHandlers,i=e.concat(),n=0;n<e.length;n++)e[n].once&&(e.splice(n,1),n--);i.forEach(function(e){e.method.call(e.caller,t)})}},n.prototype.onClose=function(t,e,i,n){void 0===n&&(n=!0),this._closeHandlers||(this._closeHandlers={});var r=egret.getQualifiedClassName(t);this._closeHandlers[r]||(this._closeHandlers[r]=[]),this._closeHandlers[r].push({caller:e,method:i,once:n})},n.prototype.offClose=function(t,e,i){if(this._closeHandlers){var n=egret.getQualifiedClassName(t);if(this._closeHandlers[n])for(var r=this._closeHandlers[n],o=0;o<r.length;o++)r[o].caller==e&&r[o].method==i&&(r.splice(o,1),o--)}},n.prototype.callClose=function(t){if(this._closeHandlers&&this._closeHandlers[t]){for(var e=this._closeHandlers[t],i=e.concat(),n=0;n<e.length;n++)e[n].once&&(e.splice(n,1),n--);i.forEach(function(e){e.method.call(e.caller,t)})}},n.prototype.blackTapHandler=function(){if(this.tapOutsideClose&&this._openList.length){var t=this._openList[this._openList.length-1];this.close(egret.getQualifiedClassName(t))}},n.prototype.resizeHandler=function(t){this._back.parent&&(this._back.width=this._stage.stageWidth,this._back.height=this._stage.stageHeight);for(var e=0,i=this._openList;e<i.length;e++){var n=i[e];n.onResize(this._stage.stageWidth,this._stage.stageHeight)}},n.prototype.hasOpen=function(t){if(!t)return this._openList.length>0;var e="string"==typeof t?t:egret.getQualifiedClassName(t),i=this._lib[e];return i?this._openList.indexOf(i)>=0:!1},n.prototype.hasOpenWindow=function(e){if(!e){for(var i=0,n=this._openList;i<n.length;i++){var r=n[i];if(r instanceof t.WindowItem)return!0}return!1}var o="string"==typeof e?e:egret.getQualifiedClassName(e),r=this._lib[o];return r?this._openList.indexOf(r)>=0:!1},Object.defineProperty(n.prototype,"popSound",{set:function(t){this._popSound=t},enumerable:!0,configurable:!0}),n.prototype.getLayer=function(i){var n=t.layer[i.detail.layer+"Comp"];if(n)return n;switch(i.type){case e.FIX:return t.layer.mainuiComp;case e.TOP:return t.layer.topuiComp;case e.DIALOG:return t.layer.dialogComp;case e.ALERT:return t.layer.alertComp}return t.layer.dialogComp},n.BLACK_TOUCH_CLOSE=!0,n}(t.EventDispatcher);t.UIManager=i,__reflect(i.prototype,"vitamin.UIManager")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t._lastPlayTime=0,t}return __extends(n,e),n.prototype.initialize=function(e,n){this._url=e,this._name=t.Path.basename(e),this._sound=new egret.Sound,this._sound.type=n?n:egret.Sound.EFFECT,this._loader=t.ObjectPool.from(i),this._loader.initialize(this._sound),n==egret.Sound.MUSIC&&(egret.lifecycle.stage.addEventListener(egret.Event.ACTIVATE,this.activeHandler,this),egret.lifecycle.stage.addEventListener(egret.Event.DEACTIVATE,this.deactiveHandler,this))},n.prototype.uninitialize=function(){this.stop(),this._loader.uninitialize(),this._loader=null,this._sound=null,this._position=0,egret.lifecycle.stage.removeEventListener(egret.Event.ACTIVATE,this.activeHandler,this),egret.lifecycle.stage.removeEventListener(egret.Event.DEACTIVATE,this.deactiveHandler,this)},n.prototype.activeHandler=function(t){this._isplay&&this.__play()},n.prototype.deactiveHandler=function(t){this._chanel&&(this._position=this._chanel.position,this._chanel.stop())},n.prototype.load=function(t,e){for(var i=this,n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return this._loader.loading?Promise.resolve():this._loader.loaded?Promise.resolve():new Promise(function(r){i._loader.load(i._url,function(){i.onLoaded(),e&&e.call.apply(e,[t].concat(n)),r()})})},n.prototype.onLoaded=function(){this._isplay&&this.__play()},n.prototype.play=function(t){return t.stopPrev&&this._isplay&&this.stop(),this._loop=t?!!t.loop:!1,this._volume=t&&void 0!=t.volume?t.volume:1,t&&void 0!=t.startTime?this._position=t.startTime:this._position=0,this._complete=t?t.complete:void 0,this._loader.loaded?void this.__play():void(this._url&&this.load(this._url))},n.prototype.stop=function(){this._isplay=!1,this._chanel&&(this._position=0,this._chanel.removeEventListener(egret.Event.SOUND_COMPLETE,this.__onComplete,this),this._chanel.stop(),this._chanel=null)},n.prototype.pause=function(){this._isplay=!1,this._chanel&&(this._position=this._chanel.position,this._chanel.removeEventListener(egret.Event.SOUND_COMPLETE,this.__onComplete,this),this._chanel.stop(),this._chanel=null)},n.prototype.resume=function(){this._isplay||this.__play()},n.prototype.__play=function(){this._loader.loaded&&(this._isplay=!0,this._chanel=this._sound.play(this._position,this._loop?0:1),this._chanel.volume=this._volume,this._chanel.once(egret.Event.SOUND_COMPLETE,this.__onComplete.bind(this,this._chanel),this),this._lastPlayTime=egret.getTimer())},n.prototype.__onComplete=function(t){this._chanel==t&&(this.stop(),this._complete&&this._complete.runWith(this._url))},Object.defineProperty(n.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume!=t&&(this._volume=t,this._chanel&&(this._chanel.volume=this._volume))},enumerable:!0,configurable:!0}),n.prototype.destory=function(){this.stop(),this._sound.close()},n.prototype.easeIn=function(t){var e=this;return void 0===t&&(t=1e3),new Promise(function(i){egret.Tween.get(e).to({volume:1},t).call(i)})},n.prototype.easeOut=function(t){var e=this;return void 0===t&&(t=1e3),new Promise(function(i){egret.Tween.get(e).to({volume:0},t).call(i)})},Object.defineProperty(n.prototype,"sound",{get:function(){return this._sound},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"type",{get:function(){return this._sound.type},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isStopped",{get:function(){return!this._isplay},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lastPlayTime",{get:function(){return this._lastPlayTime},enumerable:!0,configurable:!0}),n}(egret.EventDispatcher);t.Sound=e,__reflect(e.prototype,"vitamin.Sound",["vitamin.IPool"]);var i=function(){function t(){}return Object.defineProperty(t.prototype,"loading",{get:function(){return this._isloading},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loaded",{get:function(){return this._loaded},enumerable:!0,configurable:!0}),t.prototype.initialize=function(t){this._sound=t,this._isloading=!1,this._loaded=!1},t.prototype.uninitialize=function(){this._sound&&(this._sound.close(),this._sound.removeEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this._sound.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadError,this),this._complete=null,this._url=null,this._sound=null,this._loaded=!1)},t.prototype.load=function(t,e){this._url=t,this._complete=e,this._sound.once(egret.Event.COMPLETE,this.onLoadComplete,this),this._sound.once(egret.IOErrorEvent.IO_ERROR,this.onLoadError,this),this._sound.load(this._url),this._isloading=!0},t.prototype.onLoadComplete=function(){this._sound.removeEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this._sound.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadError,this),this._isloading=!1,this._loaded=!0,this._complete&&this._complete()},t.prototype.onLoadError=function(){this._sound.removeEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this._sound.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadError,this),console.error("[声音加载错误] : "+this._url),this._isloading=!1,this._complete&&this._complete()},t}();t.SoundLoader=i,__reflect(i.prototype,"vitamin.SoundLoader",["vitamin.IPool"])}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){this._completes=[]}return e.prototype.initialize=function(){},e.prototype.uninitialize=function(){this.unload(),this.destory(),this._data=null,this._groupName=null},Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),e.prototype.load=function(e,i,n,r){var o=this;if(!this._data&&!this._groupName){this._groupName=e,t.GroupLoader.createResGroup(e,[i,n,r],["json","json","image"]);var a=t.ObjectPool.from(t.GroupLoader);a.initialize(this._groupName).start(this,function(){var e=t.GroupLoader.getResGroupList(o._groupName),i=RES.getRes(e[0].name),n=RES.getRes(e[1].name),r=RES.getRes(e[2].name);o.onLoaded(i,n,r),a.uninitialize(),t.ObjectPool.to(a,!0)},this._progress),this._groupLoader=a}},e.prototype.onLoaded=function(t,e,i){for(var n=0,r=this._completes;n<r.length;n++){var o=r[n];o.method.call(o.caller,[t,e,i],this._groupName)}this._completes.length=0},e.prototype.unload=function(){this._data=null,this._completes.length=0,this._progress=null,this._groupLoader&&(this._groupLoader.uninitialize(),t.ObjectPool.to(this._groupLoader,!0),this._groupLoader=null)},e.prototype.destory=function(){RES.destroyRes(this._groupName)},e.prototype.onComplete=function(t,e){this._completes.push({caller:t,method:e})},e.prototype.offComplete=function(t,e){for(var i=0;i<this._completes.length;i++)if(this._completes[i].caller==t&&this._completes[i].method==e){this._completes.splice(i,1);break}},e.prototype.onProgress=function(t,e){this._progress=e.bind(t)},e}();t.DragonBoneGroupLoader=e,__reflect(e.prototype,"vitamin.DragonBoneGroupLoader",["vitamin.IPool"])}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._isPlay=!1,t._playTimes=0,t._timeScale=1,t.touchEnabled=t.touchChildren=!1,t}return __extends(i,e),i.prototype.initialize=function(t,e){void 0===e&&(e="Armature"),this._manager=t,this._armatureName=e},i.prototype.uninitialize=function(){this.touchEnabled=this.touchChildren=!1},Object.defineProperty(i.prototype,"resId",{get:function(){return this._resId},set:function(t){this._resId!=t&&(this._resId=t,this.resData=this._manager.getRes(this._resId))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"resData",{get:function(){return this._resData},set:function(t){this._resData!=t&&(this._resData=t,this._resData.getDataSync().then(this.updateAnimation.bind(this)))},enumerable:!0,configurable:!0}),i.prototype.updateAnimation=function(){if(this._armature&&(this._armature.animation.reset(),this._armature.parent&&this._armature.parent.removeChild(this._armature)),this._armature=this._manager.createAnimation(this._resId,this._armatureName),this._armature)for(this.addChild(this._armature),this.updateAnimationState();this._replaceSlots&&this._replaceSlots.length;){var t=this._replaceSlots.pop();this.replaceSlot(t.slotName,t.display)}},i.prototype.play=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=1),this.stop(),this._isPlay||(this._animaname=t,this._playTimes=e?e:9999999,this._timeScale=i,this._isPlay=!0,this.updateAnimationState())},i.prototype.stop=function(t){this._animaname=t,this.offCompleteOnce(),this.offLoopCompleteOnce(),this._isPlay&&(this._isPlay=!1,this.updateAnimationState())},i.prototype.destory=function(){this.offCompleteOnce(),this.offLoopCompleteOnce(),this._manager.removeAnimation(this._armature),this._armature&&(this._armature.animation.reset(),this._armature.dispose(!0),this._armature.parent&&this._armature.parent.removeChild(this._armature),this._armature.removeEventListener(dragonBones.EventObject.LOOP_COMPLETE,this.__onloopComplete,this),this._armature.removeEventListener(dragonBones.EventObject.COMPLETE,this.__onComplete,this)),this._armature.dispose(),this._armature=null,this._resId=null},i.prototype.playOnce=function(t,e){void 0===e&&(e=1),this.stop(),this._isPlay||(this._animaname=t,this._playTimes=1,this._timeScale=e,this._isPlay=!0,this.updateAnimationState())},i.prototype.hasSlot=function(t){return!!this._armature.armature.getSlot(t)},i.prototype.getSlot=function(t){return this._armature&&this._armature.armature?this._armature.armature.getSlot(t):null},i.prototype.getSlotXY=function(e){if(!this._armature||!this._armature.armature)return null;var i=this._armature.armature.getSlot(e);return i?i.origin?{x:i.origin.x,y:i.origin.y}:(t.warn("无法获取插槽xy:"+e),null):(t.warn("无法获取插槽:"+e),null)},i.prototype.replaceSlot=function(t,e){if(e instanceof egret.Texture&&(e=new egret.Bitmap(e)),this._armature&&this._armature.armature){var i=this._armature.armature.getSlot(t);return void(i&&(i.display=e))}this._replaceSlots||(this._replaceSlots=[]),this._replaceSlots.push({slotName:t,display:e})},i.prototype.updateAnimationState=function(){this._isPlay?this._armature&&(this._manager.addArmature(this._armature),this._armature.animation.timeScale=this._timeScale,this._armature.animation.play(this._animaname,this._playTimes),this._armature.removeEventListener(dragonBones.EventObject.LOOP_COMPLETE,this.__onloopComplete,this),this._armature.removeEventListener(dragonBones.EventObject.COMPLETE,this.__onComplete,this)):this._armature&&(this._armature.animation.stop(this._animaname),this._animaname&&this._armature.animation.gotoAndStopByProgress(this._animaname,0),this._manager.removeAnimation(this._armature),this._armature.addEventListener(dragonBones.EventObject.LOOP_COMPLETE,this.__onloopComplete,this),this._armature.addEventListener(dragonBones.EventObject.COMPLETE,this.__onComplete,this))},i.prototype.onLoopCompleteOnce=function(e,i){return this.offLoopCompleteOnce(),this._loopHandler=t.Handler.create(e,i,null,!0),this},i.prototype.offLoopCompleteOnce=function(){return this._loopHandler&&(this._loopHandler.recover(),this._loopHandler=null),this},i.prototype.onCompleteOnce=function(e,i){return this.offCompleteOnce(),this._completeHandler=t.Handler.create(e,i,null,!0),this},i.prototype.offCompleteOnce=function(){return this._completeHandler&&(this._completeHandler.recover(),this._completeHandler=null),this},i.prototype.__onloopComplete=function(t){if(this._loopHandler){var e=this._loopHandler;this._loopHandler=null,e.run()}},i.prototype.__onComplete=function(t){if(this._completeHandler){var e=this._completeHandler;this._completeHandler=null,e.run()}},i}(egret.DisplayObjectContainer);t.DragonBoneMovieClip=e,__reflect(e.prototype,"vitamin.DragonBoneMovieClip",["vitamin.IPool"])}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){this.map={}}return e.prototype.initialize=function(t){this.factory=t},e.prototype.clear=function(){for(var e in this.map){var i=this.map[e];i.uninitialize(),t.ObjectPool.to(i,!0),this.map[e]=null,delete this.map[e]}},e.prototype.destoryRes=function(t){this.onDestory(this.getRes(t))},e.prototype.getRes=function(e){if(!this.map[e]){var i=t.ObjectPool.from(t.DragonResData);i.initialize(e,this.factory),i.onDestory(this,this.onDestory),this.map[e]=i}return this.map[e]},e.prototype.onDestory=function(e){if(e){var i=e.path;t.log("释放龙骨资源:",e.path),e.uninitialize(),t.ObjectPool.to(e,!0),this.map[i]=null,delete this.map[i]}},e}();t.DragonRes=e,__reflect(e.prototype,"vitamin.DragonRes")}(vitamin||(vitamin={}));var vitamin;!function(t){function e(e,n,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){switch(o.label){case 0:return r||(r={}),void 0==r.data&&(r.data=!0),t.Config.appName=n.appName,t.dispatcher=t.ObjectUtil.instance(t.EventDispatcher),t.ticker=t.ObjectUtil.instance(t.Ticker),t.ticker.initialize(),t.timer=t.ObjectUtil.instance(t.Timer),t.timer.initialize(t.ticker),t.storage=n.storage?n.storage:t.ObjectUtil.instance(t.LocalStorage),t.lang=t.ObjectUtil.instance(t.Language),t.lang.initialize(),t.state=t.ObjectUtil.instance(t.State),t.res=t.ObjectUtil.instance(t.ResManager),t.stage=t.ObjectUtil.instance(t.StageManager),t.stage.initialize(e),r.dragonbone&&(t.dragonbone=t.ObjectUtil.instance(t.DragonbonesManager),t.dragonbone.initialize()),i(e),t.layer=t.ObjectUtil.instance(t.LayerManager),t.layer.initialize(e),t.ui=t.ObjectUtil.instance(t.UIManager),t.audio=t.ObjectUtil.instance(t.AudioManager),t.audio.initialize(),r.opencontext&&(t.opencontext=t.ObjectUtil.instance(t.OpenContext),t.opencontext.initialize(e)),t.game=t.ObjectUtil.instance(t.GameManager),t.effect=t.ObjectUtil.instance(t.EffectManager),r.data?[4,t.data.initialize()]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})}function i(t){fairygui.UIConfig.defaultFont="黑体",fairygui.UIConfig.verticalScrollBar=fairygui.UIPackage.getItemURL("Basic","ScrollBar_VT"),fairygui.UIConfig.horizontalScrollBar=fairygui.UIPackage.getItemURL("Basic","ScrollBar_HZ"),fairygui.UIConfig.popupMenu=fairygui.UIPackage.getItemURL("Basic","PopupMenu"),fairygui.UIConfig.buttonSound=fairygui.UIPackage.getItemURL("Basic","click"),t.addChild(fairygui.GRoot.inst.displayObject)}t.getInstance=t.ObjectUtil.instance,t.initialize=e}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.initialize=function(e,i){this._path=e,this._pathSke=e+"_ske.json",this._pathTexJson=e+"_tex.json",this._pathTexPng=e+"_tex.png",this._factory=i,this._loader||(this._loader=t.ObjectPool.from(t.DragonBoneGroupLoader),this._loader.initialize())},i.prototype.uninitialize=function(){this._factory.removeDragonBonesData(this._path,!0),this._factory.removeTextureAtlasData(this._path,!0),this.stopDelayDestory(),this.offAllComplete(),this._data=null,this._loader&&(this._loader.uninitialize(),t.ObjectPool.to(this._loader,!0),this._loader=null)},Object.defineProperty(i.prototype,"path",{get:function(){return this._path},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pathSke",{get:function(){return this._pathSke},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pathTexJson",{get:function(){return this._pathTexJson},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pathTexPng",{get:function(){return this._pathTexPng},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),i.prototype.getFrameEvents=function(){if(!this.data||!this.data.dragonbonesData)return[];var t=[];for(var e in this.data.dragonbonesData.armatures)for(var i=this.data.dragonbonesData.armatures[e],n=0,r=i.actions;n<r.length;n++){var o=r[n],a=o.name.split(":");t.push({tag:a.shift(),params:a})}return t},i.prototype.getData=function(){return this._data},i.prototype.getDataSync=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return this._data?[2,this._data]:[4,this.load()];case 1:return t.sent(),[2,this._data]}})})},i.prototype.setData=function(t,e,i){this.onData(t,e,i)},i.prototype.onData=function(t,e,i){if(t&&e&&i){var n=this._factory.parseDragonBonesData(t),r=this._factory.parseTextureAtlasData(e,i);this._factory.addDragonBonesData(n,this._path),this._factory.addTextureAtlasData(r,this._path),this._data={dragonbonesData:n,textureData:r}}},i.prototype.load=function(){var t=this;return new Promise(function(e){return t._loader.load(t._path,t._pathSke,t._pathTexJson,t._pathTexPng),t._loader.onComplete(t,function(i){var n=i[0],r=i[1],o=i[2];t.onData(n,r,o),t.callComplete(),e()}),t})},i.prototype.holdReferenceAsync=function(t){var e=this;return new Promise(function(i){e.holdReference(t,function(){i()})})},i.prototype.unHoldReferenceAsync=function(t){var e=this;return new Promise(function(i){e.offReference(t),i()})},i}(t.ResData);t.DragonResData=e,__reflect(e.prototype,"vitamin.DragonResData")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){}return e.exec=function(e,i){var n=e[t.__BindMap];if(!n){var r=[],o=e[t.BinderPropname.attribute];o&&o.forEach(function(n){return r.push(new t.AttributeBinder(e,i,n))});var a=e[t.BinderPropname.comp];a&&a.forEach(function(n){return r.push(new t.FguiComponentBinder(e,i,n))});var s=e[t.BinderPropname.method];s&&s.forEach(function(n){return r.push(new t.MethodBinder(e,i,n))}),e[t.__BindMap]=n=r}n.forEach(function(t){t.exec()})},e.un=function(e){var i=e[t.__BindMap];i&&i.forEach(function(t){t.unexec()})},e}();t.Binder=e,__reflect(e.prototype,"vitamin.Binder")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.create=function(){this._bitmap=new t.Bitmap,this.addChild(this._bitmap)},i.prototype.initialize=function(t){this._bitmap.texture=t},i.prototype.uninitialize=function(){egret.Tween.removeTweens(this._bitmap)},i.prototype.easeIn=function(e){var i=this;return new Promise(function(n){egret.Tween.removeTweens(i._bitmap),i._bitmap.width=t.stage.width,i._bitmap.height=t.stage.height,i._bitmap.alpha=0,egret.Tween.get(i._bitmap).to({alpha:1},e,egret.Ease.cubicOut).call(n)})},i.prototype.easeOut=function(t){var e=this;return new Promise(function(i){egret.Tween.removeTweens(e._bitmap),egret.Tween.get(e._bitmap).to({alpha:0},t,egret.Ease.cubicOut).call(function(){i(null)})})},i.prototype.createBlackTexture=function(){if(!this._bitmap.texture){var t=new egret.RenderTexture,e=new egret.Shape;e.graphics.beginFill(0,1),e.graphics.drawRect(0,0,64,64),e.graphics.endFill(),t.drawToTexture(e,new egret.Rectangle(0,0,64,64)),this._bitmap.texture=t}},i}(t.Transition);t.BlackTransition=e,__reflect(e.prototype,"vitamin.BlackTransition")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._max=8,t._spaceY=5,t._boxes=[],t.touchable=!1,t}return __extends(i,e),i.prototype.initialize=function(t,e){this._tipClazz=t,this._options=e},i.prototype.onCreateItem=function(e){return t.FguiUtil.createRunTime(e)},i.prototype.add=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=t.ObjectPool.fromConstructor(this._tipClazz,this.onCreateItem,this._tipClazz);n.initializeOptions(this._options),n.initialize.apply(n,e),this._boxes.push(n),this._boxes.length>this._max&&this.removeHandler(this._boxes.shift()),n.add(this),n.y=n.height;for(var r=n.height,o=this._boxes.length-1;o>=0;o--)egret.Tween.removeTweens(this._boxes[o]),r<this._boxes[o].y&&(this._boxes[o].y=r),r-=this._boxes[o].height+this._spaceY;n.start(this,this.completeHandler),this.update()},i.prototype.update=function(){for(var t=0,e=this._boxes.length-1;e>=0;e--)egret.Tween.removeTweens(this._boxes[e]),egret.Tween.get(this._boxes[e]).to({y:t,ease:egret.Ease.circInOut},300),t-=this._boxes[e].height+this._spaceY},i.prototype.completeHandler=function(t){egret.Tween.removeTweens(t);var e=this._boxes.indexOf(t);e>=0&&(this._boxes.splice(e,1),this.removeHandler(t))},i.prototype.removeHandler=function(t){egret.Tween.removeTweens(t),t.remove(),t.uninitialize()},i}(fgui.GComponent);t.FguiMessageBox=e,__reflect(e.prototype,"vitamin.FguiMessageBox")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._max=8,t._spaceY=5,t._boxes=[],t._back=new egret.Sprite,t.addChild(t._back),t._mid=new egret.Sprite,t.addChild(t._mid),t._front=new egret.Sprite,t.addChild(t._front),t.touchEnabled=t.touchChildren=!1,t}return __extends(i,e),i.prototype.initialize=function(t,e){this._tipClazz=t,this._options=e},Object.defineProperty(i.prototype,"back",{get:function(){return this._back},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mid",{get:function(){return this._mid},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"front",{get:function(){return this._front},enumerable:!0,configurable:!0}),i.prototype.add=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];
var n=t.ObjectPool.from(this._tipClazz);n.initializeOptions(this._options),n.initialize.apply(n,e),this._boxes.push(n),this._boxes.length>this._max&&this.removeHandler(this._boxes.shift()),n.add(this),n.y=n.height;for(var r=n.height,o=this._boxes.length-1;o>=0;o--)egret.Tween.removeTweens(this._boxes[o]),r<this._boxes[o].y&&(this._boxes[o].y=r),r-=this._boxes[o].height+this._spaceY;n.start(this,this.completeHandler),this.update()},i.prototype.update=function(){for(var t=0,e=this._boxes.length-1;e>=0;e--)egret.Tween.removeTweens(this._boxes[e]),egret.Tween.get(this._boxes[e]).to({y:t,ease:egret.Ease.circInOut},300),t-=this._boxes[e].height+this._spaceY},i.prototype.completeHandler=function(t){egret.Tween.removeTweens(t);var e=this._boxes.indexOf(t);e>=0&&(this._boxes.splice(e,1),this.removeHandler(t))},i.prototype.removeHandler=function(t){egret.Tween.removeTweens(t),t.remove(),t.uninitialize()},i}(egret.DisplayObjectContainer);t.MessageBox=e,__reflect(e.prototype,"vitamin.MessageBox")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){this._textColor=16777215,this._back=new t.Bitmap,this._back.height=60,this._back.width=240,this._labContent=new egret.TextField,this._labContent.size=24,this._labContent.fontFamily="黑体",this._labContent.textAlign="center",this._labContent.touchEnabled=!1,this._labContent.bold=!0,this._labContent.multiline=!0}return Object.defineProperty(e.prototype,"x",{get:function(){return this._back.x},set:function(t){this._back.x=t,this._labContent.x=t+this._textmargin},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._back.y},set:function(t){this._back.y=t,this._labContent.y=t+this._textmargin},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._back.width},set:function(t){this._back.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._back.height},set:function(t){this._back.height=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._back.alpha},set:function(t){this._back.alpha=this._labContent.alpha=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this._screenpadding},enumerable:!0,configurable:!0}),e.prototype.add=function(t){t.back.addChild(this._back),t.front.addChild(this._labContent)},e.prototype.remove=function(){this._back.parent&&this._back.parent.removeChild(this._back),this._labContent.parent&&this._labContent.parent.removeChild(this._labContent)},e.prototype.initializeOptions=function(t){t||(t={bar:null,scale9Grid:null}),this._back.texture=t.bar,this._back.texture&&(this._back.scale9Grid=t.scale9Grid),this._screenpadding=void 0==t.padding?50:t.padding,this._textmargin=void 0==t.margin?12:t.margin,t.textColor&&(this._textColor=t.textColor),void 0!=t.strokeColor&&(this._labContent.stroke=2,this._labContent.strokeColor=t.strokeColor)},e.prototype.initialize=function(e,i,n){void 0===n&&(n=!1),this._labContent.alpha=1,this._labContent.width=t.stage.width-2*this._screenpadding,this._labContent.height=this._labContent.size,this._labContent.text=e,this._labContent.textColor=i?i:this._textColor,this._isCenter=n,this._back.alpha=1,this._labContent.width=this._labContent.textWidth,this._labContent.height=this._labContent.textHeight,this._back.width=this._labContent.width+2*this._textmargin,this._back.height=this._labContent.height+2*this._textmargin,this.x=this._isCenter?.5*-this._back.width:0,this.alpha=1},e.prototype.uninitialize=function(){egret.Tween.removeTweens(this._back),egret.Tween.removeTweens(this._labContent)},e.prototype.start=function(t,e){egret.Tween.get(this._back).wait(2e3).to({alpha:0},300).call(e,t,[this]),egret.Tween.get(this._labContent).wait(2e3).to({alpha:0},200)},e}();t.SimpleMessage=e,__reflect(e.prototype,"vitamin.SimpleMessage",["vitamin.IMessageBoxItem","vitamin.IPool"])}(vitamin||(vitamin={}));var vitamin;!function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=e[0],r=n.map(function(t,e){return e<n.length-1?t+"{"+e+"}":t}).join("");return e.shift(),t.lang.get.apply(t.lang,[r].concat(e))}t.i18n=e;var i=function(){function e(){}return e.prototype.initialize=function(){this._lang=RES.getRes(t.Config.lang+"_json")},e.prototype.get=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=this._lang&&this._lang[t]?this._lang[t]:t;if(e.length)for(var r=0;r<e.length;r++){var o=e[r];n=n.replace("{"+r+"}",o)}return n},e}();t.Language=i,__reflect(i.prototype,"vitamin.Language")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(){}return t.getData=function(t){return this._lib[t]},t._lib={},t}();t.MovieClipRes=e,__reflect(e.prototype,"vitamin.MovieClipRes");var i=function(){function e(){}return e.create=function(i){return t.ObjectPool.from(e,!0,i)},e.createByResId=function(i,n){return void 0===n&&(n="resource/animation/"),t.ObjectPool.from(e,!0,""+n+i)},e.prototype.initialize=function(e){this._url=e,this._loader=t.ObjectPool.from(n)},e.prototype.initializeData=function(e,i){this._factory=new egret.MovieClipDataFactory(e,i);var n=t.Path.basename(this._url);this._clipData=this._factory.generateMovieClipData(n)},e.prototype.uninitialize=function(){this._url=null},e.prototype.load=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),this.clipdata?void(e&&e.call(t,this)):void this._loader.load(t,e)},e.prototype.unload=function(t,e){this._loader.unload(t,e)},Object.defineProperty(e.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"jsonurl",{get:function(){return this._url+".json"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pngurl",{get:function(){return this._url+".png"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clipdata",{get:function(){return this._clipData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"factory",{get:function(){return this._factory},enumerable:!0,configurable:!0}),e}();t.MoveClipData=i,__reflect(i.prototype,"vitamin.MoveClipData",["vitamin.IPool"]);var n=function(){function t(){}return t.prototype.initialize=function(t){this._data=t},t.prototype.uninitialize=function(){},t.prototype.load=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),__awaiter(this,void 0,void 0,function(){var i,n=this;return __generator(this,function(r){return i=this,[2,new Promise(function(r,o){return i._data.clipdata?(e&&e.call(t,n._data),void r()):(e&&i._completes.add(t,e),i._isLoading?void r():(i._isLoading=!0,void RES.getResByUrl(i._data.jsonurl,function(t){RES.getResByUrl(i._data.pngurl,function(e){n._data.initializeData(t,e),i._isLoading=!1,i._completes.runWith(i),i._completes.clear(),r()})})))})]})})},t.prototype.unload=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this._completes.remove(t,e)},t}();t.MovieClipLoader=n,__reflect(n.prototype,"vitamin.MovieClipLoader",["vitamin.IPool"])}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(t){function e(e,i,n,r,o){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),void 0===r&&(r=!1),void 0===o&&(o=0);var a=t.call(this,e,i,n,r)||this;return a._requestDirect=0,a._requestDirect=o,a}return __extends(e,t),Object.defineProperty(e.prototype,"requestDirect",{get:function(){return this._requestDirect},set:function(t){this._requestDirect=t},enumerable:!0,configurable:!0}),e.prototype.recover=function(){this._id>0&&(this._id=0,this._requestDirect=0,e._mypool.push(this.clear()))},e.create=function(t,i,n,r,o){if(void 0===n&&(n=null),void 0===r&&(r=!0),void 0===o&&(o=0),e._mypool.length){var a=e._mypool.pop();return a.setTo(t,i,n,r),a._requestDirect=o,a}return new e(t,i,n,r)},e._mypool=[],e}(t.Handler);t.ResHandler=e,__reflect(e.prototype,"vitamin.ResHandler")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i._isPlay=!0,i._loop=0,i._curFrame=1,i._movie=new egret.MovieClip,i.addChild(i._movie),i.touchEnabled=i.touchChildren=!1,i._completes=new t.Handlers(!1),i}return __extends(i,e),i.prototype.initialize=function(t){this._data=t,this._data.load(this,this.update)},i.prototype.uninitialize=function(){this._data&&this._data.unload(this,this.update),this._isPlay=!0,this._loop=0,this._curFrame=1,this._movie.movieClipData=null},Object.defineProperty(i.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),i.prototype.update=function(){this._data&&(this._movie.movieClipData=this._data.clipdata,this._movie.gotoAndStop(this._curFrame),this._isPlay&&this._movie.play(this._loop))},i.prototype.onceComplete=function(t,e){this._completes.add(t,e,null,!0),this._movie.once(egret.Event.COMPLETE,this.movieComplete,this)},i.prototype.onComplete=function(t,e){this._completes.add(t,e,null,!1),this._movie.addEventListener(egret.Event.COMPLETE,this.movieComplete,this)},i.prototype.offComplete=function(t,e){this._completes.remove(t,e),this._movie.removeEventListener(egret.Event.COMPLETE,this.movieComplete,this)},i.prototype.movieComplete=function(t){this._completes.runWith(this)},i.prototype.play=function(t){void 0===t&&(t=0),this._isPlay=!0,this._loop=t,this._movie.movieClipData&&this._movie.play(t)},i.prototype.stop=function(){this._isPlay=!1,this._movie.movieClipData&&this._movie.stop()},i.prototype.gotoAndPlay=function(t,e){void 0===e&&(e=0),this._isPlay=!0,this._loop=e,this._movie.movieClipData&&this._movie.gotoAndPlay(t,e)},i.prototype.gotoAndStop=function(t){this._isPlay=!1,this._movie.movieClipData&&this._movie.gotoAndStop(t)},i}(egret.DisplayObjectContainer);t.MovieClip=e,__reflect(e.prototype,"vitamin.MovieClip",["vitamin.IPool"])}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(){}return t.parseFrames=function(t,e,i,n){if(this._map.has(t))return this._map.get(t).frames;var r=[],o=new egret.SpriteSheet(t),a=e*i,s=t.textureWidth/e,u=t.textureHeight/i;if(n){for(;n.length<a;)n.push(n.length);for(var c=0,l=0;i>l;l++)for(var h=0;e>h;h++)r.push(o.createTexture(n[c++]+"",s*h,u*l,s,u))}else for(var c=0,l=0;i>l;l++)for(var h=0;e>h;h++)r.push(o.createTexture(c+"",s*h,u*l,s,u)),c++;return this._map.set(t,{sheet:o,frames:r}),r},t.parseFramesHorizontal=function(t){return this.parseFrames(t,t.textureWidth/t.textureHeight>>0,1)},t.parseFramesVertical=function(t){return this.parseFrames(t,1,t.textureHeight/t.textureWidth>>0)},t._map=new Map,t}();t.AnimationUtil=e,__reflect(e.prototype,"vitamin.AnimationUtil")}(vitamin||(vitamin={}));var vitamin;!function(t){t.__propserializes={};var e=function(){function e(){this._models={}}return e.prototype.initialize=function(){return __awaiter(this,void 0,void 0,function(){var e,i,n,r,r,o,a,s,u,c,l,h,p,f,d,_,g,m,v,y,b,T,C,u,r;return __generator(this,function(O){switch(O.label){case 0:for(e=0,i=t.__models.classes;e<i.length;e++)n=i[e],r=egret.getQualifiedClassName(n),this._models[r]=t.ObjectUtil.instance(n);for(r in this._models){for(o=this._models[r],a=0,s=t.__models.props;a<s.length;a++)u=s[a],egret.getQualifiedClassName(u.clazz)==r&&(o[u.property]=this._models[egret.getQualifiedClassName(u.modelclazz)]);for(c=0,l=t.__insts;c<l.length;c++)h=l[c],egret.getQualifiedClassName(h.clazz)==r&&(o[h.property]=t.ObjectUtil.instance(h.propclazz))}for(p=0,f=t.__models.serializes;p<f.length;p++)d=f[p],_=d.clazz.__class__?d.clazz.__class__:egret.getQualifiedClassName(d.clazz),t.__propserializes[_]||(t.__propserializes[_]=[]),t.__propserializes[_].push(d);return[4,this.read()];case 1:O.sent();for(g in this._models)m=this._models[g],m.initialize();for(v=0,y=t.__models.mapes;v<y.length;v++)for(b=y[v],T=0,C=t.__models.props;T<C.length;T++)u=C[T],u.clazz==b&&(r=egret.getQualifiedClassName(u.modelclazz),u.clazz[u.property]=this._models[r]);return[2,this]}})})},e.prototype.getModel=function(t){return this._models[t]},e.prototype.read=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,n;return __generator(this,function(r){switch(r.label){case 0:t=[];for(e in this._models)t.push(e);i=0,r.label=1;case 1:return i<t.length?(n=t[i],[4,this._models[n].read()]):[3,4];case 2:r.sent(),r.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.save=function(){return __awaiter(this,void 0,void 0,function(){var t,e,i,n;return __generator(this,function(r){switch(r.label){case 0:t=[];for(e in this._models)t.push(e);i=0,r.label=1;case 1:return i<t.length?(n=t[i],[4,this._models[n].save()]):[3,4];case 2:r.sent(),r.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e}();t.DataManager=e,__reflect(e.prototype,"vitamin.DataManager"),t.data=new e}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.send=function(t,e){var i;if(this.messages){var n=this.messages.find(function(e){return e.message==t});n&&(i=this[n.methodName])}},i.prototype.dispatch=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];i.dispatcher.event(t,e)},i.prototype.on=function(t,e,n){i.dispatcher.on(t,e,n)},i.prototype.off=function(t,e,n){i.dispatcher.off(t,e,n)},i.dispatcher=new t.EventDispatcher,i}(t.DataBase);t.DataModelBase=e,__reflect(e.prototype,"vitamin.DataModelBase")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(){}return t.OPEN="OPEN",t.CLOSE="CLOSE",t.UPDATE_RANK_SOCRE="UPDATE_RANK_SOCRE",t}();t.OpenContextEvent=e,__reflect(e.prototype,"vitamin.OpenContextEvent");var i=function(){function t(){}return Object.defineProperty(t.prototype,"shareBitmap",{get:function(){return this._shareBitmap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAvailable",{get:function(){return this._shareBitmap&&this._shareBitmap.texture},enumerable:!0,configurable:!0}),t.prototype.initialize=function(t){this._stage=t,this._views={},this._shareBitmap=this.createDisplayObject(t.stageWidth,t.stageHeight)},t.prototype.updateRankScore=function(t,i){this.postMessage(e.UPDATE_RANK_SOCRE,{rankname:t,score:i})},t.prototype.registerView=function(t,e){this._views[t]=e},t.prototype.showView=function(t,i,n,r){if(!this.isAvailable)return!1;if(this._views[t]){this._curView=this._views[t];var o=this._curView.displayObject,a=i,s=n;if(void 0==a||void 0==s){var u=o.localToGlobal();a=u.x,s=u.y}return this.postMessage(e.OPEN,{viewName:t,x:a,y:s,width:o.width,height:o.height,data:r}),this._stage.addChild(this._shareBitmap),console.log("显示开放域界面:",t),!0}return!1},t.prototype.closeView=function(){this._curView&&(egret.Tween.removeTweens(this._curView),this._curView.parent&&(this._curView.parent.removeChild(this._curView),this.postMessage(e.CLOSE)),this._shareBitmap.parent&&this._shareBitmap.parent.removeChild(this._shareBitmap))},t.prototype.createDisplayObject=function(t,e){if(!window.sharedCanvas)return console.warn("非小游戏环境,忽略创建共享画布"),null;window.sharedCanvas.width=t,window.sharedCanvas.height=e;var i=new egret.BitmapData(window.sharedCanvas);i.$deleteSource=!1;var n=new egret.Texture;n._setBitmapData(i);var r=new egret.Bitmap(n);if(r.width=t,r.height=e,"webgl"==egret.Capabilities.renderMode){var o=egret.wxgame.WebGLRenderContext.getInstance(),a=o.context;a.wxBindCanvasTexture||egret.startTick(function(t){return egret.WebGLUtils.deleteWebGLTexture(i.webGLTexture),i.webGLTexture=null,!1},this)}return r},t.prototype.postMessage=function(t,e){e||(e={}),e.event=t,window.wx?window.wx.getOpenDataContext().postMessage(e):window.tt&&window.tt.getOpenDataContext().postMessage(e)},t}();t.OpenContext=i,__reflect(i.prototype,"vitamin.OpenContext")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(){this._uiResLib={}}return t.prototype.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var r=RES.getRes(t);r?n(r):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();t.AssetAdapter=e,__reflect(e.prototype,"vitamin.AssetAdapter",["eui.IAssetAdapter"])}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(){this.skinMap={},this.$styles={},egret.registerImplementation("eui.Theme",this)}return t.prototype.parserConfig=function(t,e,i){if(void 0===e&&(e=null),t&&t.skins)for(var n=this.skinMap,r=t.skins,o=Object.keys(r),a=o.length,s=0;a>s;s++){var u=o[s];n[u]||this.mapSkin(u,r[u])}t.styles?this.$styles=t.styles:t.exmls[0].gjs?t.exmls.forEach(function(t){return EXML.$parseURLContentAsJs(t.path,t.gjs,t.className)}):t.exmls[0].content?(t.exmls.forEach(function(t){return EXML.$parseURLContent(t.path,t.content)}),i.call(e)):EXML.$loadAll(t.exmls,i,e,!0)},t.prototype.getSkinName=function(t){var e=this.skinMap,i=e[t.hostComponentKey];return i||(i=this.findSkinName(t)),i},t.prototype.findSkinName=function(t){if(!t)return"";var e=t.__class__;if(void 0===e)return"";var i=this.skinMap[e];return i||"eui.Component"==e?i:this.findSkinName(Object.getPrototypeOf(t))},t.prototype.mapSkin=function(t,e){this.skinMap[t]=e},t.prototype.$getStyleConfig=function(t){return this.$styles[t]},t}();t.GameTheme=e,__reflect(e.prototype,"vitamin.GameTheme")}(vitamin||(vitamin={}));var vitamin;!function(t){var e;!function(e){var i=function(){function e(t,e){var i=this;this._data=t,this._parent=e,this._children=[],t.children&&t.children.forEach(function(t){return i.add(t)}),this._state=!1}return Object.defineProperty(e.prototype,"name",{get:function(){return this._data.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),e.prototype.bind=function(t){this._display=t,this.updateDisplay()},e.prototype.add=function(t){var i=new e(t,this);return this._children.push(i),i.watch(this,this.refesh),i},e.prototype.forEach=function(t){this._children.forEach(function(e){t(e),e.forEach(t)})},e.prototype.refesh=function(){var t=this._state;this.refeshHandler(),this.updateDisplay(),this._state!=t&&this._watch&&this._watch.run()},e.prototype.updateDisplay=function(){this._display&&(this._display.visible=this._state)},e.prototype.watch=function(e,i){this._watch=t.Handler.create(e,i,null,!1)},e.prototype.refeshHandler=function(){this._state=!1;for(var t=0;t<this._children.length;t++)if(this._children[t].state)return void(this._state=!0);this._data.condition&&(this._state=this._data.condition())},e}();e.RedNode=i,__reflect(i.prototype,"vitamin.red.RedNode");var n=function(){function t(){}return t.create=function(t,e){var i=this;e||(e=this._root);var n=e.add(t);this.map[n.name]=n,n.forEach(function(t){i.map[t.name]=t})},Object.defineProperty(t,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.forEach=function(t,e){t.forEach(e)},t.get=function(t){return this.map[t]},t.refesh=function(t){var e=t instanceof i?t:this.get(t);e&&e.refesh()},t.bind=function(t,e){var n=t instanceof i?t:this.get(t);n&&n.bind(e)},t._root=new i({name:"root",children:[]},null),t.map={},t}();e.RedTree=n,__reflect(n.prototype,"vitamin.red.RedTree")}(e=t.red||(t.red={}))}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){}return e.create=function(i){var n=t.ObjectPool.from(e);return n.initialize(i),n},e.prototype.initialize=function(t){return this.name=t,this},e.prototype.uninitialize=function(){if(this.name=null,this.targets=null,this.transitions)for(var e in this.transitions){var i=this.transitions[e];i&&(i.uninitialize(),t.ObjectPool.to(i))}this.transitions=null,this.next=void 0,this._callbacks&&this._callbacks.clear()},e.prototype.on=function(e,i){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];this._callbacks||(this._callbacks=new t.Handlers),this._callbacks.add(e,i,n,!1)},e.prototype.off=function(t,e){this._callbacks&&this._callbacks.remove(t,e)},e.prototype.once=function(e,i){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];this._callbacks||(this._callbacks=new t.Handlers),this._callbacks.add(e,i,n,!0)},e.prototype.bind=function(t){this.handler=t},e.prototype.exec=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.handler&&this.handler.apply(this,[this].concat(t)),this._callbacks&&this._callbacks.run()},e.prototype.link=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.targets||(this.targets=[]),-1==this.targets.indexOf(t)&&this.targets.push(t);for(var n=0,r=e;n<r.length;n++){var o=r[n];-1==this.targets.indexOf(o)&&this.targets.push(o)}return this},e.prototype.linkAny=function(){return this.link("any")},e.prototype.linkOthers=function(){return this.link("others")},e.prototype.checkTarget=function(t){return this.targets.indexOf(e.ANY)>=0?!0:this.targets.indexOf(e.OTHERS)>=0&&t!=this.name?!0:this.targets.indexOf(t)>=0},e.prototype.trans=function(e,i,n){this.transitions||(this.transitions={});var r=t.ObjectPool.from(t.StateTransition,!0,i);n&&r.setCancel(n);for(var o=0,a=e;o<a.length;o++){var s=a[o];this.transitions[s]=r}return this},e.prototype.transduration=function(e,i){this.transitions||(this.transitions={});var n=t.ObjectPool.from(t.DurationTransition);n.duration=i;for(var r=0,o=e;r<o.length;r++){var a=o[r];this.transitions[a]=n}return this},e.prototype.getTransition=function(t){return this.transitions?this.transitions[t]:null},e.prototype.linkTo=function(t){return this.link(t),this.next=t,this},e.prototype.recorver=function(){t.ObjectPool.to(this,!0)},e.ANY="any",e.OTHERS="others",e}();t.State=e,__reflect(e.prototype,"vitamin.State",["vitamin.IPool"]);var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.link=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return this},e.prototype.transition=function(t,e,i){return this},e.prototype.transitionDuration=function(t,e){return this},e.prototype.checkTarget=function(t){return!0},e.prototype.getTransition=function(t){return null},e.prototype.recorver=function(){},e}(e);t.AnyState=i,__reflect(i.prototype,"vitamin.AnyState")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.debug=!1,i._states=new Map,i._anyState=new t.AnyState,i._anyState.initialize("any"),i}return __extends(i,e),i.create=function(e){var n=t.ObjectPool.from(i);return n.initialize(e),n},Object.defineProperty(i.prototype,"name",{get:function(){return this._options?this._options.name:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"exit",{get:function(){return this._options?this._options.exit:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"transitionCanCancel",{get:function(){return this._options&&this._options.transitionCanCancel},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"curState",{get:function(){return this._curState},enumerable:!0,configurable:!0}),i.prototype.initialize=function(t){this._options=t,this._curState=this._anyState},i.prototype.uninitialize=function(){for(var e in this._states){var i=this._states[e];t.ObjectPool.to(i,!0)}this._states.clear(),this._curState=null},i.prototype.create=function(e,i){var n=t.State.create(e);return this._states.set(e,n),i&&n.bind(i),n},i.prototype.setTransition=function(e,i,n,r){var o=this.get(e);if(!o)return void t.error("设置过渡,未找到from状态:"+e);var a=this.get(i);return a?void("function"==typeof n?o.trans([i],n,r):o.transduration([i],n)):void t.error("设置过渡,未找到to状态:"+i)},i.prototype.setDefault=function(e,i,n,r){var o=this.get(e);if(!o)return void t.error("设置默认切换状态,未找到状态:"+e);var a=this.get(i);return a?(o.linkTo(i),void(n&&this.setTransition(e,i,n,r))):void t.error("设置默认切换状态,未找到to状态:"+i)},i.prototype.has=function(t){return this._states.has(t)},i.prototype.get=function(t){return this._states.get(t)},i.prototype.start=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._enable=!0,t&&this.state.apply(this,[t].concat(e))},i.prototype.stop=function(){this._curTransition&&(this._curTransition.cancel(),this._curTransition=null),this._curState=this._anyState,this._enable=!1},i.prototype.state=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];if(this.debug&&t.debug("准备切换状态"+e+"..."),!this._enable)return void t.error("状态机enable false!");if(!this._states.has(e))return void t.error("状态机没有该状态:",e);if(!this.transitionCanCancel&&this._curTransition)return void(this.debug&&t.error("当前具有Transition,且无法取消,状态"+e+"切换失败!"));if(this._curState.checkTarget(e)){this._curTransition&&(this._curTransition.cancel(),this._curTransition=null);var r=this._curState.getTransition(e);if(!r)return void this.applyState.apply(this,[e].concat(i));this._curTransition=r,(o=this._curTransition).exec.apply(o,[this.applyState.bind(this,e)].concat(i))}else this.debug&&(this._curState.name==e?t.warn("当前状态已是状态"+e+"."):t.error("状态检查失败,当前状态为"+this._curState.name+",状态"+e+"切换失败!"));var o},i.prototype.applyState=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];if(!this._states.has(e))return void t.error("状态机没有该状态:",e);this._curTransition=null,this._curState=this._states.get(e),(r=this._curState).exec.apply(r,i),this.debug&&t.info("状态"+e+"切换成功!"),this.dispatchEventWith(egret.Event.CHANGE,!1),this._curState.next&&(this.debug&&t.info("具有指向状态,开始切换"+e+"..."),this.state(this._curState.next));var r},i.prototype.on=function(t,e,i){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];var o=this.get(t);o&&o.on(e,i,n)},i.prototype.off=function(t,e,i){var n=this.get(t);n&&n.off(e,i)},i.prototype.once=function(t,e,i){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];var o=this.get(t);o&&o.once(e,i,n)},i.prototype.recorver=function(){t.ObjectPool.to(this,!0)},i}(t.EventDispatcher);t.StateMachine=e,__reflect(e.prototype,"vitamin.StateMachine",["vitamin.IPool"])}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){this._list=[]}return e.create=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var r=t.ObjectPool.from(e);return r.initialize.apply(r,i),r},e.prototype.initialize=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var n=0;n<e.length;n++)this._list[n]=t.StateMachine.create(e[n])},e.prototype.uninitialize=function(){for(var e=0,i=this._list;e<i.length;e++){var n=i[e];n.stop(),n.uninitialize(),t.ObjectPool.to(n)}this._list.length=0},Object.defineProperty(e.prototype,"current",{get:function(){return this._cur},enumerable:!0,configurable:!0}),e.prototype.get=function(t){return this._list.find(function(e){return e.name==t})},e.prototype.getUseState=function(t){return this._list.find(function(e){return e.has(t)})},e.prototype.enter=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var r=this._list.find(function(e){return e.name==t});this._cur!=r&&(this._cur&&(this._cur.stop(),this._cur.exit&&this._cur.exit(this._cur.curState)),this._cur=r),this._cur&&(o=this._cur).start.apply(o,[e].concat(i));var o},e.prototype.state=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];this._cur&&this._cur.name==t&&(r=this._cur).state.apply(r,[e].concat(i));var r},e.prototype.stop=function(){this._cur&&this._cur.stop()},e.prototype.reset=function(){this.stop(),this._cur=null},e}();t.StateMachineGroup=e,__reflect(e.prototype,"vitamin.StateMachineGroup",["vitamin.IPool"])}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(){}return t.prototype.initialize=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return this.execHandler=t,this.execParams=e,this},t.prototype.setCancel=function(t){this.cancelHandler=t},t.prototype.uninitialize=function(){this.execHandler=null,this.execParams=null,this.cancelHandler=null,this.complete=null},t.prototype.exec=function(t){for(var e=this,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.complete=t;var r=i.length?i:this.execParams;this.execHandler.apply(this,r).then(function(){e.complete&&e.complete()})},t.prototype.cancel=function(){this.complete=null,this.cancelHandler&&this.cancelHandler()},t}();t.StateTransition=e,__reflect(e.prototype,"vitamin.StateTransition",["vitamin.IPool"]);var i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.exec=function(e,i){this.complete=e,i=void 0!=i?i:this.duration,this.wait(Array.isArray(i)?t.MathUtil.randRange(i[0],i[1]):i)},i.prototype.cancel=function(){this.complete=null,this.waitCancel()},i.prototype.wait=function(e){t.timer.once(e,this,this.waitOver)},i.prototype.waitOver=function(){this.complete&&this.complete()},i.prototype.waitCancel=function(){t.timer.clear(this,this.waitOver)},i}(e);t.DurationTransition=i,__reflect(i.prototype,"vitamin.DurationTransition")}(vitamin||(vitamin={}));var vitamin;!function(t){var e;!function(t){t.IDLE="idle",t.RUN="run",t.ATTACK1="attack1",t.ATTACK2="attack2",t.ATTACK3="attack3",t.ATTACK4="attack4",t.HURT="hurt1",t.DEAD="dead",t.STUN="stun",t.WIN="win"}(e=t.TypeAction||(t.TypeAction={}))}(vitamin||(vitamin={}));var vitamin;!function(t){function e(t){switch(t){case i.TOP:return"top";case i.TOP_LEFT:return"topLeft";case i.TOP_RIGHT:return"topRight";case i.BOTTOM:return"bottom";case i.BOTTOM_LEFT:return"bottomLeft";case i.BOTTOM_RIGHT:return"bottomRight";case i.LEFT:return"left";case i.RIGHT:return"right";case i.CENTER:return"center";case i.TOP_AUTO:return"topAuto";case i.BOTTOM_AUTO:return"bottomAuto"}return""}var i;!function(t){t[t.TOP=1]="TOP",t[t.TOP_LEFT=2]="TOP_LEFT",t[t.TOP_RIGHT=3]="TOP_RIGHT",t[t.BOTTOM=4]="BOTTOM",t[t.BOTTOM_LEFT=5]="BOTTOM_LEFT",t[t.BOTTOM_RIGHT=6]="BOTTOM_RIGHT",t[t.LEFT=7]="LEFT",t[t.RIGHT=8]="RIGHT",t[t.CENTER=9]="CENTER",t[t.TOP_AUTO=10]="TOP_AUTO",t[t.BOTTOM_AUTO=11]="BOTTOM_AUTO"}(i=t.TypeAlign||(t.TypeAlign={})),t.getAlignName=e}(vitamin||(vitamin={}));var vitamin;!function(t){var e;!function(t){t[t.UP=0]="UP",t[t.RIGHT_UP=1]="RIGHT_UP",t[t.RIGHT=2]="RIGHT",t[t.RIGHT_DOWN=3]="RIGHT_DOWN",t[t.DOWN=4]="DOWN",t[t.LEFT_DOWN=5]="LEFT_DOWN",t[t.LEFT=6]="LEFT",t[t.LEFT_UP=7]="LEFT_UP"}(e=t.TypeDirection||(t.TypeDirection={}))}(vitamin||(vitamin={}));var vitamin;!function(t){var e;!function(t){t[t.WALK=0]="WALK",t[t.UNWALK=1]="UNWALK"}(e=t.TypeGridState||(t.TypeGridState={}))}(vitamin||(vitamin={})),Array.prototype.first=function(t){return void 0==t&&(t=0),this[t]},Object.defineProperty(Array.prototype,"first",{enumerable:!1}),Array.prototype.last=function(t){return void 0==t&&(t=0),this[this.length-1-t]},Object.defineProperty(Array.prototype,"last",{enumerable:!1}),Array.prototype.setFirst=function(t,e){return void 0==e&&(e=0),this[e]=t,t},Object.defineProperty(Array.prototype,"setFirst",{enumerable:!1}),Array.prototype.setLast=function(t,e){return void 0==e&&(e=0),this[this.length-1-e]=t,t},Object.defineProperty(Array.prototype,"setLast",{enumerable:!1}),Array.prototype.random=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0==t.length)return this[Math.random()*this.length>>0];for(var i=[],n=0,r=this;n<r.length;n++){var o=r[n];t.indexOf(o)>=0||i.push(o)}return i.length?i[Math.random()*i.length>>0]:null},Object.defineProperty(Array.prototype,"random",{enumerable:!1}),Array.prototype.randomIndex=function(){return Math.random()*this.length>>0},Object.defineProperty(Array.prototype,"randomIndex",{enumerable:!1}),Array.prototype.swap=function(t,e){if(0>t||t>=this.length)return!1;if(0>e||e>=this.length)return!1;if(t==e)return!1;var i=this[t],n=this[e];return this[t]=n,this[e]=i,!0},Object.defineProperty(Array.prototype,"swap",{enumerable:!1}),Array.prototype.swapElement=function(t,e){var i=this.indexOf(t),n=this.indexOf(e);return-1==i||-1==n?!1:(this[i]=e,this[n]=t,!0)},Object.defineProperty(Array.prototype,"swapElement",{enumerable:!1}),Array.prototype["delete"]=function(t){return this.splice(t,1)[0]},Object.defineProperty(Array.prototype,"delete",{enumerable:!1}),Array.prototype.insert=function(t,e){return this.splice(t,0,e),e
},Object.defineProperty(Array.prototype,"insert",{enumerable:!1}),Array.prototype.move=function(t,e){if(0>t||t>=this.length)return!1;if(0>e||e>=this.length)return!1;if(t==e)return!1;var i=this["delete"](t);return this.insert(e,i),!0},Object.defineProperty(Array.prototype,"move",{enumerable:!1}),Array.prototype.toHash=function(){for(var t={},e=0,i=this;e<i.length;e++){var n=i[e];t[n.key]=n.value}return t},Object.defineProperty(Array.prototype,"toHash",{enumerable:!1});var vitamin;!function(t){var e=function(){function e(){}return e.forEach=function(t,e){for(var i=Array.isArray(t),n=i?t.length:t,r=0;n>r&&!e(i?t[r]:r,r);r++);},e.find=function(t,e,i){if(null!=t)for(var n=0,r=t;n<r.length;n++){var o=r[n];if(o[e]==i)return o}return null},e.findArray=function(t,e,i){var n=[];if(null!=t)for(var r=0,o=t;r<o.length;r++){var a=o[r];a[e]==i&&n.push(a)}return n},e.findElement=function(t,e,i){if(null!=t&&null!=e&&e.length>0)for(var n=0,r=t;n<r.length;n++)for(var o=r[n],a=0,s=e;a<s.length;a++){var u=s[a];if(o[u]==i)return o}return null},e.equalElements=function(t,e){for(var i=0,n=0,r=0,o=t;r<o.length;r++){var a=o[r];i++;var s=!1;n=0;for(var u=0,c=e;u<c.length;u++){var l=c[u];a==l&&(s=!0),n++}if(!s)return!1}return i==n},e.findElementsArray=function(t,e,i){var n=[];if(null!=t&&null!=e&&e.length>0)for(var r=0,o=t;r<o.length;r++)for(var a=o[r],s=0,u=e;s<u.length;s++){var c=u[s];if(a[c]==i){n.push(a);break}}return n},e.findElementsVector=function(t,e,i){var n=null,r=null,o=[];if(null!=t&&null!=e&&e.length>0)for(var a=0,s=t;a<s.length;a++)for(var n=s[a],u=0,c=e;u<c.length;u++){var r=c[u];if(n[r]==i){o.push(n);break}}return o},e.findElement2=function(t,e,i){var n,r;if(null==t||null==e||null==i)return null;if(e.length!=i.length)throw new Error("Key's length must equal value's length!");for(var o=0,a=t;o<a.length;o++){var s=a[o];for(n=e.length,r=0;n>r&&s[e[r]]==i[r];){if(r==n-1)return s;r++}}return null},e.getRandomItem=function(e){var i=t.MathUtil.randRange(0,e.length-1);return e[i]},e.arrayToObject=function(t,e){if(null==t)return null;for(var i={},n=0,r=t;n<r.length;n++){var o=r[n];i[o[e]]=o}return i},e.arrayToObjectMultiKey=function(t,e,i){void 0===i&&(i="_");var n,r,o=null;if(null==t)return null;for(var a={},s=0,u=t;s<u.length;s++){var c=u[s];for(o="",n=e.length,r=0;n>r;)o+=c[e[r]],r!=n-1&&(o+=i),r++;a[o]=c}return a},e.dispose=function(t){t.length=0},e.addElements=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n;if(null!=t)for(var r=0,o=e;r<o.length;r++){var a=o[r];n=t.indexOf(a),-1==n&&t.push(a)}},e.removeElements=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n;if(null!=t)for(var r=0,o=e;r<o.length;r++){var a=o[r];n=t.indexOf(a),-1!=n&&t.splice(n,1)}},e.shuffle=function(t){t=t,t.sort(function(){var t=Math.random()-.5;return t>0?1:-1})},e.sortByName=function(t,e){void 0===e&&(e="name");var i=t.map(function(t){var i=e?t[e]:t,n=parseInt(i.match(/[0-9]/g).join(""));return{element:t,order:n}});i.sort(function(t,e){return t.order>e.order?1:-1});for(var n=0;n<t.length;n++)t[n]=i[n].element;return t},e.copyAndFill=function(t,e,i,n){void 0===i&&(i=","),void 0===n&&(n=null);var r,o=null;n||(n=Number);var a=t.concat(),s=e.split(i),u=Math.min(a.length,s.length);for(r=0;u>r;)o=s[r],a[r]=n("true"==o?!0:"false"==o?!1:o),r++;return a},e.concatArray=function(t,e){if(!e)return t;if(!t)return e;var i,n=e.length;for(i=0;n>i;i++)t.push(e[i]);return t},e.clearArray=function(t){return t?(t.length=0,t):t},e.copyArray=function(t,e){if(t||(t=[]),!e)return t;t.length=e.length;var i,n=e.length;for(i=0;n>i;i++)t[i]=e[i];return t},e.random=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t[Math.random()*t.length>>0]},e.randomByExcepts=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(0==e.length)return t[Math.random()*t.length>>0];for(var n=[],r=0,o=t;r<o.length;r++){var a=o[r];e.indexOf(a)>=0||n.push(a)}return n[Math.random()*n.length>>0]},e.findIndexByProperty=function(t,e,i){for(var n=0;n<t.length;n++)if(t[n][e]==i)return n;return-1},e.swap=function(t,e,i){var n=t[e],r=t[i];t[e]=r,t[i]=n},e["for"]=function(t,e,i){void 0===i&&(i=0);for(var n=i;e>n;n++)t(n)},e.map=function(t,e,i){void 0===i&&(i=0);for(var n=[],r=i;e>r;r++)n.push(t(r));return n},e.move=function(t,e,i){if(i>e){if(i>=t.length)return void t.push(t.splice(e,1)[0]);t.splice(i+1,0,t[e]),t.splice(e,1)}else{if(e>=t.length)return;if(0>=i)return void t.unshift(t.splice(e,1)[0]);var n=t.splice(e,1)[0];t.splice(i,0,n)}},e}();t.ArrayUtil=e,__reflect(e.prototype,"vitamin.ArrayUtil")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(){}return t.quadraticPoint=function(t,e,i,n,r,o,a,s){return s=s?s:new egret.Point,s.setTo(this.quadratic(t,e,n,o),this.quadratic(t,i,r,a)),s},t.quadratic=function(t,e,i,n){return Math.pow(1-t,2)*e+2*t*(1-t)*i+Math.pow(t,2)*n},t.cubicPoint=function(t,e,i,n,r,o,a,s,u,c){return c=c?c:new egret.Point,c.setTo(this.cubic(t,e,n,o,s),this.cubic(t,i,r,a,u)),c},t.cubic=function(t,e,i,n,r){return Math.pow(1-t,3)*e+3*i*t*(1-t)*(1-t)+3*n*t*t*(1-t)+r*Math.pow(t,3)},t}();t.BezierUtil=e,__reflect(e.prototype,"vitamin.BezierUtil")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(){}return t.random=function(){return Math.floor(16777215*Math.random())},t.toBright=function(t,e){void 0===e&&(e=102);var i=this.extract(t);return this.merge(i[0]+e,i[1]+e,i[2]+e)},t.toDark=function(t,e){void 0===e&&(e=102);var i=this.extract(t);return this.merge(i[0]-e,i[1]-e,i[2]-e)},t.extract=function(t){return[(16711680&t)>>16,(65280&t)>>8,255&t]},t.extract32=function(t){return[t>>24&255,(16711680&t)>>16,(65280&t)>>8,255&t]},t.merge=function(t,e,i){return t>255&&(t=255),e>255&&(e=255),i>255&&(i=255),0>t&&(t=0),0>e&&(e=0),0>i&&(i=0),t<<16|e<<8|i},t.merge32=function(t,e,i,n){return t>255&&(t=255),e>255&&(e=255),i>255&&(i=255),n>255&&(n=255),0>t&&(t=0),0>e&&(e=0),0>i&&(i=0),0>n&&(n=0),t<<24|e<<16|i<<8|n},t.add=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=null;n=this.extract(t);for(var r=n[0],o=n[1],a=n[2],s=0,u=e;s<u.length;s++){var c=u[s];n=this.extract(c),r+=n[0],o+=n[1],a+=n[2]}return this.merge(r,o,a)},t.sub=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=null;n=this.extract(t);for(var r=n[0],o=n[1],a=n[2],s=0,u=e;s<u.length;s++){var c=u[s];n=this.extract(c),r-=n[0],o-=n[1],a-=n[2]}return this.merge(r,o,a)},t.extractAlphaFrom32=function(t){return t>>24},t.toHex=function(t){if(0>t||isNaN(t))return null;for(var e=t.toString(16);e.length<6;)e="0"+e;return"#"+e},t}();t.ColorUtil=e,__reflect(e.prototype,"vitamin.ColorUtil")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(){}return t.formateToString=function(t){if("string"==typeof t){var e=t.replace(/T/," ");return e.substring(0,e.lastIndexOf("."))}return"number"==typeof t?this.formatDateFromSeconds(t/1e3>>0):void 0},t.addZero=function(t,e){return void 0===e&&(e=10),(e>t?"0":"")+t},t.formatDate=function(t,e,i,n){void 0===e&&(e=!1),void 0===i&&(i="-"),void 0===n&&(n=":");var r=this.addZero(this.UTCEnabled?t.getUTCFullYear():t.getFullYear()),o=this.addZero((this.UTCEnabled?t.getUTCMonth():t.getMonth())+1),a=this.addZero(this.UTCEnabled?t.getUTCDate():t.getDate()),s=this.addZero(this.UTCEnabled?t.getUTCHours():t.getHours()),u=this.addZero(this.UTCEnabled?t.getUTCMinutes():t.getMinutes()),c=this.addZero(this.UTCEnabled?t.getUTCSeconds():t.getSeconds()),l="";return l=l+r+i+o+i+a,e||(l=l+" "+s+n+u+n+c),l},t.formatDateFromSeconds=function(t,e,i,n){return void 0===e&&(e=!1),void 0===i&&(i="-"),void 0===n&&(n=":"),this.formatDateFromMilliseconds(1e3*t,e,i,n)},t.formatDateFromMilliseconds=function(t,e,i,n){return void 0===e&&(e=!1),void 0===i&&(i="-"),void 0===n&&(n=":"),this.formatDate(new Date(t),e,i,n)},t.formatTimeFromSeconds=function(t,e,i){return void 0===e&&(e=":"),void 0===i&&(i=!0),this.formatTimeFromMilliseconds(1e3*t,e,i)},t.formatTimeFromMilliseconds=function(t,e,i){void 0===e&&(e=":"),void 0===i&&(i=!0);var n=new Date(t),r=this.addZero(this.UTCEnabled?n.getUTCHours():n.getHours()),o=this.addZero(this.UTCEnabled?n.getUTCMinutes():n.getMinutes()),a=this.addZero(this.UTCEnabled?n.getUTCSeconds():n.getSeconds());return!i||r?r+e+o+e+a:o+e+a},t.formatDateInChinese=function(t,e){void 0===e&&(e=!1);var i=this.UTCEnabled?t.getUTCFullYear():t.getFullYear(),n=(this.UTCEnabled?t.getUTCMonth():t.getMonth())+1,r=this.UTCEnabled?t.getUTCDate():t.getDate(),o=this.addZero(this.UTCEnabled?t.getUTCHours():t.getHours()),a=this.addZero(this.UTCEnabled?t.getUTCMinutes():t.getMinutes()),s=this.addZero(this.UTCEnabled?t.getUTCSeconds():t.getSeconds()),u=i+this.date_year+n+this.date_month+r+this.date_day;return e||(u=u+" "+o+":"+a+":"+s),u},t.formatDateFromSecondsInChinese=function(t,e){return void 0===e&&(e=!1),this.formatDateInChinese(new Date(1e3*t),e)},t.formatTimeLeft=function(t,e,i){void 0===e&&(e=":"),void 0===i&&(i=!0);var n=t,r=n/3600>>0,o=this.addZero(r);n%=3600;var a=this.addZero(n/60>>0);n%=60;var s=this.addZero(n);return i||r?o+e+a+e+s:a+e+s},t.formatTimeLeftInChinese=function(t,e,i,n,r,o){void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===r&&(r=!0),void 0===o&&(o=!1);var a=t;if(0>=a)return"";var s=a/86400>>0;a%=86400;var u=a/3600>>0;a%=3600;var c=a/60>>0;a%=60;var l=a,h="";return e&&s>0&&(h=h+s+this.time_day,o)?h:i&&u>0&&(h=h+u+this.time_hour,o)?h:n&&c>0&&(h=h+c+this.time_minute,o)?h:r&&l>0&&(h=h+l+this.time_second,o)?h:h},t.getZeroTime=function(t){var e=new Date(1e3*t);return.001*new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()},t.formatTime=function(t,e){return void 0===e&&(e="YYYY-MM-DD hh:mm:ss"),e=e||"YYYY-MM-DD hh:mm:ss",this.tempDate=new Date(1e3*t),e.replace(/YYYY|EMM|EM|MM|DD|hh|mm|ss|EWW|EW|CW|CYYYY|CMM|CDD|Chh|Cmm|Css/g,this.matchTime)},t.uintToFixed=function(t,e){var i;for(e=e||1,this.tempZeros.length=0,i=0;e>i;)this.tempZeros[i]=0,i++;return(this.tempZeros.join("")+t.toString()).slice(-e)},t.matchTime=function(t){var e="";switch(t){case"YYYY":e=(this.UTCEnabled?this.tempDate.getUTCFullYear():this.tempDate.getFullYear()).toString();break;case"EMM":e=this.month1[this.UTCEnabled?this.tempDate.getUTCMonth():this.tempDate.getMonth()];break;case"EM":e=this.month2[this.UTCEnabled?this.tempDate.getUTCMonth():this.tempDate.getMonth()];break;case"MM":e=this.uintToFixed((this.UTCEnabled?this.tempDate.getUTCMonth():this.tempDate.getMonth())+1,2);break;case"DD":e=this.uintToFixed(this.UTCEnabled?this.tempDate.getUTCDate():this.tempDate.getDate(),2);break;case"hh":e=this.uintToFixed(this.UTCEnabled?this.tempDate.getUTCHours():this.tempDate.getHours(),2);break;case"mm":e=this.uintToFixed(this.UTCEnabled?this.tempDate.getUTCMinutes():this.tempDate.getMinutes(),2);break;case"ss":e=this.uintToFixed(this.UTCEnabled?this.tempDate.getUTCSeconds():this.tempDate.getSeconds(),2);break;case"EWW":e=this.week1[this.UTCEnabled?this.tempDate.getUTCDay():this.tempDate.getDay()];break;case"EW":e=this.week2[this.UTCEnabled?this.tempDate.getUTCDay():this.tempDate.getDay()];break;case"CW":e=this.week3[this.UTCEnabled?this.tempDate.getUTCDay():this.tempDate.getDay()];break;case"CYYYY":e=(this.UTCEnabled?this.tempDate.getUTCFullYear():this.tempDate.getUTCFullYear())+this.date_year;break;case"CMM":e=this.uintToFixed((this.UTCEnabled?this.tempDate.getUTCMonth():this.tempDate.getUTCMonth())+1,2)+this.date_month;break;case"CDD":e=this.uintToFixed(this.UTCEnabled?this.tempDate.getUTCDate():this.tempDate.getUTCDate(),2)+this.date_day;break;case"Chh":e=this.uintToFixed(this.UTCEnabled?this.tempDate.getUTCHours():this.tempDate.getUTCHours(),2)+this.date_hour;break;case"Cmm":e=this.uintToFixed(this.UTCEnabled?this.tempDate.getUTCMinutes():this.tempDate.getUTCMinutes(),2)+this.date_minute;break;case"Css":e=this.uintToFixed(this.UTCEnabled?this.tempDate.getUTCSeconds():this.tempDate.getUTCSeconds(),2)+this.date_second}return e},t.getOffLineTimeState=function(t){var e=t/86400,i="";return i=e>180?"半年前":e>90?"三个月前":e>60?"两个月前":e>30?"一个月前":e>14?"两周前":e>7?"一周前":e>2?e+"天前":60>t?"小于一分钟":this.formatTimeLeftInChinese(t,!0,!0,!0,!1)},t.UTCEnabled=!1,t.date_year="年",t.date_month="月",t.date_day="日",t.date_hour="时",t.date_minute="分",t.date_second="秒",t.time_day="天",t.time_hour="小时",t.time_minute="分钟",t.time_second="秒",t.tempZeros=[],t.week1=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t.week2=["Sun.","Mon.","Tues.","Wed.","Thurs.","Fri.","Sat."],t.week3=["日","一","二","三","四","五","六"],t.month1=["January","February","March","April","May","June","July","August","September","October","November","December"],t.month2=["Jan.","Feb.","Mar.","Apr.","Ma.","Jun.","Jul.","Aug.","Sept.","Oct.","Nov.","Dec."],t}();t.DateUtil=e,__reflect(e.prototype,"vitamin.DateUtil")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){}return e.prototype.watchSet=function(e,i,n){var r=t.ObjectUtil.getSetter(e,i);if(r){var o=t.ObjectUtil.getGetter(e,i);Object.defineProperty(e,i,{set:function(t){n(t),r.call(this,t)},get:function(){return o.call(this)}})}else{var a=e[i];Object.defineProperty(e,i,{set:function(t){n(t),a=t},get:function(){return a}})}},e}();t.DebugUtil=e,__reflect(e.prototype,"vitamin.DebugUtil")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){}return e.getDirections=function(){return[0,1,2,3,4,5,6,7]},e.getDirectionsName=function(e){switch(e){case t.TypeDirection.UP:return"UP";case t.TypeDirection.RIGHT_UP:return"RIGHT_UP";case t.TypeDirection.RIGHT:return"RIGHT";case t.TypeDirection.RIGHT_DOWN:return"RIGHT_DOWN";case t.TypeDirection.DOWN:return"DOWN";case t.TypeDirection.LEFT_DOWN:return"LEFT_DOWN";case t.TypeDirection.LEFT:return"LEFT";case t.TypeDirection.LEFT_UP:return"LEFT_UP"}},e.isNeedRevert=function(t){return t>4},e.getCopyDirection=function(e){switch(e){case t.TypeDirection.UP:return t.TypeDirection.DOWN;case t.TypeDirection.RIGHT_UP:return t.TypeDirection.LEFT_UP;case t.TypeDirection.RIGHT:return t.TypeDirection.LEFT;case t.TypeDirection.RIGHT_DOWN:return t.TypeDirection.LEFT_DOWN;case t.TypeDirection.LEFT_DOWN:return t.TypeDirection.RIGHT_DOWN;case t.TypeDirection.LEFT:return t.TypeDirection.RIGHT;case t.TypeDirection.LEFT_UP:return t.TypeDirection.RIGHT_UP;case t.TypeDirection.DOWN:return t.TypeDirection.UP}return t.TypeDirection.UP},e.getOppositeDirection8=function(t){return this.toDirection8(t+4)},e.getOppositeDirection4=function(t){return this.toDirection4(t+2)},e.getPrevDirection8=function(t,e){return void 0===e&&(e=1),this.toDirection8(t-e)},e.getPrevDirection4=function(t,e){return void 0===e&&(e=1),this.toDirection4(t-e)},e.getNextDirection8=function(t,e){return void 0===e&&(e=1),this.toDirection8(t+e)},e.getNextDirection4=function(t,e){return void 0===e&&(e=1),this.toDirection4(t+e)},e.toDirection8=function(t){return 0>t&&(t+=8),t%=8},e.toDirection4=function(t){return t%=4,0>t&&(t+=4),t},e.getDirection2=function(e,i,n,r){return n>=e?t.TypeDirection.RIGHT:t.TypeDirection.LEFT},e.getDirection4=function(e,i,n,r){var o=this.getDirection8(e,i,n,r);return o==t.TypeDirection.DOWN?o=e>n?t.TypeDirection.LEFT_DOWN:t.TypeDirection.RIGHT_DOWN:o==t.TypeDirection.UP?o=e>n?t.TypeDirection.LEFT_UP:t.TypeDirection.RIGHT_UP:o==t.TypeDirection.RIGHT?o=i>r?t.TypeDirection.RIGHT_UP:t.TypeDirection.RIGHT_DOWN:o==t.TypeDirection.LEFT&&(o=i>r?t.TypeDirection.LEFT_UP:t.TypeDirection.LEFT_DOWN),o},e.getDirection8=function(e,i,n,r){if(e==n)return r>=i?t.TypeDirection.DOWN:t.TypeDirection.UP;if(i==r)return n>=e?t.TypeDirection.RIGHT:t.TypeDirection.LEFT;var o=t.MathUtil.getUAngle(n-e,r-i),a=(o+20)/45>>0;return a>7?0:a},e.getDirectionAngle=function(e){switch(e){case t.TypeDirection.UP:return 270;case t.TypeDirection.RIGHT_UP:return 315;case t.TypeDirection.RIGHT:return 0;case t.TypeDirection.RIGHT_DOWN:return 45;case t.TypeDirection.DOWN:return 90;case t.TypeDirection.LEFT_DOWN:return 135;case t.TypeDirection.LEFT:return 180;case t.TypeDirection.LEFT_UP:return 225;default:return 0}},e.getAngleDirection8=function(t){return(t+112.5)%360/45>>0},e.getAngleDirection4=function(t){return(t+135)%360/90>>0},e.getOffsetByPosition=function(t,e,i,n,r,o){void 0===r&&(r=1),void 0===o&&(o=null),o||(o=new egret.Point);var a=i-t,s=n-e;return a>0?o.x=r:0>a?o.x=-r:o.x=0,s>0?o.y=r:0>a?o.y=-r:o.y=0,o},e.getOffsetByDirection=function(e,i,n){switch(void 0===i&&(i=1),void 0===n&&(n=null),n?n.setTo(0,0):n=new egret.Point,e){case t.TypeDirection.UP:n.y=-i;break;case t.TypeDirection.RIGHT_UP:n.x=i,n.y=-i;break;case t.TypeDirection.RIGHT:n.x=i;break;case t.TypeDirection.RIGHT_DOWN:n.x=i,n.y=i;break;case t.TypeDirection.DOWN:n.y=i;break;case t.TypeDirection.LEFT_DOWN:n.x=-i,n.y=i;break;case t.TypeDirection.LEFT:n.x=-i;break;case t.TypeDirection.LEFT_UP:n.x=-i,n.y=-i}return n},e}();t.DirectionUtil=e,__reflect(e.prototype,"vitamin.DirectionUtil")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){}return e.gray=function(t,e){void 0===e&&(e=!0),e?this.addFilter(t,this.GRAY_FILTER1):this.removeFilter(t,this.GRAY_FILTER1)},e.getColorFilter=function(e,i){var n=t.ColorUtil.extract(e),r=n[0],o=n[1],a=n[2];return this.getColorMatrixFilter(r,o,a,i)},e.getColorMatrixFilter=function(t,e,i,n){return this.gMatrixArray=[n,0,0,0,t,0,n,0,0,e,0,0,n,0,i,0,0,0,1,0],new egret.ColorMatrixFilter(this.gMatrixArray)},e.removeChild=function(t,e,i){void 0===i&&(i=!1),null!=t&&null!=e&&t.contains(e)&&(t.removeChild(e),i&&(e.destroy?e.destroy():e.dispose&&e.dispose()))},e.removeAllChildren=function(t,e){void 0===e&&(e=!1);var i;if(null!=t)for(i=t.numChildren-1;i>-1;)this.removeChild(t,t.getChildAt(i),e),i--},e.center=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n=.5*(t.stage.stageWidth-t.width),r=.5*(t.stage.stageHeight-t.height);n+=e,r+=i,t.x=n,t.y=r},e.centerToParent=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n,r,o=t.parent;null!=o&&(n=.5*(o.width-t.width),r=.5*(o.height-t.height),n+=e,r+=i,t.x=n,t.y=r)},e.addFilter=function(t,e){var i=t.filters||[];i.indexOf(e)>=0||(i.push(e),t.filters=i)},e.removeFilter=function(t,e){var i=t.filters;if(i){for(var n=(i.length,!1),r=0;r<i.length;r++){var o=i[r];if(o==e){i.splice(r,1),n=!0;break}}if(!n)for(var a=egret.getDefinitionByName(egret.getQualifiedClassName(e)),r=0;r<i.length;r++){var o=i[r];if(o instanceof a){i.splice(r,1),n=!0;break}}n&&(t.filters=i)}},e.clearFilter=function(t){var e=t.filters;e&&(e.length&&(e.length=0),t.filters=e)},e.getFilter=function(t,e){for(var i=null,n=t.filters,r=(n.length,0),o=n;r<o.length;r++){var i=o[r];if(i instanceof e)return i}return null},e.getNearestAngle=function(t,e){var i=e;return i=(i+360)%360,Math.abs(i-t)>180&&(i>t?i-=360:i+=360),i},e.GRAY_FILTER1=new egret.ColorMatrixFilter([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0]),e.GRAY_FILTER2=new egret.ColorMatrixFilter([.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0]),e.BLACK_FILTER=new egret.ColorMatrixFilter([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0]),e.HIGHT_LIGHT_FILTER=new egret.ColorMatrixFilter([1,0,0,0,128,0,1,0,0,128,0,0,1,0,128,0,0,0,1,0]),e.SHADOW_FILTER=new egret.GlowFilter(0,4,3,3),e.SIDE_FILTER=new egret.GlowFilter(0,1,2,2,3,2,!1,!1),e.gMatrixArray=[],e.gMatrix=new egret.Matrix,e.gRect=new egret.Rectangle,e.gPoint=new egret.Point,e}();t.DisplayUtil=e,__reflect(e.prototype,"vitamin.DisplayUtil")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(){}return t.linearNone=function(t,e,i,n){return i*t/n+e},t.bounceIn=function(t,e,i,n){return i-this.bounceOut(n-t,0,i,n)+e},t.bounceInOut=function(t,e,i,n){return.5*n>t?.5*this.bounceIn(2*t,0,i,n)+e:.5*this.bounceOut(2*t-n,0,i,n)+.5*i+e},t.bounceOutIn=function(t,e,i,n){return.5*n>t?.5*this.bounceOut(2*t-n,0,i,n)+.5*i+e:.5*this.bounceIn(2*t,0,i,n)+e},t.bounceOut=function(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},t.backIn=function(t,e,i,n,r){return void 0===r&&(r=1.70158),i*(t/=n)*t*((r+1)*t-r)+e},t.backInOut=function(t,e,i,n,r){return void 0===r&&(r=1.70158),(t/=.5*n)<1?.5*i*(t*t*(((r*=1.525)+1)*t-r))+e:i/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e},t.backOutIn=function(t,e,i,n,r){return void 0===r&&(r=1.70158),(t/=.5*n)<1?i/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e:.5*i*(t*t*(((r*=1.525)+1)*t-r))+e},t.backOut=function(t,e,i,n,r){return void 0===r&&(r=1.70158),i*((t=t/n-1)*t*((r+1)*t+r)+1)+e},t.elasticIn=function(t,e,i,n,r,o){void 0===r&&(r=0),void 0===o&&(o=0);var a;return 0==t?e:1==(t/=n)?e+i:(o||(o=.3*n),!r||i>0&&i>r||0>i&&-i>r?(r=i,a=o/4):a=o/this.PI2*Math.asin(i/r),-(r*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*this.PI2/o))+e)},t.elasticInOut=function(t,e,i,n,r,o){void 0===r&&(r=0),void 0===o&&(o=0);var a;return 0==t?e:2==(t/=.5*n)?e+i:(o||(o=n*(.3*1.5)),!r||i>0&&i>r||0>i&&-i>r?(r=i,a=o/4):a=o/this.PI2*Math.asin(i/r),1>t?-.5*(r*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*this.PI2/o))+e:r*Math.pow(2,-10*(t-=1))*Math.sin((t*n-a)*this.PI2/o)*.5+i+e)},t.elasticOutIn=function(t,e,i,n,r,o){void 0===r&&(r=0),void 0===o&&(o=0);var a;return 0==t?e:2==(t/=.5*n)?e+i:(o||(o=n*(.3*1.5)),!r||i>0&&i>r||0>i&&-i>r?(r=i,a=o/4):a=o/this.PI2*Math.asin(i/r),1>t?r*Math.pow(2,-10*(t-=1))*Math.sin((t*n-a)*this.PI2/o)*.5+i+e:-.5*(r*Math.pow(2,10*(t-=1))*Math.sin((t*n-a)*this.PI2/o))+e)},t.elasticOut=function(t,e,i,n,r,o){void 0===r&&(r=0),void 0===o&&(o=0);var a;return 0==t?e:1==(t/=n)?e+i:(o||(o=.3*n),!r||i>0&&i>r||0>i&&-i>r?(r=i,a=o/4):a=o/this.PI2*Math.asin(i/r),r*Math.pow(2,-10*t)*Math.sin((t*n-a)*this.PI2/o)+i+e)},t.strongIn=function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},t.strongInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t*t*t+e:.5*i*((t-=2)*t*t*t*t+2)+e},t.strongOutIn=function(t,e,i,n){return(t/=.5*n)<1?.5*i*((t-=2)*t*t*t*t+2)+e:.5*i*t*t*t*t*t+e},t.strongOut=function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},t.sineInOut=function(t,e,i,n){return.5*-i*(Math.cos(Math.PI*t/n)-1)+e},t.sineOutIn=function(t,e,i,n){return(t/=.5*n)<1?i*Math.sin(t/n*this.HALF_PI)+e:-i*Math.cos(t/n*this.HALF_PI)+i+e},t.sineIn=function(t,e,i,n){return-i*Math.cos(t/n*this.HALF_PI)+i+e},t.sineOut=function(t,e,i,n){return i*Math.sin(t/n*this.HALF_PI)+e},t.quintIn=function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},t.quintInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t*t*t+e:.5*i*((t-=2)*t*t*t*t+2)+e},t.quintOutIn=function(t,e,i,n){return(t/=.5*n)<1?.5*i*((t-=2)*t*t*t*t+2)+e:.5*i*t*t*t*t*t+e},t.quintOut=function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},t.quartIn=function(t,e,i,n){return i*(t/=n)*t*t*t+e},t.quartInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t*t+e:.5*-i*((t-=2)*t*t*t-2)+e},t.quartOutIn=function(t,e,i,n){return(t/=.5*n)<1?.5*-i*((t-=2)*t*t*t-2)+e:.5*i*t*t*t*t+e},t.quartOut=function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},t.cubicIn=function(t,e,i,n){return i*(t/=n)*t*t+e},t.cubicInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t+e:.5*i*((t-=2)*t*t+2)+e},t.cubicOutIn=function(t,e,i,n){return(t/=.5*n)<1?.5*i*((t-=2)*t*t+2)+e:.5*i*t*t*t+e},t.cubicOut=function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},t.quadIn=function(t,e,i,n){return i*(t/=n)*t+e},t.quadInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t+e:.5*-i*(--t*(t-2)-1)+e},t.quadOutIn=function(t,e,i,n){return(t/=.5*n)<1?.5*-i*(--t*(t-2)-1)+e:.5*i*t*t+e},t.quadOut=function(t,e,i,n){return-i*(t/=n)*(t-2)+e},t.expoIn=function(t,e,i,n){return 0==t?e:i*Math.pow(2,10*(t/n-1))+e-.001*i},t.expoInOut=function(t,e,i,n){return 0==t?e:t==n?e+i:(t/=.5*n)<1?.5*i*Math.pow(2,10*(t-1))+e:.5*i*(-Math.pow(2,-10*--t)+2)+e},t.expoOutIn=function(t,e,i,n){return 0==t?e:t==n?e+i:(t/=.5*n)<1?.5*i*(-Math.pow(2,-10*--t)+2)+e:.5*i*Math.pow(2,10*(t-1))+e},t.expoOut=function(t,e,i,n){return t==n?e+i:i*(-Math.pow(2,-10*t/n)+1)+e},t.circIn=function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},t.circInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*-i*(Math.sqrt(1-t*t)-1)+e:.5*i*(Math.sqrt(1-(t-=2)*t)+1)+e},t.circOutIn=function(t,e,i,n){return(t/=.5*n)<1?.5*i*(Math.sqrt(1-(t-=2)*t)+1)+e:.5*-i*(Math.sqrt(1-t*t)-1)+e},t.circOut=function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},t.HALF_PI=.5*Math.PI,t.PI2=2*Math.PI,t}();t.Ease=e,__reflect(e.prototype,"vitamin.Ease")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){}return e.registerRuntimeClass=function(e,i,n){var r=egret.getQualifiedClassName(e);r=t.StringUtil.getSuffix(r),i||(i=r),n||(n=r),fgui.UIObjectFactory.setPackageItemExtension("ui://"+i+"/"+n,e),e.prototype.__runtime__={packname:i,resname:n},egret.registerClass(e,r)},e.createRunTime=function(e,i,n){var r=egret.getQualifiedClassName(e);r=t.StringUtil.getSuffix(r),e.prototype.__runtime__||this.registerRuntimeClass(e,i?i:r,n?n:r);var o=e.prototype.__runtime__,a=fgui.UIPackage.createObject(o.packname,o.resname);return a},e.registerRuntimes=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=0;n<e.length;n++)this.registerRuntimeClass(e[n],t)},e.fromPool=function(i){return i?t.ObjectPool.fromConstructor(i,function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=i.prototype.__runtime__;return e.createRunTime(i,r.packname,r.resname)}):void 0},e.toPool=function(e){e&&t.ObjectPool.to(e)},e.getChildBundles=function(t,e,i,n){return void 0===n&&(n=1),"string"==typeof i&&(r=i.split("-").map(function(t){return parseInt(t)}),n=r[0],i=r[1]),Array.from({length:i-n+1},function(t,i){return""+e+(n+i)}).map(function(e){return t.getChild(e)});var r},e.isVaildCompDef=function(t){return!("n"==t.charAt(0)&&!Number.isNaN(Number(t.substring(1,t.length))))},e.mappingRef=function(t,e){for(var i=this,n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];e||(e=t),t._children.forEach(function(r){var o=r.name;i.isVaildCompDef(o)&&-1==n.indexOf(o)&&(e[o]=t.getChild(o))}),t._controllers.forEach(function(t){return e[t.name]=t}),t._transitions.forEach(function(t){return e[t.name]=t})},e.refreshGlistOnce=function(e,i,n){i instanceof t.ArrayCollection&&(i=i.array),e.itemRenderer&&(e.itemRenderer=null);var r=null,o=null;"function"==typeof n?r=n:(o=n,o||(o="data")),e.itemRenderer=function(t,e,i){return r?void r(i,t,e):void(i[o]=t[e])}.bind(this,i),r||t.ArrayUtil.forEach(e.numItems,function(t){var i=e.getChildAt(t);i[o]=null}),e.numItems=0,e.numItems=i.length,e.itemRenderer&&(e.itemRenderer=null)},e.bundleGComponents=function(t,e,i,n){void 0===n&&(n=1),"string"==typeof i&&(o=i.split("-").map(function(t){return parseInt(t)}),n=o[0],i=o[1]);var r=Array.from({length:i-n+1},function(t,i){return""+e+(n+i)});return r.map(function(e){var i=t.getChild(e);return i?i:t[e]});var o},e.__isVaildCompDefine=function(t){return!("n"==t.charAt(0)&&!Number.isNaN(Number(t.substring(1,t.length))))},e.mappingRefences=function(t,e){for(var i=this,n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];e||(e=t),t._children.forEach(function(r){var o=r.name;i.__isVaildCompDefine(o)&&!~n.indexOf(o)&&Object.defineProperty(e,o,{value:t.getChild(o)})}),t._controllers.forEach(function(t){return Object.defineProperty(e,t.name,{value:t})}),t._transitions.forEach(function(t){return Object.defineProperty(e,t.name,{value:t})})},e}();t.FguiUtil=e,__reflect(e.prototype,"vitamin.FguiUtil")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(){}return t.brightFilters=[new egret.ColorMatrixFilter([1,0,0,0,120,0,1,0,0,120,0,0,1,0,120,0,0,0,1,0])],t.sideFilters=[new egret.GlowFilter(0,1,2,2,3,2,!1,!1)],t.grayFilters=[new egret.ColorMatrixFilter([.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0])],t}();t.FilterUtil=e,__reflect(e.prototype,"vitamin.FilterUtil")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(){}return t.sequence=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return function(){for(var t=0;t<e.length;t++)e[t]()}.bind(t)},t}();t.FunctionUtil=e,__reflect(e.prototype,"vitamin.FunctionUtil")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(t){void 0===t&&(t=!1),this._list=[],this._once=t}return e.prototype.add=function(e,i,n,r){void 0===n&&(n=null),void 0===r&&(r=void 0),void 0==r&&(r=this._once);var o,a=this.indexOf(e,i);return a>=0?(o=this._list[a],o.args=n,o.once=r):(o=t.Handler.create(e,i,n,r),this._list.push(o)),o},e.prototype.addPriority=function(e,i,n,r){void 0===n&&(n=null),void 0===r&&(r=void 0),void 0==r&&(r=this._once);var o,a=this.indexOf(e,i);return a>=0?(o=this._list[a],o.args=n,o.once=r,this._list.splice(a,1),this._list.unshift(o)):(o=t.Handler.create(e,i,n,r),this._list.unshift(o)),o},e.prototype.remove=function(t,e){var i=this.indexOf(t,e);if(i>=0){var n=this._list[i];this._list.splice(i,1),n.recover()}},e.prototype.removeAll=function(t){for(var e=0;e<this._list.length;e++){var i=this._list[e];i.caller==t&&(this._list.splice(e,1),i.recover(),e--)}},e.prototype.clear=function(e){if(void 0===e&&(e=!1),this._list.length){if(e){for(var i=0,n=this._list;i<n.length;i++){var r=n[i];r.recover()}return void(this._list.length=0)}t.callLater(this,function(t){t.forEach(function(t){return t.recover()}),t.length=0},this._list.concat()),this._list.length=0}},e.prototype.run=function(){for(var t=this,e=t._list.concat(),i=0;i<t._list.length;i++){var n=t._list[i];n.once&&(t._list.splice(i,1),i--)}for(var r=0,o=e;r<o.length;r++){var n=o[r];n.run()}},e.prototype.runWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=this,n=i._list.concat(),r=0;r<i._list.length;r++){var o=i._list[r];o.once&&(i._list.splice(r,1),r--)}for(var a=0,s=n;a<s.length;a++){var o=s[a];o.runWith.apply(o,t)}},e.prototype.indexOf=function(t,e){for(var i=this._list,n=i.length,r=-1,o=0;n>o;o++){var a=i[o];if(a.caller==t&&a.method==e){r=o;break}}return r},e.prototype.getHandlerAt=function(t){return this._list[t]},Object.defineProperty(e.prototype,"length",{get:function(){return this._list?this._list.length:-1},enumerable:!0,configurable:!0}),e}();t.Handlers=e,__reflect(e.prototype,"vitamin.Handlers")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){}return e.toRadian=function(t){return t*this.PI2},e.toAngle=function(t){return t*this.PI},e.sin=function(t){return t>>=0,t=this.toLAngle(t),this.sinCache[t]||(this.sinCache[t]=Math.sin(this.toRadian(t))),this.sinCache[t]},e.cos=function(t){return t>>=0,t=this.toLAngle(t),this.cosCache[t]||(this.cosCache[t]=Math.cos(this.toRadian(t))),this.cosCache[t]},e.clamp=function(t,e,i){return Math.min(i,Math.max(e,t))},e.randRangPoint=function(e,i,n,r){void 0===n&&(n=0);var o=t.MathUtil.randRange(n,e-2*n),a=t.MathUtil.randRange(n,i-2*n);return r||(r=new egret.Point),r.x=o,r.y=a,r},e.randOutRangPoint=function(e,i,n,r){void 0===n&&(n=0);var o=t.MathUtil.randRange(-n,e+2*n),a=t.MathUtil.randRange(-n,i+2*n);return Math.random()>.5?o+=e/2*(o>e/2?1:-1):a+=i/2*(a>i/2?1:-1),r||(r=new egret.Point),r.x=o,r.y=a,r},e.randBool=function(){return Math.random()>.5},e.randSign=function(){return Math.random()>.5?1:-1},e.randRange=function(t,e){return Math.random()*(e-t+1)+t>>0},e.randRangeFloat=function(t,e){return Math.random()*(e-t)+t},e.roundFixed=function(t,e){if(e=this.rangeLimit(e,0,16),0==e)return t;var i=Math.pow(10,e);return Math.round(t*i)/i},e.floorFixed=function(t,e){if(e=this.rangeLimit(e,0,16),0==e)return t;var i=Math.pow(10,e);return Math.round(t*i-(t>>0)*i)/i},e.getRadian=function(t,e){return Math.atan2(e,t)},e.getAngle=function(t,e){return this.toAngle(this.getRadian(t,e))},e.getAngleExact=function(t,e){return 180*this.getRadian(t,e)/Math.PI},e.getAngleOffset=function(t,e){var i=e-t;return Math.abs(i)>180?(180-Math.abs(i)%180)*-this.sign(i):i},e.easeAngle=function(t,e,i){void 0===i&&(i=.5);var n=this.getAngleOffset(t,e);return t+=n*i,n},e.getLAngle=function(t,e){return this.toLAngle(this.toAngle(this.getRadian(t,e)))},e.getUAngle=function(t,e){var i=this.toAngle(this.getRadian(t,e));return 0>i&&(i+=360),i+=90,i%=360,i>>0},e.toLAngle=function(t){for(;0>t;)t+=360;return t%360},e.rangeLimit=function(t,e,i){return void 0===e&&(e=0/0),void 0===i&&(i=0/0),!isNaN(e)&&e>t&&(t=e),!isNaN(i)&&t>i&&(t=i),t
},e.getTwoPointRadian=function(t,e,i,n){var r=i-t,o=n-e;return this.getRadian(r,o)},e.getTwoPointAngle=function(t,e,i,n){return this.toAngle(this.getTwoPointRadian(t,e,i,n))},e.getDistance=function(t,e,i,n){var r=i-t,o=n-e;return Math.sqrt(r*r+o*o)},e.getRightAngleSide=function(t,e,i,n,r,o){var a=this.getTwoPointAngle(t,e,i,n),s=r*this.cos(a),u=r*this.sin(a);return o||(o=new egret.Point),o.x=s,o.y=u,o},e.getLinePoint=function(t,e,i,n,r,o){void 0===o&&(o=null),o||(o=new egret.Point);var a=this.getDistance(t,e,i,n);if(0==a||a==r)return o.x=i,o.y=n,o;var s=r/(a-r);return o.x=(t+i*s)/(1+s),o.y=(e+n*s)/(1+s),o},e.getLinePointByAngle=function(t,e,i,n,r){void 0===r&&(r=null);var o=t+i*this.cos(n),a=e+i*this.sin(n);return r||(r=new egret.Point),r.x=o,r.y=a,r},e.getCirclePoint=function(t,e,i,n,r,o){void 0===o&&(o=null);var a=t+i*this.cos(r),s=e+n*this.sin(r);return o||(o=new egret.Point),o.x=a,o.y=s,o},e.getLinePointByAngleExact=function(t,e,i,n,r){void 0===r&&(r=null);var o=t+i*Math.cos(this.toRadian(n)),a=e+i*Math.sin(this.toRadian(n));return r||(r=new egret.Point),r.x=o,r.y=a,r},e.getShortestPoint=function(t,e,i){for(var n=Number.MAX_SAFE_INTEGER,r=null,o=0,a=i;o<a.length;o++){var s=a[o],u=this.getDistance(s.x,s.y,t,e);n>u&&(n=u,r=s)}return r},e.toHex=function(t){return"#"+t.toString(16)},e.floor=function(t){return t>>0},e.abs=function(t){return(t^t>>31)-(t>>31)},e.isEven=function(t){return 0==(1&t)},e.flip=function(t){return~t+1},e.getRandomArray=function(t,e,i){for(var n=[],r=t;e>r;r++)n.push(r);for(var o=[];i--;){var a=Math.random()*n.length>>0;o.push(n.splice(a,1)[0])}return o},e.sign=function(t){return t>0&&(t=1),0>t&&(t=-1),t},e.PI=180/Math.PI,e.PI2=Math.PI/180,e.sinCache=[],e.cosCache=[],e}();t.MathUtil=e,__reflect(e.prototype,"vitamin.MathUtil")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(){}return t.create=function(e,n){void 0===n&&(n=null);var r=egret.getQualifiedClassName(e),o=t.pools[r];if(o&&!n)return o;var a=n?n:new i(r,e);if(t.pools[r]=a,o){for(var s=0,u=o.pool;s<u.length;s++){var c=u[s];a.to(c)}o.pool.length=0}return t.pools[r]},t.getPool=function(e){for(var i in t.pools){var n=t.pools[i];if(n.clazz==e)return n}return null},t.getPoolByName=function(e){for(var i in t.pools){var n=t.pools[i];if(n.name==e)return n}return null},t.from=function(e,n){void 0===n&&(n=!1);for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var a=egret.getQualifiedClassName(e);t.pools[a]||(t.pools[a]=new i(a,e));var s=t.pools[a];return r.unshift(n),s.from.apply(s,r)},t.fromConstructor=function(e,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var a=egret.getQualifiedClassName(e);t.pools[a]||(t.pools[a]=new i(a,e));var s=t.pools[a];return s.fromConstructor.apply(s,[n].concat(r))},t.to=function(e,i){if(void 0===i&&(i=!1),e&&e.__canRecover!==!1){var n=egret.getQualifiedClassName(e);if("undefined"==n)throw"[ObjectPool] Is not a valid pool type!";var r=t.pools[n];r&&r.to(e,i)}},t.tolist=function(e){if(e)for(var i=0,n=e;i<n.length;i++){var r=n[i],o=egret.getQualifiedClassName(r),a=t.pools[o];a&&a.to(r)}},t.destroy=function(e){var i=egret.getQualifiedClassName(e),n=t.pools[i];n&&n.destroy()},t.destroyExpiredObjects=function(){for(var e in t.pools){var i=t.pools[e];i&&i.destroyExpiredObjects()}},t.createNewInstance=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(null==e)return new t;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);case 8:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]);default:throw new Error("Unsupported number of Constructor args: "+e.length)}},t.getInfo=function(){var e=[];for(var i in t.pools){var n=t.pools[i];e.push({name:i,total:n&&n.pool?n.pool.length:"none"})}return e},t.addPool=function(e){t.pools[e.name]=e},t.CHECK_INTERVAL=1e4,t.EXPIRE_TIME=3e4,t.pools={},t}();t.ObjectPool=e,__reflect(e.prototype,"vitamin.ObjectPool");var i=function(){function t(t,e){this._clazz=e,this._clazzName=t,this._pool=[]}return Object.defineProperty(t.prototype,"name",{get:function(){return this._clazzName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clazz",{get:function(){return this._clazz},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pool",{get:function(){return this._pool},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this.pool.length},enumerable:!0,configurable:!0}),t.prototype.from=function(t){void 0===t&&(t=!1);for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var r;return r=this.pool.length?this.pool.pop():e.createNewInstance(this.clazz),r.__toPoolTime=0,t&&r.initialize.apply(r,i),r},t.prototype.fromConstructor=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n;return n=this.pool.length?this.pool.pop():t.apply(void 0,e),n.__toPoolTime=0,n},t.prototype.to=function(t,e){void 0===e&&(e=!0),t instanceof egret.DisplayObject&&(t.parent&&t.parent.removeChild(t),t.blendMode=egret.BlendMode.NORMAL,t.alpha=1,t.scaleX=t.scaleY=1,t.skewX=t.skewY=0,t.x=t.y=0,t.rotation=0,t.visible=!0,t.mask=null,t.matrix.identity()),e&&t.uninitialize(),this.pool.indexOf(t)<0&&(t.__toPoolTime=egret.getTimer(),this.pool.push(t))},t.prototype.destroy=function(){for(var t=0,e=this.pool;t<e.length;t++){var i=e[t];i instanceof egret.DisplayObject&&i.parent&&i.parent.removeChild(i),i.destroy&&i.destroy()}this.pool.length=0},t.prototype.destroyExpiredObjects=function(){for(var t=egret.getTimer(),i=0;i<this.pool.length;i++){var n=this.pool[i];t-n.__toPoolTime>e.EXPIRE_TIME&&(n instanceof egret.DisplayObject&&n.parent&&n.parent.removeChild(n),n.destroy&&n.destroy(),this.pool.splice(i,1),i--)}},t}();t.Pool=i,__reflect(i.prototype,"vitamin.Pool",["vitamin.ICachePool"])}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(){}return t.binds=function(t,e,i,n,r){for(var o=0,a=i;o<a.length;o++){var s=a[o],u=s.indexOf(",");-1==u&&(u=s.indexOf(">"));var c=s.substring(0,u),l=s.substring(u+1,s.length),h=this.bind(t,c,e,l,!1,r);n&&h&&h.exec()}},t.bindsEvents=function(t,e,i,n,r){var o=this;t.forEach(function(t){o.binds(e,i,n,r,t)})},t.unBinds=function(t,e){var i=this;e.forEach(function(e){return i.unBindPropertyAll(t,e)})},t.bind=function(t,e,i,n,r,o){return this.bindEvent(o,t,e,i,n,r)},t.unBind=function(e,i,n,r,o,a){t.unbindhandler(e,i,n,r,a),o&&t.unbindhandler(n,r,e,i,a)},t.bindEvents=function(t,e,i,n,r,o){var a,s=this;return t.forEach(function(t){var u=s.bindEvent(t,e,i,n,r,o);a||(a=u)}),a},t.unBindEvents=function(t,e,i,n,r,o){var a=this;t.forEach(function(t){a.unBindEvent(t,e,i,n,r,o)})},t.bindEvent=function(t,e,i,n,r,o){var a;return a=this.bindhandler(e,i,n,r,t),o&&this.bindhandler(n,r,e,e,t),a},t.unBindEvent=function(e,i,n,r,o,a){t.unbindhandler(i,n,r,o,e),a&&t.unbindhandler(r,o,i,n,e)},t.__bind=function(e,n,r){var o=i.fromPool(e,n,r);return t._binds.push(o),o},t.__unbind=function(e){var n=t._binds.indexOf(e);n>=0&&(t._binds.splice(n,1),i.toPool(e))},t.bindhandler=function(e,n,r,o,a){if(!t.hasBind(e,n,r,o,a)){var s=i.fromPool(e,n,a).update(r,o);return t._binds.push(s),s}return null},t.unbindhandler=function(e,n,r,o,a){var s=t.getBindIndex(e,n,r,o,a);if(s>=0){var u=t._binds[s];t._binds.splice(s,1),i.toPool(u)}},t.unBindPropertyAll=function(e,n){for(var r=0;r<t._binds.length;r++){var o=t._binds[r];o.object==e&&o.objprop==n&&(t._binds.splice(r,1),i.toPool(o),r--)}},t.unBindAll=function(e){for(var n=0;n<t._binds.length;n++){var r=t._binds[n];r.object==e&&(t._binds.splice(n,1),i.toPool(r),n--)}},t.unBindAllByTarget=function(e){for(var n=0;n<t._binds.length;n++){var r=t._binds[n];r.target==e&&(t._binds.splice(n,1),n--,i.toPool(r))}},t.hasBind=function(e,i,n,r,o){return-1!=t.getBindIndex(e,i,n,r,o)},t.getBindIndex=function(e,i,n,r,o){for(var a=t._binds.length,s=0;a>s;s++){var u=t._binds[s];if(u.isEqual(e,i,n,r,o))return s}return-1},t._binds=[],t}();t.OldBindUtil=e,__reflect(e.prototype,"vitamin.OldBindUtil");var i=function(){function e(){}return Object.defineProperty(e.prototype,"object",{get:function(){return this._object},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"objprop",{get:function(){return this._object},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tarprop",{get:function(){return this._tarprop},enumerable:!0,configurable:!0}),e.prototype.initialize=function(t){return this._object=t,this},e.prototype["catch"]=function(e,i){return this._objprop=e,i?(this._event=i,this._object instanceof egret.EventDispatcher&&this._object.addEventListener(i,this.exec,this),this):(t.WatchUtil.watch(this._object,this._objprop,this,this.exec),this)},e.prototype.update=function(t,e){return this._target=t,this._tarprop=e,this},e.prototype.reset=function(){this._event?this._object instanceof egret.EventDispatcher&&this._object.removeEventListener(this._event,this.exec,this):t.WatchUtil.unWatch(this._object,this._objprop,this,this.exec),this._object=null,this._objprop=null,this._target=null,this._tarprop=null,this._logenable=!1},e.prototype.exec=function(){return this._target[this._tarprop]=this._object[this._objprop],this._logenable&&console.log("[BINDER] ",this._target,this._tarprop,this._target[this._tarprop]),this},e.prototype.execRevert=function(){return this._object[this._objprop]=this._target[this._tarprop],this._logenable&&console.log("[BINDER] ",this._target,this._tarprop,this._target[this._tarprop]),this},e.prototype.log=function(){return this._logenable=!0,this},e.prototype.isEqual=function(t,e,i,n,r){return this._object==t&&this._objprop==e&&this._target==i&&this._tarprop==n&&this._event==r},e.fromPool=function(t,i,n){var r=e._pool.length?e._pool.pop():new e;return r.initialize(t)["catch"](i,n),r},e.toPool=function(t){t.reset(),e._pool.indexOf(t)<0&&e._pool.push(t)},e._pool=[],e}();t.BinderInfo=i,__reflect(i.prototype,"vitamin.BinderInfo")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(){}return t.normalizeArray=function(t,e){for(var i=[],n=0;n<t.length;n++){var r=t[n];r&&"."!==r&&(".."===r?i.length&&".."!==i[i.length-1]?i.pop():e&&i.push(".."):i.push(r))}return i},t.trimArray=function(t){for(var e=t.length-1,i=0;e>=i&&!t[i];i++);for(var n=e;n>=0&&!t[n];n--);return 0===i&&n===e?t:i>n?[]:t.slice(i,n+1)},t.posixSplitPath=function(t){return this.splitPathRe.exec(t).slice(1)},t.isString=function(t){return"string"==typeof t},t.isObject=function(t){return"object"==typeof t},t.resolve=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i="",n=!1,r=arguments.length-1;r>=-1&&!n;r--){var o=arguments[r];this.isString(o)&&o&&(i=o+"/"+i,n="/"===o[0])}return i=this.normalizeArray(i.split("/"),!n).join("/"),(n?"/":"")+i||"."},t.normalize=function(t){var e=this.isAbsolute(t),i=t&&"/"===t[t.length-1];return t=this.normalizeArray(t.split("/"),!e).join("/"),t||e||(t="."),t&&i&&(t+="/"),(e?"/":"")+t},t.isAbsolute=function(t){return"/"===t.charAt(0)},t.join=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i="",n=0;n<arguments.length;n++){var r=arguments[n];if(!this.isString(r))throw new TypeError("Arguments to path.join must be strings");r&&(i+=i?"/"+r:r)}return this.normalize(i)},t.relative=function(t,e){t=this.resolve(t).substr(1),e=this.resolve(e).substr(1);for(var i=this.trimArray(t.split("/")),n=this.trimArray(e.split("/")),r=Math.min(i.length,n.length),o=r,a=0;r>a;a++)if(i[a]!==n[a]){o=a;break}for(var s=[],a=o;a<i.length;a++)s.push("..");return s=s.concat(n.slice(o)),s.join("/")},t._makeLong=function(t){return t},t.dirname=function(t){var e=this.posixSplitPath(t),i=e[0],n=e[1];return i||n?(n&&(n=n.substr(0,n.length-1)),i+n):"."},t.basename=function(t,e){var i=this.posixSplitPath(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},t.extname=function(t){return this.posixSplitPath(t)[3]},t.format=function(t){if(!this.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);var e=t.root||"";if(!this.isString(e))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);var i=t.dir?t.dir+this.sep:"",n=t.base||"";return i+n},t.parse=function(t){if(!this.isString(t))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=this.posixSplitPath(t);if(!e||4!==e.length)throw new TypeError("Invalid path '"+t+"'");return e[1]=e[1]||"",e[2]=e[2]||"",e[3]=e[3]||"",{root:e[0],dir:e[0]+e[1].slice(0,-1),base:e[2],ext:e[3],name:e[2].slice(0,e[2].length-e[3].length)}},t.splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,t.sep="/",t.delimiter=":",t}();t.Path=e,__reflect(e.prototype,"vitamin.Path")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(){}return t.generate=function(t){if(!t)return[{style:{},text:""}];if(-1==t.indexOf("T:")&&-1==t.indexOf("&"))return[{style:{},text:t}];for(var e=t.split("|"),i=[],n=0,r=e.length;r>n;n++)i.push(this.getSingle(e[n]));return i},t.getSingle=function(e){for(var i=e.split("&"),n={style:{}},r=0,o=i.length;o>r;r++){var a=i[r],s=a.charAt(0),u=a.substring(a.indexOf(":")+1,a.length);switch(s){case t.PROP_TEXT:n.text=u;break;case t.STYLE_SIZE:n.style.size=parseInt(u);break;case t.STYLE_COLOR:n.style.textColor=parseInt(u);break;case t.NEW_LINE:n.text="\n";break;case t.STYLE_UNDERLINE:n.style.underline=!0;break;case t.STYLE_HREF:n.style.href="event:"+u;break;default:n.text=a}}return n},t.htmlParser=function(t){return this._htmlParser.parser(t)},t.STYLE_COLOR="C",t.STYLE_SIZE="S",t.PROP_TEXT="T",t.NEW_LINE="N",t.STYLE_UNDERLINE="U",t.STYLE_HREF="H",t._htmlParser=new egret.HtmlTextParser,t}();t.RichTextUtil=e,__reflect(e.prototype,"vitamin.RichTextUtil")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){}return e.toUnit=function(t,e){e||(e=this.units);for(var i=0,n=t.toFixed(2),r="";t>=1e3;)t/=1e3,r=e[i],i++;if(n=t.toFixed(2),n.length){var o=n.indexOf(".");if(o>0)for(;;){if(n=n.substring(0,n.length-1),"."==n.charAt(n.length-1)){n=n.substring(0,n.length-1);break}if("0"!=n.charAt(n.length-1))break}}return n+r},e.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i="",n=0,r=t;n<r.length;n++){var o=r[n];o&&(i+=o+"")}return i},e.generateRandomStr=function(e,i){e=e?e:5*Math.random()+20>>0;for(var n="";e--;)n+=String.fromCharCode(i?t.MathUtil.randRange(45,122):t.MathUtil.randRange(0,65535));return n},e.getSuffix=function(t,e){return void 0===e&&(e="."),t.split(e).pop()},e.firstUpper=function(t){return t.charAt(0).toUpperCase()+t.substring(1)},e.fill=function(t,e,i){for(var n="",r=0;r<t.length;r++)r<e.length?n+=e.charAt(r):i?n=t.charAt(t.length-r-1)+n:n+=t.charAt(r);return n},e.replenish=function(t,e,i,n){void 0===i&&(i="0"),void 0===n&&(n=!0);var r=t+"",o=e-r.length;if(o>=1)for(var a=0;o>a;a++)n?r=i+r:r+=i;return r},e.getCharsLength=function(t){for(this.gBytes.clear();this.gBytes.length;)this.gBytes.readByte();return this.gBytes.writeUTFBytes(t),this.gBytes.length},e.trim=function(t){for(var e;this.isWhitespace(t.charAt(e));)e++;for(var i=t.length-1;this.isWhitespace(t.charAt(i));)i--;return i>=e?t.slice(e,i+1):""},e.trimArrayElements=function(t,e){var i,n,r=null;if(""!=t&&null!=t){for(r=t.split(e),i=r.length,n=0;i>n;)r[n]=this.trim(r[n]),n++;i>0&&(t=r.join(e))}return t},e.isWhitespace=function(t){switch(t){case" ":case"	":case"\r":case"\n":case"\f":return!0;default:return!1}},e.substitute=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n,r=null,o=e.length;for(1==o&&e[0]instanceof Array?(r=e[0],o=r.length):r=e,n=0;o>n;)t=t.replace(new RegExp("\\{"+n+"\\}","g"),r[n]),n++;return t},e.equalBegin=function(t,e){return t==e.substring(0,t.length)},e.equalEnd=function(t,e){return t==e.substring(e.length-t.length)},e.rectToString=function(t){return t?t.x+","+t.y+","+t.width+","+t.height:""},e.delSpace=function(t){return t.replace(/ /g,"")},e.delEnter=function(t){return t.indexOf("\n")>=0&&(t=t.replace(/\n/g,"")),t.indexOf("\r")>=0&&(t=t.replace(/\r/g,"")),t},e.copyAndFill=function(t,e,i,n){void 0===i&&(i=","),void 0===n&&(n=null);var r,o=null;n||(n=Number);var a=t.concat(),s=e.split(i),u=Math.min(a.length,s.length);for(r=0;u>r;)o=s[r],a[r]=n("true"==o?!0:"false"==o?!1:o),r++;return a},e.parseString=function(e){var i=[];if(e)for(var n=e.split("&"),r=n.length,o=0;r>o;o++){var a=n[o];if(a.indexOf("|")>=0){var s=a.split("|"),u=t.MathUtil.randRange(0,s.length-1);a=s[u]}s=a.split(",");for(var c=0,l=s;c<l.length;c++){var h=l[c];i.push(h.split(":"))}}for(var p=0,f=i;p<f.length;p++){var d=f[p];for(r=d.length,o=0;r>o;o++)d[o]=parseInt(d[o])}return i},e.omit=function(t,e){void 0===e&&(e=10);var i=e-3;return t.length>i?t.substr(0,i)+"...":t+"..."},e.units=["k","m","t","a","b","c","d","e","f"],e.gBytes=new egret.ByteArray,e}();t.StringUtil=e,__reflect(e.prototype,"vitamin.StringUtil")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(){}return t.generateTextFlow=function(t){if(!t)return[{style:{},text:""}];if(-1==t.indexOf("T:")&&-1==t.indexOf("&"))return[{style:{},text:t}];for(var e=t.split("|"),i=[],n=0,r=e.length;r>n;n++)i.push(this.getSingleTextFlow(e[n]));return i},t.getSingleTextFlow=function(e){for(var i=e.split("&"),n={style:{}},r=0,o=i.length;o>r;r++){var a=i[r],s=a.charAt(0),u=a.substring(a.indexOf(":")+1,a.length);switch(s){case t.PROP_TEXT:n.text=u;break;case t.STYLE_SIZE:n.style.size=parseInt(u);break;case t.STYLE_COLOR:n.style.textColor=parseInt(u);break;case t.NEW_LINE:n.text="\n";break;case t.STYLE_UNDERLINE:n.style.underline=!0;break;case t.STYLE_HREF:n.style.href="event:"+u;break;default:n.text=a}}return n},t.htmlParser=function(t){return this._htmlParserinstance.parser(t)},t.STYLE_COLOR="C",t.STYLE_SIZE="S",t.PROP_TEXT="T",t.NEW_LINE="N",t.STYLE_UNDERLINE="U",t.STYLE_HREF="H",t._htmlParserinstance=new egret.HtmlTextParser,t}();t.TextFlowMaker=e,__reflect(e.prototype,"vitamin.TextFlowMaker")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){}return e.createInstance=function(){this._container||(this._container=new t.Container,this._texture=new egret.RenderTexture,this._bitmap=new t.Bitmap,this._container.addChild(this._bitmap))},e.apply=function(e,i,n,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){switch(o.label){case 0:return this.createInstance(),this._bitmap.texture=e,this._bitmap.filters=[i],[4,t.nextTick()];case 1:return o.sent(),r||(r=new egret.RenderTexture),r.drawToTexture(this._container,null,n),this._bitmap.filters=null,[2,r]}})})},e.draw=function(t,e,i,n,r,o){return void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=1),e instanceof egret.DisplayObject&&0==i&&0==n?void t.drawToTexture(e,r,o):(this.createInstance(),e instanceof egret.DisplayObject?(this._texture.drawToTexture(e,r,o),this._bitmap.texture=this._texture):this._bitmap.texture=e,this._bitmap.pos(i,n),t.drawToTexture(this._container),t)},e}();t.TextureUtil=e,__reflect(e.prototype,"vitamin.TextureUtil")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){}return e.numTo=function(e,i){this.addTween(e,t.NumberItem,i)},e.numCancel=function(e){this.removeTween(e,t.NumberItem)},e.shack=function(e,i,n,r,o){void 0===i&&(i=10),void 0===n&&(n=500),void 0===r&&(r=-1),void 0===o&&(o=null),this.addTween(e,t.ShackItem,{angle:i,interval:n,times:r,complete:o})},e.shackCancel=function(e){this.removeTween(e,t.ShackItem)},e.flash=function(e,i,n,r,o,a){void 0===i&&(i=500),void 0===n&&(n=-1),void 0===r&&(r=void 0),void 0===o&&(o=void 0),void 0===a&&(a=null),this.addTween(e,t.FlashItem,{interval:i,times:n,targetRotation:r,targetScale:o,complete:a})},e.flashCancel=function(e){this.removeTween(e,t.FlashItem)},e.shock=function(e,i,n,r,o){this.addTween(e,t.ShockItem,{time:i,amplitude:n,caller:r,complete:o})},e.shockCancel=function(e){this.removeTween(e,t.ShockItem)},e.bezier=function(e,i){this.addTween(e,t.BezierItem,i)},e.bezierCancel=function(e){this.removeTween(e,t.BezierItem)},e.angle=function(e,i,n,r,o,a){void 0===o&&(o=null),void 0===a&&(a=null),this.addTween(e,t.AngleItem,{angle:i,time:n,ease:r,caller:o,complete:a})},e.angleCancel=function(e){this.removeTween(e,t.AngleItem)},e.addTween=function(e,i,n){this.removeTween(e,i),this.instancs.has(e.hashCode)||this.instancs.set(e.hashCode,{});var r=this.instancs.get(e.hashCode),o=r[egret.getQualifiedClassName(i)]=t.ObjectPool.from(i);o.initialize(e,n),o.onComplete(this,function(t){this.removeTween(t.target,i)})},e.removeTween=function(e,i){var n=this.instancs.get(e.hashCode);if(n){if(i){var r=egret.getQualifiedClassName(i),o=n[r];return void(o&&(n[r]=null,delete n[r],t.ObjectPool.to(o,!0)))}for(var a in n){var o=n[a];o&&t.ObjectPool.to(o,!0)}this.instancs["delete"](e.hashCode)}},e.instancs=new Map,e}();t.TweenUtil=e,__reflect(e.prototype,"vitamin.TweenUtil")}(vitamin||(vitamin={}));var vitamin;!function(t){function e(t){for(var e="",i=t||11;i--;)e+=r[36*Math.random()|0];return e}function i(){for(var t=0;36>t;t++)8===t||13===t||18===t||23===t?s[t]="-":14===t?s[t]="4":(2>=u&&(u=33554432+16777216*Math.random()|0),o=15&u,u>>=4,s[t]=a[19===t?3&o|8:o]);return s.join("")}for(var n=36,r="";n--;)r+=n.toString(36);t.uid=e;var o,a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),s=new Array(36),u=0;t.uuid=i}(vitamin||(vitamin={}));var vitamin;!function(t){function e(){return v++}function i(t,e,i,n,r){for(var o=0;r>o;o++)t[e++]=i[n++]}function n(t){for(var e=new Uint8Array(3*t.length),n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r),a=null;a=127>=o?[o]:2047>=o?[192|o>>6,128|63&o]:[224|o>>12,128|(4032&o)>>6,128|63&o];for(var s=0;s<a.length;s++)e[n]=a[s],++n}var u=new Uint8Array(n);return i(u,0,e,0,n),u}function r(t){for(var e=new Uint8Array(t),i=[],n=0,r=0,o=e.length;o>n;)e[n]<128?(r=e[n],n+=1):e[n]<224?(r=((63&e[n])<<6)+(63&e[n+1]),n+=2):(r=((15&e[n])<<12)+((63&e[n+1])<<6)+(63&e[n+2]),n+=3),i.push(r);return String.fromCharCode.apply(null,i)}function o(t){for(var e="",i=new Uint8Array(t),n=i.byteLength,r=0;n>r;r++)e+=String.fromCharCode(i[r]);return"data:image/png;base64,"+window.btoa(e)}function a(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=new Image;n.onload=function(){var t=new egret.Texture;t._setBitmapData(n),i&&i.call(e,t)},n.src=t}function s(t,e,i){return void 0===e&&(e=null),void 0===i&&(i=null),a(o(t),e,i)}function u(e,i){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t.ticker.once.apply(t.ticker,[e,i].concat(n))}function c(e,i){t.ticker.onceClear(e,i)}function l(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return[2,new Promise(function(i,n){t.timer.once(e,null,i,!1)})]})})}function h(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(e,i){t.ticker.once(null,e)})]})})}function p(t){var e=typeof t;return"string"==e?!0:"boolean"==e?!0:"number"==e?!0:!1}function f(t){return void 0==t||null==t}function d(t){return void 0!=t&&null!=t}function _(t){var e=[],i=[];for(var n in t)Number.isNaN(Number(n))?e.push(n):i.push(n);var r=e&&e.length?e:i;return{keys:r,values:r.map(function(e){return t[e]})}}function g(t){var e=_(t),i=(e.keys,e.values);return i.random()}function m(t){var e=new egret.Bitmap(t),i=new egret.RenderTexture;return i.drawToTexture(e,new egret.Rectangle(0,0,t.textureWidth,t.textureHeight)),i}var v=1;t.getGID=e,t.parseXMLFromString=function(t){var e;if(t=t.replace(/>\s+</g,"><"),e=(new DOMParser).parseFromString(t,"text/xml"),e.firstChild.textContent.indexOf("This page contains the following errors")>-1)throw new Error(e.firstChild.firstChild.textContent);return e},t.copyBytesArray=i,t.stringEncode=n,t.stringDecode=r,t.bufferToBase64=o,t.base64ToTexture=a,t.bufferToTexture=s,t.callLater=u,t.unCallLater=c,t.wait=l,t.nextTick=h,t.isBaseType=p,t.isNull=f,t.notNull=d,t.enumParse=_,t.getRandomEnum=g,t.getIndependTexture=m}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){}return e.notify=function(t,e){if(this._handlers[t.$hashCode]&&this._handlers[t.$hashCode][e])for(var i=this._handlers[t.$hashCode][e],n=0,r=i;n<r.length;n++){var o=r[n];o.method.call(o.caller,t[e],t,e)}},e.watch=function(i,n,r,o,a){if(!i)return void t.assert("被监视的对象为空值...");void 0==i.$hashCode&&Object.defineProperty(i,"$hashCode",{value:egret.getQualifiedClassName(i),enumerable:!1,configurable:!0,writable:!0});var s=i.$hashCode;if(this._handlers[s]||(this._handlers[s]={}),!this._handlers[s][n]){this._handlers[s][n]=[];var u="__"+n+"__";Object.defineProperty(i,u,{value:i[n],enumerable:!1,configurable:!0,writable:!0}),Object.defineProperty(i,n,{get:function(){return this[u]},set:function(t){var i=this[u];return i===t?t:(this[u]=t,e.notify(this,n),t)}})}for(var c=this._handlers[s][n],l=0,h=c;l<h.length;l++){var p=h[l];if(p.caller==r&&p.method==o)return}c.push({caller:r,method:o}),a&&o.call(r,i[n],i,n)},e.unWatch=function(t,e,i,n){var r=t.$hashCode;if(this._handlers[r]&&this._handlers[r][e])for(var o=this._handlers[r][e],a=0;a<o.length;a++){var s=o[a];if(s.caller==i&&s.method==n){o.splice(a,1);break}}},e._handlers={},e}();t.WatchUtil=e,__reflect(e.prototype,"vitamin.WatchUtil")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.initialize=function(t,e){this.frame=0,this._frames=t.map(function(t,i){return{texture:t,offset:e?e[i]:{x:0,y:0}}}),this.texture=this._frames.first().texture},i.prototype.uninitialize=function(){this.offAll(),this.stop(),this._delay=0,this._interval=0,this._loop=!1,this._frames=null},i.prototype.delay=function(t){return this._delay=t,this},i.prototype.interval=function(t){return this._interval=t,this},i.prototype.loop=function(){return this._loop=!0,this},i.prototype.play=function(e){return void 0===e&&(e=12),this._delay?void t.timer.once(this._delay,this,this.play,!0,e):(this.frame=0,this._frameRate=e,t.ticker.frame(this,this.updateRender,e),this)},i.prototype.stop=function(){t.timer.clear(this,this.play),t.ticker.clear(this,this.updateRender)||console.warn("animation clear updateRender fail!")},i.prototype.updateRender=function(){if(this.frame>=this._frames.length){if(this.dispatchEventWith(egret.Event.LOOP_COMPLETE),!this._loop)return;if(this.frame=0,this._interval)return this.stop(),void t.timer.once(this._interval,this,this.play,!0,this._frameRate)}this.texture=this._frames[this.frame].texture,this.frame++},i.prototype.onEnd=function(t,e){this.addEventListener(egret.Event.LOOP_COMPLETE,e,t)},i.prototype.onEndOnce=function(t,e){this.once(egret.Event.LOOP_COMPLETE,e,t)},i.prototype.offEnd=function(t,e){this.removeEventListener(egret.Event.LOOP_COMPLETE,e,t)},i.prototype.offEndAll=function(){this.offAll(egret.Event.LOOP_COMPLETE)},i.prototype.on=function(t,e,i){this.addEventListener(t,i,e)},i.prototype.off=function(t,e,i){this.removeEventListener(t,i,e)},i.prototype.offAll=function(t){var e=this.$getEventMap();if(t)for(var i=e[t];i&&i.length;){var n=i.pop();this.removeEventListener(n.type,n.listener,n.caller,n.useCapture)}else for(var r in e)for(var i=e[r];i&&i.length;){var n=i.pop();this.removeEventListener(n.type,n.listener,n.caller,n.useCapture)}},i}(t.Bitmap);t.Animation=e,__reflect(e.prototype,"vitamin.Animation")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.initialize=function(i,n){n||(n={}),e.prototype.initialize.call(this,i,n),this._target=i,this._object||(this._object={rotation:0}),this._object.rotation=this._target.rotation,this._object.rotation=(this._object.rotation+360)%360;var r=void 0!=n.angle?n.angle:0,o=void 0!=n.time?n.time:300;return r=(r+360)%360,Math.abs(r-this._object.rotation)>180&&(r>this._object.rotation?r-=360:r+=360),t.ticker.frame(this,this.updateRender,60),egret.Tween.get(this._object).to({rotation:r},o).call(this.end,this),this},i.prototype.uninitialize=function(){t.ticker.clear(this,this.updateRender),this._target&&egret.Tween.removeTweens(this._target),e.prototype.uninitialize.call(this)},i.prototype.end=function(){this._options.complete&&this._options.complete.call(this._options.caller,this._target),e.prototype.end.call(this)},i.prototype.updateRender=function(){this._target&&(this._target.rotation=this._object.rotation)},i}(t.TweenItem);t.AngleItem=e,__reflect(e.prototype,"vitamin.AngleItem")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._props_start={},t._props_offset={},t._cachePoint=new egret.Point,t}return __extends(i,e),i.prototype.initialize=function(i,n){if(e.prototype.initialize.call(this,i,n),this._startTime=t.ticker.timeStamp,this._endTime=this._startTime+n.duration,this._props_start.x=i.x,this._props_start.y=i.y,this._propspos=n.posprops,this._props_offset.x=n.posprops.x-this._props_start.x,this._props_offset.y=n.posprops.y-this._props_start.y,n.props){this._props=n.props;for(var r in n.props)this._props_start[r]=i[r],this._props_offset[r]=n.props[r]-this._props_start[r]}return this._ease=n.ease,t.ticker.add(this,this.updateRender),this},i.prototype.uninitialize=function(){t.ticker.clear(this,this.updateRender),e.prototype.uninitialize.call(this)},i.prototype.end=function(){this._options.complete&&this._options.complete.call(this._options.caller,this._target),e.prototype.end.call(this)},i.prototype.updateRender=function(t){if(this._target){var e=this;if(t>=e._endTime)return e.update(1),void e.end();var i=(t-e._startTime)/(e._endTime-e._startTime);e.update(i)}},i.prototype.update=function(e){var i=this,n=i._ease?i._ease(e):e;if(i._props)for(var r in i._props)i._target[r]=i._props_start[r]+i._props_offset[r]*n;var o=t.BezierUtil.quadraticPoint(n,i._props_start.x,i._props_start.y,i._propspos.controlX,i._propspos.controlY,i._props_start.x+i._props_offset.x,i._props_start.y+i._props_offset.y,i._cachePoint);i._target.x=o.x,i._target.y=o.y},i}(t.TweenItem);t.BezierItem=e,__reflect(e.prototype,"vitamin.BezierItem")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.initialize=function(t,i){return i||(i={}),e.prototype.initialize.call(this,t,i),this._interval=void 0!=i.interval?i.interval:500,this._times=void 0!=i.times?i.times:-1,this._startRotation=t.rotation,this._startScale=t.scaleX,this._targetRotation=void 0!=i.targetRotation?i.targetRotation:t.rotation,this._targetScale=void 0!=i.targetScale?i.targetScale:t.scaleX,this._completeHandler=i.complete,this.updateRender(),this},i.prototype.uninitialize=function(){egret.Tween.removeTweens(this._target),e.prototype.uninitialize.call(this)},i.prototype.end=function(){this._completeHandler&&this._completeHandler.runWith(this._target),e.prototype.end.call(this)},i.prototype.updateRender=function(){if(this._target){if(0==this._times)return void this.end();this._times>0&&this._times--;var e=this._target.alpha>0;egret.Tween.get(this._target).to({alpha:e?0:1,rotation:e?this._targetRotation:this._startRotation,scaleX:e?this._targetScale:this._startScale,scaleY:e?this._targetScale:this._startScale},this._interval,t.Ease.quartInOut).call(this.updateRender,this)}},i}(t.TweenItem);t.FlashItem=e,__reflect(e.prototype,"vitamin.FlashItem")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initialize=function(e,i){t.prototype.initialize.call(this,e,i),this.value=i.start;var n=this;return egret.Tween.get(this,i.onChange?{onChange:function(){return i.onChange(n.value)
}}:null).to({value:i.end},void 0!=i.duration?i.duration:1e3,i.ease).call(this.end,this),this},e.prototype.uninitialize=function(){t.prototype.uninitialize.call(this),egret.Tween.removeTweens(this)},e.prototype.updateRender=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.end=function(){this._options.onComplete&&this._options.onComplete(),t.prototype.end.call(this)},e}(t.TweenItem);t.NumberItem=e,__reflect(e.prototype,"vitamin.NumberItem")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.initialize=function(t,i){e.prototype.initialize.call(this,t,i),i||(i={}),this._angle=t.rotation;var n=void 0!=i.angle?i.angle:10;return this._minAngle=this._angle-n,this._maxAngle=this._angle+n,this._interval=void 0!=i.interval?i.interval:500,this._times=void 0!=i.times?i.times:-1,this._target=t,this.updateRender(),this},i.prototype.uninitialize=function(){egret.Tween.removeTweens(this._target),this._target.rotation=this._angle,e.prototype.uninitialize.call(this)},i.prototype.updateRender=function(){if(this._target){if(0==this._times)return void this.end();this._times>0&&this._times--;var e=this._target.rotation>this._angle?this._minAngle:this._maxAngle;0==this._times&&(e=this._angle),egret.Tween.get(this._target).to({rotation:e},this._interval,t.Ease.cubicInOut).call(this.updateRender,this)}},i}(t.TweenItem);t.ShackItem=e,__reflect(e.prototype,"vitamin.ShackItem")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._original=new egret.Point,t}return __extends(i,e),i.prototype.initialize=function(i,n){return e.prototype.initialize.call(this,i,n),this._original.setTo(i.x,i.y),this._startTime=egret.getTimer(),this._endTime=this._startTime+n.time,this._amplitude=void 0!=n.amplitude?n.amplitude:20,this._boolean=!0,t.ticker.frame(this,this.updateRender,60),this},i.prototype.uninitialize=function(){this._target&&(this._target.x=this._original.x,this._target.y=this._original.y),t.ticker.clear(this,this.updateRender),e.prototype.uninitialize.call(this)},i.prototype.end=function(){this._options.complete&&this._options.complete.call(this._options.caller,this._target),e.prototype.end.call(this)},i.prototype.updateRender=function(){if(this._target){var e=egret.getTimer();if(e>=this._endTime)return t.ticker.clear(this,this.updateRender),void this.end();var i=this._amplitude*(this._endTime-e)/(this._endTime-this._startTime);this._boolean=!this._boolean,this._boolean?this._target.x=this._original.x+i:this._target.x=this._original.x-i}},i}(t.TweenItem);t.ShockItem=e,__reflect(e.prototype,"vitamin.ShockItem")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){this.lock=!1,this.enable=!0,this.lazy=!1,this._watchs=[],this._binders=[]}return e.prototype.initialize=function(t){return this._property=t,this},e.prototype.uninitialize=function(){this.clear(),this._property=null},e.prototype.clear=function(){this.unwatchAll(),this.unbindAll(),this._property.handlers.clear()},Object.defineProperty(e.prototype,"property",{get:function(){return this._property},enumerable:!0,configurable:!0}),e.prototype.watch=function(e,n,r){if(!this._watchs.find(function(t){return t.caller==e&&t.method==n})){var o=t.ObjectPool.from(i).initialize(this._property).call(e,n);return this._watchs.push(o),r&&(void 0!=r.lazy&&(o.lazy=r.lazy),void 0!=r.handler&&(o.convert=r.handler)),r&&r.execOnce&&n.call(e,this._property.getValue()),this}},e.prototype.unwatch=function(e,i){var n=this._watchs.findIndex(function(t){return t.caller==e&&t.method==i});if(n>=0){var r=this._watchs.splice(n,1)[0];r.uninitialize(),t.ObjectPool.to(r)}return this},e.prototype.exec=function(){var t=this;return this._watchs.forEach(function(e){return e.method.call(e.caller,t._property.getValue())}),this},e.prototype.unwatchAll=function(){this._watchs.forEach(function(e){e.uninitialize(),t.ObjectPool.to(e)}),this._watchs.length=0},e.prototype.bind=function(e,i,n){if(!this._binders.find(function(t){return t.target==e&&t.targetProp==i})){var r=t.ObjectPool.from(t.PropBinder).initialize(this._property,e,i,n);return this._binders.push(r),n&&n.execOnce&&r.exec(this._property.getValue()),this}},e.prototype.unbind=function(e,i){var n=this._binders.findIndex(function(t){return t.target==e&&t.targetProp==i});if(n>=0){var r=this._binders.splice(n,1)[0];r.uninitialize(),t.ObjectPool.to(r)}return this},e.prototype.unbindAll=function(){this._binders.forEach(function(e){e.uninitialize(),t.ObjectPool.to(e)}),this._binders.length=0},e.prototype.onMethodAfter=function(t,e,i){void 0===i&&(i=!1),this._property.handlers.add(t,e,null,i)},e.prototype.offMethodAfter=function(t,e){this._property.handlers.remove(t,e)},e}();t.PropertyHandler=e,__reflect(e.prototype,"vitamin.PropertyHandler");var i=function(){function e(){this.enable=!0,this.lazy=!1}return e.prototype.initialize=function(t){return this._property=t,this._property.handlers.add(this,this.onChange,null,!1),this},e.prototype.uninitialize=function(){this._property.handlers.remove(this,this.onChange),this.enable=!0,this.lazy=!1},e.prototype.call=function(t,e){return this.caller=t,this.method=e,this},e.prototype.onChange=function(e,i,n){return this.enable&&this.method?(this.convert&&(e=this.convert(e),i=this.convert(i)),this.lazy?void t.callLater(this,this.onChangeLater,this.caller,this.method,e,i,n):void this.method.call(this.caller,e,i,n)):void 0},e.prototype.onChangeLater=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];e.apply(t,i)},e}();t.PropertyCallBack=i,__reflect(i.prototype,"vitamin.PropertyCallBack",["vitamin.IPool"])}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(e,i){return this.lock=!1,this.enable=!0,this.lazy=!1,this._target=e,this._prop=i,this._handlers=new t.Handlers(!1),e[i]instanceof t.ArrayCollection?void(this._isArrayCollection=!0):"function"==typeof e[i]?void this.overrideMethod():void this.overrideSetter()}return Object.defineProperty(e.prototype,"isArrayCollection",{get:function(){return this._isArrayCollection},enumerable:!0,configurable:!0}),e.prototype.getValue=function(){return this._target[this._prop]},e.prototype.overrideSetter=function(){var e=this,i=this._target,n=this._prop,r="__"+n+"__";if(!Object.getOwnPropertyDescriptor(i,r)){var o=i[n];Object.defineProperty(i,r,{value:o,enumerable:!1,configurable:!0,writable:!0}),delete i[n],Object.defineProperty(i,n,{get:function(){return this[r]},set:function(o){if(e.lock)return console.warn("属性赋值已锁定,已取消赋值:"+egret.getQualifiedClassName(i)+t.ObjectUtil.guid(i)+":"+n),this[r];var a=this[r];return a===o?o:(this[r]=o,e.enable&&e.onChange(o,a),o)},enumerable:!0,configurable:!0})}},e.prototype.dispose=function(){this.uninitialize(),"function"==typeof this._target[this._prop]?this.revertMethod():this.revertSetter()},e.prototype.revertSetter=function(){var t="__"+this._prop+"__";Object.defineProperty(this._target,this._prop,{get:function(){return this[t]},set:function(e){var i=this[t];return i===e?e:(this[t]=e,e)},enumerable:!0,configurable:!0})},e.prototype.overrideMethod=function(){var t=this,e=this._target,i=this._prop,n=e.prototype?e.prototype:Object.getPrototypeOf(e),r=this.__oldMethod=n[i];return n[i]=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];t.lock||(r.call.apply(r,[e].concat(i)),t.enable&&t.onChangeLater(i))},this},e.prototype.revertMethod=function(){var t=this._target.prototype?this._target.prototype:Object.getPrototypeOf(this._target);t[this._prop]=this.__oldMethod},e.prototype.initialize=function(){this.lock=!1,this.enable=!0,this.lazy=!1},e.prototype.uninitialize=function(){this._handlers.clear()},e.prototype.exec=function(){return this.enable&&this.onChange(this._target[this._prop]),this},e.prototype.onChange=function(e,i){return this.lazy?(t.unCallLater(this,this.onChangeLater),void t.callLater(this,this.onChangeLater,e,i)):void this._handlers.runWith(e,i,this._target)},e.prototype.onChangeLater=function(t,e){this._handlers.runWith(t,e)},Object.defineProperty(e.prototype,"handlers",{get:function(){return this._handlers},enumerable:!0,configurable:!0}),e}();t.PropertyWatcher=e,__reflect(e.prototype,"vitamin.PropertyWatcher")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){}return e.get=function(e,i,n){e.___wactherproperties||Object.defineProperty(e,"___wactherproperties",{value:new Map,enumerable:!1});var r=e.___wactherproperties;if(!r.has(i)){var o=new t.PropertyWatcher(e,i);n&&(void 0!=n.lock&&(o.lock=n.lock),void 0!=n.enable&&(o.enable=n.enable),void 0!=n.lazy&&(o.lazy=n.lazy));var a=t.ObjectPool.from(t.PropertyHandler);a.initialize(o),r.set(i,a)}return r.get(i)},e.prototype.clear=function(t){if(t.___wactherproperties){var e=t.___wactherproperties;e.forEach(function(t){return t.clear()})}},e.clear=function(e){if(e.___wactherproperties){var i=e.___wactherproperties;i.forEach(function(e){e.property.dispose(),e.uninitialize(),t.ObjectPool.to(e)}),i.clear()}},e}();t.Watcher=e,__reflect(e.prototype,"vitamin.Watcher")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function e(){}return e.prototype.initialize=function(e,i,n,r){return this._prop=e,this._options=r,this._execter=t.ObjectPool.from(t.PropExecter),this._execter.initialize(i,n,r.propType),this._prop.handlers.add(this,this.exec),this},e.prototype.uninitialize=function(){return this._prop&&this._prop.handlers.remove(this,this.exec),this._prop=null,this._execter&&(this._execter.uninitialize(),t.ObjectPool.to(this._execter),this._execter=null),this},e.prototype.exec=function(t){var e=this._options;e&&e.handler&&(t=e.handler(t)),this._execter.set(t)},Object.defineProperty(e.prototype,"property",{get:function(){return this._prop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"execter",{get:function(){return this._execter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this._execter.body},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targetProp",{get:function(){return this._execter.prop},enumerable:!0,configurable:!0}),e}();t.PropBinder=e,__reflect(e.prototype,"vitamin.PropBinder")}(vitamin||(vitamin={}));var vitamin;!function(t){var e=function(){function t(){}return t.prototype.initialize=function(t,e,i){if(this._body=t,this._prop=e,this._propType=i,e.indexOf(".")>=0){var n=e.split(".").filter(function(t){return!!t});this._realProp=n.pop(),this._realBody=this.getRealBody(this._body,n)}else this._realBody=this._body,this._realProp=e},t.prototype.uninitialize=function(){this._body=null,this._prop=null,this._realBody=null,this._realProp=null},Object.defineProperty(t.prototype,"body",{get:function(){return this._body},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"prop",{get:function(){return this._prop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"realBody",{get:function(){return this._realBody},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"realProp",{get:function(){return this._realProp},enumerable:!0,configurable:!0}),t.prototype.getRealBody=function(t,e){for(var i=e.length,n=0;i>n;){var r=e[n];if(void 0==t)return void console.error("PropertySetter error:"+egret.getQualifiedClassName(t)+":"+r);t=t[r],n++}return t},t.prototype.set=function(t){switch(this._propType){case"string":t+="";break;case"boolean":t=!!t;break;case"number":t=Number(t)}this._realBody[this._realProp]=t},t}();t.PropExecter=e,__reflect(e.prototype,"vitamin.PropExecter",["vitamin.IPool"])}(vitamin||(vitamin={}));