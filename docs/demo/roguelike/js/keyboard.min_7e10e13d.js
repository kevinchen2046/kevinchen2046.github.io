var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},vitamin;!function(e){var t=function(){function t(e){this.keyCode=e}return t.prototype.down=function(t,n,i){return this.downHandlers||(this.downHandlers=new e.Handlers(!1)),this.downHandlers.add(t,n,null,!!i),this},t.prototype.up=function(t,n,i){return this.upHandlers||(this.upHandlers=new e.Handlers(!1)),this.upHandlers.add(t,n,null,!!i),this},t.prototype.offDown=function(e,t){return this.downHandlers&&this.downHandlers.remove(e,t),this},t.prototype.offUp=function(e,t){return this.upHandlers&&this.upHandlers.remove(e,t),this},t.prototype.execDown=function(){this.downHandlers&&this.downHandlers.run()},t.prototype.execUp=function(){this.upHandlers&&this.upHandlers.run()},t}();e.KeyItem=t,__reflect(t.prototype,"vitamin.KeyItem");var n=function(){function e(){this._keys=[],this._downmutis=[],this._keyStates=new Map,this.initialize()}return e.prototype.initialize=function(){return this._keyDownHandler=this.onKeyDownHandler.bind(this),this._keyUpHandler=this.onKeyUpHandler.bind(this),this._enabled=!0,egret.Capabilities.runtimeType==egret.RuntimeType.WEB&&this.updateRegisterKeyEvent(),!1},Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled!=e&&(this._enabled=e,this.updateRegisterKeyEvent())},enumerable:!0,configurable:!0}),e.prototype.isDown=function(e){return!!this._keyStates.get(e)},e.prototype.updateRegisterKeyEvent=function(){this._enabled?(document.addEventListener("keydown",this._keyDownHandler),document.addEventListener("keyup",this._keyUpHandler)):(document.removeEventListener("keydown",this._keyDownHandler),document.removeEventListener("keyup",this._keyUpHandler))},e.prototype.onKeyDownHandler=function(e){this._keyStates.set(e.keyCode,!0);for(var t=0;t<this._keys.length;t++)if(this._keys[t].keyCode==e.keyCode){this._keys[t].execDown();break}this.updateMutiKeys()},e.prototype.onKeyUpHandler=function(e){this._keyStates.set(e.keyCode,!1);for(var t=0;t<this._keys.length;t++)if(this._keys[t].keyCode==e.keyCode){this._keys[t].execUp();break}this.updateMutiKeys()},e.prototype.updateMutiKeys=function(){for(var e=0;e<this._downmutis.length;e++){for(var t=this._downmutis[e].keys,n=!0,i=0,o=t;i<o.length;i++){var s=o[i];if(!this._keyStates.get(s)){n=!1;break}}n&&this._downmutis[e].handlers.run()}},e.prototype.get=function(e){var n=this._keys.find(function(t){return t.keyCode==e});return n||(n=new t(e),this._keys.push(n)),n},e.prototype.mutidown=function(e,t,n){},e.prototype.unmutidown=function(e,t,n){},e}();e.KeyBoardManager=n,__reflect(n.prototype,"vitamin.KeyBoardManager");var i;!function(e){e[e.NUMBER_0=48]="NUMBER_0",e[e.NUMBER_1=49]="NUMBER_1",e[e.NUMBER_2=50]="NUMBER_2",e[e.NUMBER_3=51]="NUMBER_3",e[e.NUMBER_4=52]="NUMBER_4",e[e.NUMBER_5=53]="NUMBER_5",e[e.NUMBER_6=54]="NUMBER_6",e[e.NUMBER_7=55]="NUMBER_7",e[e.NUMBER_8=56]="NUMBER_8",e[e.NUMBER_9=57]="NUMBER_9",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.F13=124]="F13",e[e.F14=125]="F14",e[e.F15=126]="F15",e[e.NUMPAD=21]="NUMPAD",e[e.NUMPAD_0=96]="NUMPAD_0",e[e.NUMPAD_1=97]="NUMPAD_1",e[e.NUMPAD_2=98]="NUMPAD_2",e[e.NUMPAD_3=99]="NUMPAD_3",e[e.NUMPAD_4=100]="NUMPAD_4",e[e.NUMPAD_5=101]="NUMPAD_5",e[e.NUMPAD_6=102]="NUMPAD_6",e[e.NUMPAD_7=103]="NUMPAD_7",e[e.NUMPAD_8=104]="NUMPAD_8",e[e.NUMPAD_9=105]="NUMPAD_9",e[e.NUMPAD_ADD=107]="NUMPAD_ADD",e[e.NUMPAD_DECIMAL=110]="NUMPAD_DECIMAL",e[e.NUMPAD_DIVIDE=111]="NUMPAD_DIVIDE",e[e.NUMPAD_ENTER=108]="NUMPAD_ENTER",e[e.NUMPAD_MULTIPLY=106]="NUMPAD_MULTIPLY",e[e.NUMPAD_SUBTRACT=109]="NUMPAD_SUBTRACT",e[e.SEMICOLON=186]="SEMICOLON",e[e.EQUAL=187]="EQUAL",e[e.COMMA=188]="COMMA",e[e.MINUS=189]="MINUS",e[e.PERIOD=190]="PERIOD",e[e.SLASH=191]="SLASH",e[e.BACKQUOTE=192]="BACKQUOTE",e[e.LEFTBRACKET=219]="LEFTBRACKET",e[e.BACKSLASH=220]="BACKSLASH",e[e.RIGHTBRACKET=221]="RIGHTBRACKET",e[e.QUOTE=222]="QUOTE",e[e.ALTERNATE=18]="ALTERNATE",e[e.BACKSPACE=8]="BACKSPACE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.COMMAND=15]="COMMAND",e[e.CONTROL=17]="CONTROL",e[e.DELETE=46]="DELETE",e[e.ENTER=13]="ENTER",e[e.ESCAPE=27]="ESCAPE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.SHIFT=16]="SHIFT",e[e.SPACE=32]="SPACE",e[e.TAB=9]="TAB",e[e.INSERT=45]="INSERT"}(i=e.Keyboard||(e.Keyboard={})),e.key=e.ObjectUtil.instance(n)}(vitamin||(vitamin={}));